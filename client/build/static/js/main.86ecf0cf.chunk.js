(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){e.exports=a.p+"static/media/mockups.c413c538.png"},134:function(e,t,a){e.exports=a(213)},139:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(28),l=a(27),o=(a(139),a(5)),i=a(6),c=a(8),p=a(7),d=a(15),u=a(130),m=a(90),h=a(40),f=a(63),b=a.n(f),g=a(21),y=a.n(g),v=a(64),E=a.n(v),S=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e)).isMobile=s.props.isMobile;var n,r=s.props.clubs,l=s.props.positions,i=Object.keys(r);r=r[i[i.length-1]];for(var c=i.length-1;c>=0;c--){var p=l[i[c]];if("-"!==(n=void 0===p||p.length<1||"N/A"===p[0]?["-"]:p)[0])break}return s.state={page:s.props.page,forComparison:s.props.forComparison,comparisonCode:s.props.comparisonCode,code:s.props.code,name:s.props.name,age:s.props.age,clubs:r,nationality:s.props.nationality,countryCode:s.props.countryCode,positions:n},s}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this.state,a=t.page,s=t.forComparison,r=t.comparisonCode,o=t.code,i=t.name,c=t.age,p=t.clubs,d=t.nationality,u=t.countryCode,m=t.positions;e=s?"/compare/".concat(r,"_").concat(o):"/stats/".concat(o);var h=this.isMobile?1.8:1;return n.a.createElement(l.b,{to:e},n.a.createElement("div",{tabIndex:"0",className:"search-result"},n.a.createElement("div",{className:"bio"},n.a.createElement("span",{className:"name"},i),n.a.createElement(E.a,{basePath:"/flags",country:u,format:"png",pngSize:32,width:("live"===a?20:28)*h,height:("live"===a?20:28)*h,shiny:!0,alt:"".concat(d," Flag")})),n.a.createElement("div",{className:"bio-extra"},n.a.createElement("span",{className:"club"},p.join(", ")),n.a.createElement("span",{className:"position-age"},"".concat(c," | ").concat(m.join(", "))))))}}]),a}(s.Component),C=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).isMobile=s.props.isMobile,s.state={page:s.props.page,name:s.props.name,countryCode:s.props.countryCode},s}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.page,a=e.name,s=e.countryCode,r=this.isMobile?2:1;return n.a.createElement(l.b,{to:"/search/"+a+"/all"},n.a.createElement("div",{tabIndex:"0",className:"search-result"},n.a.createElement("div",{className:"bio"},n.a.createElement("span",{className:"name"},a),n.a.createElement(E.a,{basePath:"/flags",country:s,format:"png",pngSize:32,width:("live"===t?20:28)*r,height:("live"===t?20:28)*r,shiny:!0,alt:"".concat(s," Flag")}))))}}]),a}(s.Component),k=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e))._isMounted=!1,s._firstRequest=!0,s.getSearchResults=function(e){var t=null;return s.liveSearchEnabled&&(s.controller=new AbortController,t=s.controller.signal),new Promise((function(a,s){fetch("/api/search",{signal:t,method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,type:"playersAndClubs",isLive:!0})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch search results. Please refresh the page and try again.")}),(function(){s()})).then((function(e){a(e)})).catch((function(e){s(e)}))}))},s.handleChange=function(e){s.setState({query:e.target.value})},s.handleChangeLive=function(e){var t=e.target.value;s._firstRequest?s._firstRequest=!1:s.controller.abort(),s.setState({query:t,liveResultsOpen:t.length>0,isLoading:!0}),s.updateLiveSearchResults(t)},s.updateLiveSearchResults=function(e){e.length>0?s.getSearchResults(e).then((function(e){var t=e.playerSearchResults,a=e.clubSearchResults;s._isMounted&&s.setState({playerSearchResults:[],clubSearchResults:[]},(function(){s.setState({playerSearchResults:t,clubSearchResults:a,error:null,isLoading:!1})}))}),(function(e){s._isMounted&&e&&s.setState({error:e,isLoading:!1})})):s._isMounted&&s.setState({error:null,isLoading:!1,playerSearchResults:[],clubSearchResults:[]})},s.handleFocus=function(e){var t=e.target.value;s.isMobile&&"home"===s.page&&(y()("#searchbar-container1").css({position:"fixed",top:0,left:0,width:"100%","z-index":7}),y()("h1").css({display:"none"})),s.setState({liveResultsOpen:s.liveSearchEnabled&&t.length>0})},s.handleBlur=function(){s.isMobile&&"home"===s.page&&(y()("#searchbar-container1").css({position:"relative",width:"75%","z-index":1}),y()("h1").css({display:"block"})),s.setState({liveResultsOpen:!1})},s.handleSubmit=function(e){if(e.preventDefault(),"compare"!==s.page)s.props.history.push("/search/"+s.state.query);else{var t=s.state.query;s.setState({liveResultsOpen:t.length>0,isLoading:!0}),s.updateLiveSearchResults(t)}},s.handleSubmitLive=function(e){e.preventDefault(),"compare"!==s.page&&s.props.history.push("/search/"+s.state.query)},s.page=s.props.page,s.isMobile=s.props.isMobile,s.currentPlayerCode=s.props.currentPlayerCode,s.liveSearchEnabled=!0;try{s.controller=new AbortController}catch(n){s.liveSearchEnabled=!1}switch(s.containerID="",s.page){case"search":s.containerID="searchbar-container2";break;case"stats":s.containerID="searchbar-container3";break;default:s.containerID="searchbar-container1"}return s.displayHomeButton="default","home"!==s.page&&"compare"!==s.page||(s.displayHomeButton="none"),s.state={query:s.props.query||"",isLoading:void 0!==s.props.query,error:null,liveResultsOpen:!1,playerSearchResults:[],clubSearchResults:[]},s.updateLiveSearchResults(s.state.query),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){for(var e=this.state,t=e.query,a=e.isLoading,s=e.liveResultsOpen,r=e.playerSearchResults,o=e.clubSearchResults,i=[],c=0;c<r.length;c++){var p=r[c];i.push(n.a.createElement(S,{isMobile:this.isMobile,page:"live",forComparison:"compare"===this.page,comparisonCode:this.currentPlayerCode,code:p.code,name:p.name,age:p.age,clubs:p.clubs,nationality:p.nationality,countryCode:p.countryCode,positions:p.positions,key:c}))}for(var d=[],u=0;u<o.length;u++){var m=o[u];d.push(n.a.createElement(C,{isMobile:this.isMobile,page:"live",name:m.name,countryCode:m.countryCode,key:u}))}return n.a.createElement("div",{className:"searchbar-container",id:this.containerID},n.a.createElement(l.b,{id:"home-button",to:"/"},n.a.createElement("div",{style:{display:this.displayHomeButton}},n.a.createElement("div",null,"Football",n.a.createElement("span",{style:{color:"#e4c000",display:"block"}},"Slices",n.a.createElement("span",{style:{color:"black"}},".com"))))),n.a.createElement(b.a,{onOutsideClick:this.handleBlur},n.a.createElement("form",{id:"searchbar-form",onSubmit:this.liveSearchEnabled?this.handleSubmitLive:this.handleSubmit},n.a.createElement("input",{type:"text",id:"searchbar-input",value:t,placeholder:"compare"===this.page?"Search for players...":"Search for players, clubs...",autoComplete:"off",onChange:this.liveSearchEnabled?this.handleChangeLive:this.handleChange,onFocus:this.handleFocus}),n.a.createElement("div",{id:"live-search-results",style:{display:s?"block":"none"}},n.a.createElement("div",{id:"live-search-loader"},n.a.createElement("div",{style:{display:a?"block":"none"},className:"loader"},"Loading...")),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,"Players"),i,0===i.length?n.a.createElement("p",null,a?"...":" No results found"):null),n.a.createElement("div",{style:{display:"compare"===this.page?"none":"block"}},n.a.createElement("h3",null,"Clubs"),d,0===d.length?n.a.createElement("p",null,a?"...":" No results found"):null))))))}}]),a}(s.Component),w=Object(d.g)(k),O=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{id:"main"},n.a.createElement("div",{className:"screen",id:"loading-screen"},n.a.createElement("div",{className:"loader"},"Loading...")))}}]),a}(s.Component),P=a(105),x=a.n(P),A=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.getDatabaseSize=function(){fetch("/api/databaseSize",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){if(s._isMounted){if(s.setState({databaseSize:e.value,isLoading:!1}),s.isMobile){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);y()("#home").css({height:t})}y()("#navbar-hidden").addClass("preload")}})).catch((function(e){s._isMounted&&s.setState({error:e,isLoading:!1})}))},s.toggleNavbar=function(){var e=y()(".responsive-navbar");"navbar-hidden"===e.attr("id")?e.attr("id","navbar-expanded"):(y()("#navbar-expanded").removeClass("preload"),e.attr("id","navbar-hidden"))},s.hideNavbar=function(){y()("#navbar-expanded").removeClass("preload"),y()(".responsive-navbar").attr("id","navbar-hidden")},s.isMobile=s.props.isMobile,s.state={isLoading:!0,error:null,databaseSize:0},s.getDatabaseSize(),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,document.title="Home | Football Slices",this.props.recordPageViewGA(window.location.pathname)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error,s=e.databaseSize;return t?n.a.createElement(O,null):null!==a?n.a.createElement("div",{id:"main2"},n.a.createElement(w,{isMobile:this.isMobile,page:"home"}),n.a.createElement("div",{className:"screen",id:"error-screen"},n.a.createElement("p",null,a.message))):n.a.createElement("div",{id:"homepage"},n.a.createElement(b.a,{onOutsideClick:this.hideNavbar},n.a.createElement("div",{id:"navbar-container"},n.a.createElement("div",{className:"navbar",id:"navbar-normal"},n.a.createElement("a",{onClick:this.hideNavbar,href:"#home"},n.a.createElement("div",null,"Home")),n.a.createElement("a",{href:"#about"},n.a.createElement("div",null,"About")),n.a.createElement("a",{href:"#glossary"},n.a.createElement("div",null,"Glossary")),n.a.createElement("a",{href:"#faq"},n.a.createElement("div",null,"F.A.Q.")),n.a.createElement("a",{href:"#contact"},n.a.createElement("div",null,"Contact")),n.a.createElement("button",{onClick:this.toggleNavbar,id:"burger-icon-container"},n.a.createElement("div",{id:"burgerIcon"},n.a.createElement("i",{className:"fa fa-bars"})))),n.a.createElement("div",{className:"navbar responsive-navbar",id:"navbar-hidden"},n.a.createElement("a",{onClick:this.hideNavbar,href:"#about"},n.a.createElement("div",null,"About")),n.a.createElement("a",{onClick:this.hideNavbar,href:"#glossary"},n.a.createElement("div",null,"Glossary")),n.a.createElement("a",{onClick:this.hideNavbar,href:"#faq"},n.a.createElement("div",null,"F.A.Q.")),n.a.createElement("a",{onClick:this.hideNavbar,href:"#contact"},n.a.createElement("div",null,"Contact"))))),n.a.createElement("div",{id:"home"},n.a.createElement("h1",null,"Football",n.a.createElement("span",{style:{color:"#e4c000"}},"Slices")),n.a.createElement(w,{isMobile:this.isMobile,page:"home"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(l.b,{to:"/advancedSearch"},n.a.createElement("button",{id:"lucky-button"},"Advanced Search"))),n.a.createElement("div",{id:"about",className:"homepage-section-container centered-section"},n.a.createElement("div",{id:"about-section-container"},n.a.createElement("div",{id:"about-text"},n.a.createElement("h2",null,"About"),n.a.createElement("p",null,"Football Slices is a stats visualization tool powered by ",n.a.createElement("a",{href:"https://www.highcharts.com",target:"_blank",rel:"noopener noreferrer"},"Highcharts.js"),", and adapted from ",n.a.createElement("a",{href:"https://projects.fivethirtyeight.com/world-cup-comparisons/",target:"_blank",rel:"noopener noreferrer"},"FiveThirtyEight's World Cup player profiles.")),n.a.createElement("p",null,"It is built on a database of ",n.a.createElement("b",null,s.toLocaleString()," players")," from ",n.a.createElement("b",null,"Europe's top 5 leagues"),", with stats from the ",n.a.createElement("b",null,"2018/19 season onwards"),"."),n.a.createElement("p",null,"Football Slices is made possible by the incredible work done by the people over at ",n.a.createElement("a",{href:"https://www.fbref.com",target:"_blank",rel:"noopener noreferrer"},"FBref.com"),", who provide advanced stats courtesy of ",n.a.createElement("a",{href:"https://www.statsbomb.com",target:"_blank",rel:"noopener noreferrer"},"StatsBomb"),". Every chart title has a link to the player's page on FBref, where you can find that player's complete stats sheet. Please do make sure to check out FBref and spread the word about them if you'd like to see them continue adding more data to their site."),n.a.createElement("br",null),n.a.createElement("p",null,n.a.createElement("span",{className:"accented-p"},"Interpreting the Slices")),n.a.createElement("p",null,"A Football Slice is made up of a number of wedges (12 for outfield players, 3 for goalkeepers), each representing a relevant stat. The length of each wedge corresponds to the selected player's percentile rank for the stat when they are compared to top-5 league players who play in a similar position."),n.a.createElement("p",null,"The colours help to group similar-ish stats together (as well as improve the charts' visual impact)."),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Red")," is for goal-scoring & shooting stats,"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Yellow")," is for passing, chance creation & ball progression"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Green")," is for dribbling & ball retention"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Blue")," is for defending"),n.a.createElement("li",null,"and ",n.a.createElement("span",{style:{color:"#787ccd",fontWeight:"bold"}},"Purple")," is for goalkeeping stats"))),n.a.createElement("div",{id:"about-image"},n.a.createElement("img",{src:x.a,alt:"Mock-ups"})))),n.a.createElement("div",{id:"glossary",style:{backgroundColor:"#f5f6f7"},className:"homepage-section-container centered-section"},n.a.createElement("div",{id:"glossary-section-container"},n.a.createElement("h2",null,"Glossary"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Non-Penalty Goal"),"\xa0 A goal that did not stem directly from a penalty kick."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Non-Penalty xG (Expected Goals)"),"\xa0 Expected goals that did not stem directly from penalty kicks.*"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Non-Penalty xG/Shot"),"\xa0 The average expected goal value of shots taken, excluding penalty kicks."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Aerial Win"),"\xa0 Winning the ball in a duel that was challenged in the air."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Aerial Win %"),"\xa0 The percentage of aerials duels contested that were won."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Touch in Box"),"\xa0 Having possession of the ball in the opposition's penalty area. (Note: Receiving a pass, then dribbling, then sending a pass counts as one touch)"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"xA (Expected Assists)"),"\xa0 Expected goals that resulted from a player's shot assists, including set pieces.*"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"OP (Open Play) Shot-Creating Action"),"\xa0 Excluding set pieces, one of the last two offensive actions that directly led to a shot; such as a pass, dribble or a drawn foul. (Note: A single player can receive credit for multiple actions and the shot-taker can also receive credit)"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Pass into Box"),"\xa0 A completed pass that entered the opposition's penalty area, excluding set pieces."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Pass into Final 1/3"),"\xa0 A completed pass that entered the third of the pitch that is closest to the opposition's goal, excluding set pieces."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Yards Progressed"),"\xa0 Distance, in yards, that the ball was moved towards the oppositions's goal with passes and carries. (Note: Passes and carries away from the oppositions's goal are counted as zero progressive yards)"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Pass Completion %"),"\xa0 The percentage of attempted passes that successfully found a teammate."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Long Pass Completion %"),"\xa0 The percentage of attempted passes of 25 yards or more that successfully found a teammate."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Launched Pass Completion %"),"\xa0 The percentage of attempted passes of 40 yards or more that successfully found a teammate, including goal kicks."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Successful Dribble"),"\xa0 A successful attempt at taking on a player and making it past them whilst retaining possession."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Dribble Success %"),"\xa0 The percentage of attempted dribbles that were successful."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Turnover"),"\xa0 A miscontrol, or being tackled by an opponent and losing possession of the ball without attempting a dribble."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"pAdj"),"\xa0 Possession Adjusted (using the StatsBomb sigmoid function).**"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Successful Pressure"),"\xa0 A pressing action that led to the team regaining possession within the next 5 seconds."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Interception"),"\xa0 A prevention of an opponent's pass from reaching another opponent by moving into the line of the pass."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Successful Tackle"),"\xa0 A successful dispossession of an opponent (whether the tackler's team won possession of the ball or not)."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Tackle/Dribbled Past %"),"\xa0 The percentage of dribblers faced that were tackled."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Aerial Win"),"\xa0 Winning the ball in a duel that was challenged in the air."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Aerial Win %"),"\xa0 The percentage of aerials duels contested that were won."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Clearance"),"\xa0 An action where a player kicked/headed the ball away from their own goal."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#787ccd",fontWeight:"bold"}},"GSAA (Goals Saved Above Average) %"),"\xa0 (Post-Shot xG \u2212 Goals Conceded (excluding own goals)) \xf7 Shots on Target Faced.***"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#787ccd",fontWeight:"bold"}},"Cross Stopping %"),"\xa0 The percentage of attempted crosses into the penalty area that were stopped by the goalkeeper.")),n.a.createElement("div",{id:"glossary-links"},n.a.createElement("span",null,"* ",n.a.createElement("a",{href:"https://fbref.com/en/expected-goals-model-explained/",target:"_blank",rel:"noopener noreferrer"},"Expected goals/assists model explanation")),n.a.createElement("span",null,"** ",n.a.createElement("a",{href:"https://statsbomb.com/2014/06/introducing-possession-adjusted-player-stats/",target:"_blank",rel:"noopener noreferrer"},"Possession adjustment explanation")),n.a.createElement("span",null,"*** ",n.a.createElement("a",{href:"https://statsbomb.com/2018/12/introducing-goalkeeper-radars/",target:"_blank",rel:"noopener noreferrer"},"GSAA % explanation"))))),n.a.createElement("div",{id:"faq",className:"homepage-section-container centered-section"},n.a.createElement("div",{id:"faq-section-container"},n.a.createElement("h2",null,"F.A.Q."),n.a.createElement("div",{id:"faq-container"},n.a.createElement("div",{className:"faq-item"},n.a.createElement("p",null,n.a.createElement("span",{className:"accented-p"},"Where does the data come from?")),n.a.createElement("p",null,"All stats are from ",n.a.createElement("a",{href:"https://www.fbref.com",target:"_blank",rel:"noopener noreferrer"},"FBref.com"),", who provide advanced stats courtesy of ",n.a.createElement("a",{href:"https://www.statsbomb.com",target:"_blank",rel:"noopener noreferrer"},"StatsBomb"),". The metadata is from ",n.a.createElement("a",{href:"https://www.whoscored.com",target:"_blank",rel:"noopener noreferrer"},"WhoScored.com"),".")),n.a.createElement("div",{className:"faq-item"},n.a.createElement("p",null,n.a.createElement("span",{className:"accented-p"},"Who's included in the database? How often is it updated?")),n.a.createElement("p",null,"The database includes all top 5 league players who've made 4 or more league appearances in any of the covered seasons. It is updated about once a week.")),n.a.createElement("div",{className:"faq-item"},n.a.createElement("p",null,n.a.createElement("span",{className:"accented-p"},"How are the percentile ranks calculated?")),n.a.createElement("p",null,"The percentile rank of a score is the percentage of scores within a dataset that are equal to or lower than the score. This is reversed for stats where a lower value is better, such as 'turnovers'."),n.a.createElement("p",null,"The percentile ranks for FootballSlices are position-specific. For example, selecting the 'forward' template compares the selected player only to other forwards in the database. The percentile ranks are also season-specific. For example, selecting competitions from the 2018/19 season will only compare the selected player to the 2018/19 dataset. Selecting competitions from multiple seasons will compare the selected player to the combined dataset."),n.a.createElement("p",null,"However, please note that the percentile ranks are not competition-specific. In other words, the selected player's stats are always compared to other players' stats from all competitions, regardless of which competitions are toggled for the selected player.")),n.a.createElement("div",{className:"faq-item"},n.a.createElement("p",null,n.a.createElement("span",{className:"accented-p"},"How are the possession-adjusted stats calculated?")),n.a.createElement("p",null,"Possession-adjusted offensive stats are obtained by calculating the number of times a player completes an action for every 100 touches of the ball they have."),n.a.createElement("p",null,"Defensive stats are adjusted for possession using the StatsBomb sigmoid function, which you can read more about ",n.a.createElement("a",{href:"https://statsbomb.com/2014/06/introducing-possession-adjusted-player-stats/",target:"_blank",rel:"noopener noreferrer"},"here"),". Each player's stats for a particular competition are adjusted based on their team's average possession during said competition."),n.a.createElement("p",null,"Ideally, a player's stats should be adjusted based on the possession stats from only the games they played in. However, I don't have access to that data and so I used the next best thing; which is the team's average possession across all games in the competition.")),n.a.createElement("div",{className:"faq-item"},n.a.createElement("p",null,n.a.createElement("span",{className:"accented-p"},"How are the player positions decided?")),n.a.createElement("p",null,"Position data is obtained using the 'detailed' tab of the ",n.a.createElement("a",{href:"https://whoscored.com/Statistics",target:"_blank",rel:"noopener noreferrer"},"WhoScored.com player statistics table")," to find all players who've made 10 or more league starts in each of the template positions during a particular season.")),n.a.createElement("div",{className:"faq-item"},n.a.createElement("p",null,n.a.createElement("span",{className:"accented-p"},"Will the database be expanded to include seasons before 2018/19 and players outside the top 5 leagues?")),n.a.createElement("p",null,"Probably not. At present, ",n.a.createElement("a",{href:"https://www.fbref.com",target:"_blank",rel:"noopener noreferrer"},"FBref.com"),"'s advanced stats are only available for a few seasons and leagues."))))),n.a.createElement("div",{id:"contact",style:{backgroundColor:"#f5f6f7"},className:"homepage-section-container"},n.a.createElement("div",{id:"contact-section-container"},n.a.createElement("h2",null,"Contact"),n.a.createElement("p",null,"For any bug reports, suggestions or questions, please feel free to reach out to me at either of the following:"),n.a.createElement("ul",null,n.a.createElement("li",null,"Twitter: ",n.a.createElement("a",{href:"https://twitter.com/FootballSlices",target:"_blank",rel:"noopener noreferrer"},"@FootballSlices")),n.a.createElement("li",null,"Email: ",n.a.createElement("a",{href:"mailto:footballslices@gmail.com",target:"_blank",rel:"noopener noreferrer"},"FootballSlices@gmail.com"))),n.a.createElement("p",null,"Note: Football Slices is a hobby project created and maintained by Ham (",n.a.createElement("a",{href:"https://twitter.com/DyslexicDdue",target:"_blank",rel:"noopener noreferrer"},"@DyslexicDdue"),"). I try to implement as many suggested features as I can, but unfortunately, I can't guarantee that I'll get to everything."))))}}]),a}(s.Component),T=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.getSearchResults=function(){var e=void 0===s.state.searchByClub?"playersAndClubs":"playersByClub";fetch("/api/search",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:s.state.query,type:e})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch search results. Please refresh the page and try again.")})).then((function(e){return s.processSearchResults(e)})).catch((function(e){s._isMounted&&s.setState({error:e,isLoading:!1})}))},s.processSearchResults=function(e){var t=e.playerSearchResults,a=e.clubSearchResults;s._isMounted&&(s.setState({searchResults:[]},(function(){s.setState({error:null,isLoading:!1,playerSearchResults:t,filteredPlayerSearchResults:t,clubSearchResults:a})})),document.title="Search Results | Football Slices",s.props.recordPageViewGA(window.location.pathname))},s.filterByName=function(e){var t=JSON.parse(JSON.stringify(s.state.playerSearchResults)),a=[],n="";if(null===e)a=t;else{n=e.target.value.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("\xd8","O").replace("\xf8","o");for(var r=0;r<t.length;r++){t[r].name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("\xd8","O").replace("\xf8","o").toUpperCase().includes(n.toUpperCase())&&a.push(t[r])}}s.setState({filteredPlayerSearchResults:[],filterValue:n},(function(){s.setState({filteredPlayerSearchResults:a})}))},s.isMobile=s.props.isMobile,s.state={isLoading:!0,error:null,query:e.match.params.query,searchByClub:e.match.params.searchByClub,playerSearchResults:[],filteredPlayerSearchResults:[],clubSearchResults:[],filterValue:""},s.getSearchResults(),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var a=this,s=e.match.params,n=s.query,r=s.searchByClub;this.setState({isLoading:!0,query:n,searchByClub:r},(function(){a.getSearchResults()}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error,s=e.filteredPlayerSearchResults,r=e.clubSearchResults,l=e.searchByClub,o=e.filterValue;if(t)return n.a.createElement(O,null);if(null!==a)return n.a.createElement("div",{id:"main"},n.a.createElement(w,{isMobile:this.isMobile,page:"search",query:this.state.query}),n.a.createElement("div",{className:"screen",id:"error-screen"},n.a.createElement("p",null,a.message)));for(var i=[],c=0;c<s.length;c++){var p=s[c];i.push(n.a.createElement(S,{isMobile:this.isMobile,page:"search",code:p.code,name:p.name,age:p.age,clubs:p.clubs,nationality:p.nationality,countryCode:p.countryCode,positions:p.positions,key:c}))}for(var d,u=[],m=0;m<r.length;m++){var h=r[m];u.push(n.a.createElement(C,{isMobile:this.isMobile,page:"search",name:h.name,countryCode:h.countryCode,key:m}))}return d=void 0===l?n.a.createElement("h3",null,"Search results for ",n.a.createElement("br",null),'"',this.state.query,'"'):n.a.createElement("h3",null,"Search results for ",n.a.createElement("br",null),'"player.club[20-21] = ',this.state.query,'"'),n.a.createElement("div",{id:"main"},n.a.createElement(w,{isMobile:this.isMobile,page:"search",query:this.state.query}),n.a.createElement("div",{className:"screen",id:"search-screen"},n.a.createElement("div",{className:"filter",id:"search-filters"},n.a.createElement("div",{className:"filter-inputs search-filter-inputs",id:"search-filter-inputs"},d,n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:o,placeholder:"Filter players by name",onChange:this.filterByName}))),n.a.createElement("div",{className:"result",id:"search-results"},void 0===l?n.a.createElement("h3",null,"Players"):null,0===i.length&&void 0===l?n.a.createElement("p",null,"No results found"):null,n.a.createElement("div",{id:"player-search-results"},i),void 0===l?n.a.createElement("h3",{style:{marginTop:"20px"}},"Clubs"):null,0===u.length&&void 0===l?n.a.createElement("p",null,"No results found"):null,n.a.createElement("div",{id:"club-search-results"},u))))}}]),a}(s.Component),j=a(9),N=a(43),M=a(81),L=a.n(M),R=a(48),D=a.n(R),F=a(75),G=a(57),W=a.n(G),_=a(85),B=a.n(_),I=a(106),J=a.n(I),K=new N.a,z={FW:["#f15c80","#f15c80","#f15c80","#f15c80","#f15c80","#e4d354","#e4d354","#e4d354","#90ed7d","#90ed7d","#90ed7d","#7cb5ec"],AM:["#f15c80","#f15c80","#f15c80","#e4d354","#e4d354","#e4d354","#e4d354","#e4d354","#90ed7d","#90ed7d","#90ed7d","#7cb5ec"],CM:["#e4d354","#e4d354","#e4d354","#e4d354","#e4d354","#90ed7d","#90ed7d","#90ed7d","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec"],FB:["#e4d354","#e4d354","#e4d354","#e4d354","#90ed7d","#90ed7d","#90ed7d","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec"],CB:["#e4d354","#e4d354","#e4d354","#e4d354","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec","#7cb5ec"],GK:["#9499ff","#9499ff","#e4d354"],comparison:["#e75453","#e75453","#e75453","#e75453","#e75453","#e75453","#e75453","#e75453","#e75453","#e75453","#e75453","#e75453"]},q={vertical:{GK:["bottom","top","top"],other:["bottom","bottom","middle","middle","middle","top","top","top","middle","middle","middle","bottom"]},horizontal:{GK:["center","left","right"],other:["center","center","left","left","left","center","center","center","right","right","right","center"]}};function U(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=void 0===a?this.state.selectedCompetitions:this.state.selectedCompetitions[a];var s={};for(var n in e)for(var r in e[n])if(t[n].includes(r))for(var l in e[n][r]){var o=e[n][r][l];l in s?"age"===l?s[l].includes(o)||s[l].push(o):s[l]+=o:s[l]="age"===l?[o]:o}return s}function H(e){var t,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.state.percentileArrays,r=this.state.template,l=this.state.selectedCompetitions,o=this.state.pAdjTypes,i=[];if(void 0===s)for(var c in t=this.state.percentileEntries,l)0!==l[c].length&&i.push(c);else for(var p in t=this.state.percentileEntries[s],l)for(var d in l[p])0!==l[p][d].length&&(i.includes(d)||i.push(d));a=1===i.length?i[0]:"combined";var u=0;for(var m in t)a!==m&&"combined"!==a||t[m].includes(r)&&(u=1);var h={},f={},b=e.minutes/90,g=e.touches/100;switch(r){case"FW":h.npg=e.npg/b,h.npxg=e.npxg/b,h.npxgPerShot=e.npxg/e.shots,h.succAerials=e.succAerials/b,h.aerialSuccRate=e.succAerials/e.attAerials*100,h.dribbleSuccRate=e.succDribbles/e.attDribbles*100,h.succPressures=e.succPressures/b,o.offensive?(h.padjBoxTouches=e.boxTouches/g,h.padjXA=e.xa/g,h.padjPPA=e.ppa/g,h.padjSuccDribbles=e.succDribbles/g,h.padjTurnovers=(e.timesDispossessed+e.miscontrols)/g):(h.boxTouches=e.boxTouches/b,h.xa=e.xa/b,h.ppa=e.ppa/b,h.succDribbles=e.succDribbles/b,h.turnovers=(e.timesDispossessed+e.miscontrols)/b);break;case"AM":h.npg=e.npg/b,h.npxg=e.npxg/b,h.npxgPerShot=e.npxg/e.shots,h.passSuccRate=e.succPasses/e.attPasses*100,h.dribbleSuccRate=e.succDribbles/e.attDribbles*100,h.succPressures=e.succPressures/b,o.offensive?(h.padjXA=e.xa/g,h.padjSCA=e.sca/g,h.padjPPA=e.ppa/g,h.padjProgDistance=e.progDistance/g,h.padjSuccDribbles=e.succDribbles/g,h.padjTurnovers=(e.timesDispossessed+e.miscontrols)/g):(h.xa=e.xa/b,h.sca=e.sca/b,h.ppa=e.ppa/b,h.progDistance=e.progDistance/b,h.succDribbles=e.succDribbles/b,h.turnovers=(e.timesDispossessed+e.miscontrols)/b);break;case"CM":h.passSuccRate=e.succPasses/e.attPasses*100,h.dribbleSuccRate=e.succDribbles/e.attDribbles*100,h.dribbleTackleRate=e.succDribbleTackles/e.attDribbleTackles*100,h.succPressures=e.succPressures/b,o.offensive?(h.padjXA=e.xa/g,h.padjSCA=e.sca/g,h.padjPFT=e.pft/g,h.padjProgDistance=e.progDistance/g,h.padjSuccDribbles=e.succDribbles/g,h.padjTurnovers=(e.timesDispossessed+e.miscontrols)/g):(h.xa=e.xa/b,h.sca=e.sca/b,h.pft=e.pft/b,h.progDistance=e.progDistance/b,h.succDribbles=e.succDribbles/b,h.turnovers=(e.timesDispossessed+e.miscontrols)/b),o.defensive?(h.padjInterceptions=e.padjInterceptions/b,h.padjSuccTackles=e.padjSuccTackles/b):(h.interceptions=e.interceptions/b,h.succTackles=e.succTackles/b);break;case"FB":h.passSuccRate=e.succPasses/e.attPasses*100,h.dribbleSuccRate=e.succDribbles/e.attDribbles*100,h.dribbleTackleRate=e.succDribbleTackles/e.attDribbleTackles*100,h.succPressures=e.succPressures/b,h.aerialSuccRate=e.succAerials/e.attAerials*100,o.offensive?(h.padjXA=e.xa/g,h.padjPFT=e.pft/g,h.padjProgDistance=e.progDistance/g,h.padjSuccDribbles=e.succDribbles/g,h.padjTurnovers=(e.timesDispossessed+e.miscontrols)/g):(h.xa=e.xa/b,h.pft=e.pft/b,h.progDistance=e.progDistance/b,h.succDribbles=e.succDribbles/b,h.turnovers=(e.timesDispossessed+e.miscontrols)/b),o.defensive?(h.padjInterceptions=e.padjInterceptions/b,h.padjSuccTackles=e.padjSuccTackles/b):(h.interceptions=e.interceptions/b,h.succTackles=e.succTackles/b);break;case"CB":h.passSuccRate=e.succPasses/e.attPasses*100,h.longPassSuccRate=e.succLongPasses/e.attLongPasses*100,h.dribbleTackleRate=e.succDribbleTackles/e.attDribbleTackles*100,h.succAerials=e.succAerials/b,h.aerialSuccRate=e.succAerials/e.attAerials*100,h.succPressures=e.succPressures/b,o.offensive?(h.padjPFT=e.pft/g,h.padjProgDistance=e.progDistance/g):(h.pft=e.pft/b,h.progDistance=e.progDistance/b),o.defensive?(h.padjInterceptions=e.padjInterceptions/b,h.padjSuccTackles=e.padjSuccTackles/b,h.padjFouls=e.padjFouls/b,h.padjClearances=e.padjClearances/b):(h.interceptions=e.interceptions/b,h.succTackles=e.succTackles/b,h.fouls=e.fouls/b,h.clearances=e.clearances/b);break;case"GK":h.gsaa=(e.psxg-e.goalsAgainst)/e.sota*100,h.crossStopRate=e.stoppedCrosses/e.attCrosses*100,h.launchedPassSuccRate=e.succLaunchedPasses/e.attLaunchedPasses*100;break;default:h.npg=0,h.npxg=0,h.npxgPerShot=0,h.conversionRate=0,h.aerialSuccRate=0,h.boxTouches=0,h.xa=0,h.ppa=0,h.succDribbles=0,h.dribbleSuccRate=0,h.turnovers=0,h.succPressures=0}if("N/A"!==r)for(var y in h)isFinite(h[y])?f[y]=100*V(n[a][r][y],h[y],u):(h[y]=0,f[y]=0),"padjFouls"!==y&&"fouls"!==y&&"turnovers"!==y&&"padjTurnovers"!==y||(f[y]=100-f[y]);else for(var v in h)f[v]=0;return{statsPer90:h,percentiles:f}}function V(e,t,a){isFinite(t)||(t=0);for(var s=0,n=e.length;s<n;s++)if(t<e[s]){for(;s<n&&t===e[s];)s++;return 0===s?0:(t!==e[s-1]&&(s+=(t-e[s-1])/(e[s]-e[s-1])),s/n-a/e.length)}return 1}function Y(e,t,a,s,n,r,l,o){var i,c=this.state.template;i=l?z.comparison:z[c];var p=q.vertical["GK"===c?"GK":"other"],d=q.horizontal["GK"===c?"GK":"other"],u=1===o,m=function(e){var t={};for(var a in e){var s=void 0;s="progDistance"===a||"padjProgDistance"===a||0===e[a]?0:"conversionRate"===a||"aerialSuccRate"===a||"dribbleSuccRate"===a||"passSuccRate"===a||"dribbleTackleRate"===a||"longPassSuccRate"===a||"launchedPassSuccRate"===a?1:"npxgPerShot"===a?3:2,t[a]=parseFloat(Math.round(e[a]*Math.pow(10,s))/Math.pow(10,s)).toFixed(s)}return t}(t),h=function(e,t){var a={};for(var s in e)a[s]=Math.round(e[s]*Math.pow(10,t))/Math.pow(10,t);return a}(a,0),f=[],b=0;for(var g in e[c]){var y=e[c][g];void 0!==t[y]&&(f[b]={playerName:void 0!==s?n:null,y:a[y],p90_label:m[y],percentile_label:Q(h[y]),dataLabels:{align:d[b],verticalAlign:p[b]},color:W.a.Color(i[b]).setOpacity(1!==o?l?.55:.85:0).get(),tooltipColor:0===o?i[b]:"black",borderColor:u?"black":null,borderWidth:u?6:0},b++)}return f}function Q(e){var t=e%10,a=e%100;return 1===t&&11!==a?e+"st":2===t&&12!==a?e+"nd":3===t&&13!==a?e+"rd":e+"th"}function X(e){if(void 0===e)return"";for(var t,a,s=[],n=0;n<e.length;n++){for(a=t=e[n];e[n+1]-e[n]===1;)a=e[n+1],n++;s.push(t===a?t+"":t+"-"+a)}return s.join(", ")}function Z(e){var t=this.state,a=t.codes,s=t.stats,n=t.template,r=t.competitions,l=t.selectedCompetitions,o=e.target.value;if(void 0!==a)for(var i=0;i<a.length;i++){var c=a[i];if(this.state.isOutfieldGK[c]){if("GK"!==n&&"GK"===o){var p=this.state.outfieldGKStats[c];s[c]=p}else if("GK"===n&&"GK"!==o){var d=this.state.standardStats[c];s[c]=d}for(var u in r[c]={},s[c])for(var m in r[c][u]=[],s[c][u])r[c][u].push(m);l=JSON.parse(JSON.stringify(r))}}else if(this.state.isOutfieldGK){if("GK"!==n&&"GK"===o)s=this.state.outfieldGKStats;else if("GK"===n&&"GK"!==o){s=this.state.standardStats}for(var h in r={},s)for(var f in r[h]=[],s[h])r[h].push(f);l=JSON.parse(JSON.stringify(r))}this.setState({stats:s,template:o,competitions:r,selectedCompetitions:l,isAnimated:!0})}function $(e){var t,a,s,n,r=e.target.value.split("_"),l=this.state.selectedCompetitions,o=!1;if(s=r[0],n=r[1],r.length>2){a=l[t=r[2]][s];var i=0;for(var c in l[t])i+=l[t][c].length;o=1===i}else a=l[s];a.includes(n)&&!o?a.splice(a.indexOf(n),1):a.includes(n)||a.push(n),this.setState({selectedCompetitions:l,isAnimated:!0})}function ee(e){var t=e.target.value,a=this.state.pAdjTypes;a[t]=!a[t],this.setState({pAdjTypes:a,isAnimated:!0}),K.set("padjTypes",a,{path:"/"})}function te(e){var t=e.target.value;this.setState({labelType:t,isAnimated:!1}),K.set("labelType",t,{path:"/"})}function ae(){var e="right"===this.state.creditsPosition?"center":"right";this.setState({isAnimated:!1,creditsPosition:e}),K.set("creditsPosition",e,{path:"/"})}function se(){return ne.apply(this,arguments)}function ne(){return(ne=Object(F.a)(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showExportLoaderOverlay:!0,renderForExport:!0},(function(){var e=t.state.name;void 0===e&&(e=Object.values(t.state.names).join("-vs-")),y()("<img/>").attr("src","../exportBackground.png").on("load",(function(){setTimeout((function(){var a=document.getElementById("export");t.firstExport&&(t.firstExport=!1,B.a.toPng(a,{bgcolor:"#fafbfc",width:1200,height:1100,style:{opacity:"1",transform:"scale(1)"}}).then(function(){var e=Object(F.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),alert("An error occurred while exporting. Please refresh the page and try again.")}))),B.a.toPng(a,{bgcolor:"#fafbfc",width:1200,height:1100,style:{opacity:"1",transform:"scale(1)"}}).then(function(){var a=Object(F.a)(D.a.mark((function a(s){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:J()(s,"".concat(e.replace(" ","-"),".png")),setTimeout((function(){t.setState({showExportLoaderOverlay:!1,renderForExport:!1})}),500);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e),alert("An error occurred while exporting. Please refresh the page and try again.")}))}),1e3),y()(t).remove()}))}));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function re(){var e=this.state.showGlossaryOverlay;this.setState({showGlossaryOverlay:!e})}function le(){var e=this.state.showCompareSearchOverlay;this.setState({showCompareSearchOverlay:!e}),this.isMobile||y()("#compare-search-overlay #searchbar-input").focus()}var oe=a(34),ie=a.n(oe),ce=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).constructCompetitionLabels=function(e,t){var a=e?s.props.competitions[t]:s.props.competitions,r=e?s.clubs[t]:s.clubs,l=e?s.props.selectedCompetitions[t]:s.props.selectedCompetitions,o=[],i=0;for(var c in a){var p=[],d=1!==r[c].length;o.push(n.a.createElement("h4",{key:"".concat(c,"_header"),style:{marginBottom:s.isMobile?"20px":"10px",marginTop:0===i?s.isMobile?"15px":"10px":s.isMobile?"20px":"12px"}},c.replace("-","/")," ",!1===d?" | "+r[c][0]:null));for(var u=0;u<a[c].length;u++){var m=a[c][u],h=l[c].includes(m),f=m;1===r[c].length&&(f=f.substring(0,f.indexOf("|")-1)),p.push(n.a.createElement("label",{className:"".concat(h?"selected-label":null," selectable-label"),key:e?"".concat(c,"_").concat(m,"_").concat(t):"".concat(c,"_").concat(m)},n.a.createElement("input",{className:"competition",type:"checkbox",value:e?"".concat(c,"_").concat(m,"_").concat(t):"".concat(c,"_").concat(m),onChange:s.props.changeSelectedCompetitions,checked:h})," ",f))}o.push(n.a.createElement("form",{key:e?"".concat(t,"_").concat(c,"_form"):"".concat(c,"_form"),className:"competitions"},p)),i++}return o},s.isMobile=s.props.isMobile,s.isForComparison=s.props.isForComparison,s.templateOpen="N/A"===s.props.template,s.codes=s.props.codes,s.names=s.props.names,s.clubs=s.props.clubs,s.positions={},s.isMobile?s.positions={FW:"FW",AM:"AM",CM:"CM / DM",FB:"FB",CB:"CB",GK:"GK"}:s.positions={FW:"Forward",AM:"Attacking Midfielder / Winger",CM:"Central / Defensive Midfielder",FB:"Full-back",CB:"Center-back",GK:"Goalkeeper"},s.labelTypes={raw:"Raw Values",percentiles:"Percentile Ranks"},s.pAdjTypes={offensive:"Offensive",defensive:"Defensive"},s.state={},s}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.template,t=this.props.labelType,a=this.props.pAdjTypes,s=this.props.isGK,r=this.props.isOutfieldGK,l=[],o=[];for(var i in this.positions){var c,p,d=!1;c=(d="GK"===i?!s&&!r:s)?"blocked-label":"selectable-label",p="".concat(e===i?"selected-label":null," ").concat(d?null:"selectable-label"),l.push(n.a.createElement("label",{className:c,key:"".concat(i,"_label")},n.a.createElement("input",{type:"radio",name:"template",value:i,checked:e===i,disabled:d,onChange:this.props.changeTemplate})," ",this.positions[i])),o.push(n.a.createElement("label",{className:p,key:"".concat(i,"_label_mobile")},n.a.createElement("input",{type:"radio",name:"template",value:i,checked:e===i,disabled:d,onChange:this.props.changeTemplate})," ",this.positions[i]))}var u=n.a.createElement(ie.a,{open:this.templateOpen,trigger:"Template",className:"filter-headers",transitionTime:200,transitionCloseTime:200},n.a.createElement("form",{id:"templates"},l)),m=n.a.createElement(ie.a,{open:!1,trigger:"Template",className:"filter-headers",transitionTime:200,transitionCloseTime:200},n.a.createElement("form",{id:"templates"},o)),h=[];if(this.isForComparison)for(var f={},b=0;b<this.codes.length;b++){var g=this.codes[b];f[g]=this.constructCompetitionLabels(!0,g),h.push(n.a.createElement(ie.a,{key:"Competitions ".concat(g,")"),open:!this.templateOpen&&!this.isMobile,trigger:"Competitions | ".concat(this.names[this.codes[b]]),className:"filter-headers",transitionTime:200,transitionCloseTime:200},f[g]))}else{var y=this.constructCompetitionLabels(!1);h.push(n.a.createElement(ie.a,{key:"_",open:!this.templateOpen&&!this.isMobile,trigger:"Competitions",className:"filter-headers",transitionTime:200,transitionCloseTime:200},y))}var v=null;if(!this.isForComparison){var E=[];for(var S in this.labelTypes)E.push(n.a.createElement("label",{className:"selectable-label ".concat(t===S?"selected-label":null),key:S},n.a.createElement("input",{type:"radio",name:"labelType",value:S,checked:t===S,onChange:this.props.changeLabelType})," ",this.labelTypes[S]));v=n.a.createElement(ie.a,{open:!1,trigger:"Data Labels",className:"filter-headers",transitionTime:200,transitionCloseTime:200},n.a.createElement("form",{id:"data-labels"},E))}var C=[];for(var k in this.pAdjTypes)C.push(n.a.createElement("label",{className:"selectable-label ".concat(!0===a[k]?"selected-label":null),key:k},n.a.createElement("input",{type:"checkbox",name:"pAdjLabelType",value:k,checked:!0===a[k],onChange:this.props.changePAdjTypes})," ",this.pAdjTypes[k]));var w=n.a.createElement(ie.a,{open:!1,trigger:"Possession Adjustment",className:"filter-headers",transitionTime:200,transitionCloseTime:200},n.a.createElement("form",{id:"templates"},C));return n.a.createElement("div",{className:"filter",id:"chart-filters"},n.a.createElement("div",{className:"filter-inputs chart-filter-inputs",id:"chart-filter-inputs-laptop"},u,h,w,v),n.a.createElement("div",{className:"filter-inputs chart-filter-inputs",id:"chart-filter-inputs-mobile"},m,h,w,v),n.a.createElement("div",{className:"filter-buttons",id:"chart-filter-buttons"},n.a.createElement("div",{className:"filter-button"},n.a.createElement("button",{id:"toggleCreditsButton",type:"button",onClick:this.props.toggleCreditsPosition},"Toggle Credits Position")),n.a.createElement("div",{className:"filter-button"},n.a.createElement("button",{id:"compareButton",type:"button",onClick:this.props.toggleCompareSearchOverlay},"Compare")),n.a.createElement("div",{className:"filter-button"},n.a.createElement("button",{id:"exportButton",type:"button",onClick:this.props.exportChart},"Export Chart"))))}}]),a}(s.Component),pe=a(56),de=a.n(pe),ue=a(107),me=a.n(ue),he=a(108),fe=a.n(he),be=a(109),ge=a.n(be);fe()(de.a),ge()(de.a);var ye=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s,n,r;Object(o.a)(this,a),(s=t.call(this,e)).isMobile=s.props.isMobile,s.isForExport=s.props.isForExport,s.isForComparison=s.props.isForComparison,s.fontSizes=void 0,s.isForExport?s.fontSizes={title:s.isMobile?"4.6vw":"2.3em",subtitle:"2em",noData:"1.76em",xAxisLabels:"1.8em",dataLabels:"1.95em",dataLabelsOutline:"0.13em",tooltipHeader:"0em",tooltip:"0em",legend:"2.3em",credits:"1.5em",yAxisLabels:"0.65em"}:s.isMobile?s.fontSizes={title:"4vw",subtitle:"2.6vw",noData:"2.7vw",xAxisLabels:"2.15vw",dataLabels:"2.3vw",dataLabelsOutline:"0.3vw",tooltipHeader:"2.3vw",tooltip:"2.3vw",legend:"2.8vw",legendTitle:"2vw",credits:"2.3vw",yAxisLabels:"1vw"}:s.fontSizes={title:"1.7em",subtitle:"1.4em",noData:"1.35em",xAxisLabels:"1.15em",dataLabels:"1.15em",dataLabelsOutline:"0.21em",tooltipHeader:"1.05em",tooltip:"0.95em",legend:"1.4em",legendTitle:"1em",credits:"1.2em",yAxisLabels:"0.5em"},s.isMobile&&!s.isForExport?s.categories={FW:["Non-Penalty Goals","Non-Penalty xG","Non-Penalty xG/Shot","Aerials Won","Aerial Win %","Touches in Box","xA","Passes into Box","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures"],AM:["Non-Penalty Goals","Non-Penalty xG","Non-Penalty xG/Shot","xA","OP Shot-Creating Actions","Passes into Box","Yards Progressed","Pass Comp. %","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures"],CM:["xA","OP Shot-Creating Actions","Passes into Final 1/3","Yards Prog-ressed","Pass Comp. %","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures","Inter-ceptions","Successful Tackles","Tackle/ Dribbled Past %"],FB:["xA","Passes into Final 1/3","Yards Progressed","Pass Comp. %","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures","Interceptions","Succ. Tackles","Tackle/ Dribbled Past %","Aerial Win %"],CB:["Passes into Final 1/3","Yards Progressed","Pass Comp. %","Long Pass Comp. %","Succ. Pressures","Interceptions","Successful Tackles","Tackle/ Dribbled Past %","Fouls Committed","Aerials Won","Aerial Win %","Clearances"],GK:["GSAA %","Cross Stopping %","Launched Pass Comp. %"],"N/A":["-","-","-","-","-","-","-","-","-","-","-","-"]}:s.categories={FW:["Non-Penalty Goals","Non-Penalty xG","Non-Penalty xG/Shot","Aerials Won","Aerial Win %","Touches in Box","xA","Passes into Box","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures"],AM:["Non-Penalty Goals","Non-Penalty xG","Non-Penalty xG/Shot","xA","OP Shot-Creating Actions","Passes into Box","Yards Progressed","Pass Completion %","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures"],CM:["xA","OP Shot-Creating Actions","Passes into Final 1/3","Yards Progressed","Pass Completion %","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures","Interceptions","Successful Tackles","Tackle/Dribbled Past %"],FB:["xA","Passes into Final 1/3","Yards Progressed","Pass Completion %","Successful Dribbles","Dribble Success %","Turnovers","Successful Pressures","Interceptions","Successful Tackles","Tackle/Dribbled Past %","Aerial Win %"],CB:["Passes into Final 1/3","Yards Progressed","Pass Completion %","Long Pass Completion %","Successful Pressures","Interceptions","Successful Tackles","Tackle/Dribbled Past %","Fouls Committed","Aerials Won","Aerial Win %","Clearances"],GK:["GSAA %","Cross Stopping %","Launched Pass Completion %"],"N/A":["-","-","-","-","-","-","-","-","-","-","-","-"]},s.statTypes={offensiveVariable:["Touches in Box","xA","Passes into Box","Successful Dribbles","Turnovers","OP Shot-Creating Actions","Passes into Final 1/3","Yards Progressed","Yards Prog-ressed"],defensiveVariable:["Interceptions","Inter-ceptions","Successful Tackles","Succ. Tackles","Fouls Committed","Clearances"],constant:["Non-Penalty Goals","Non-Penalty xG","Successful Pressures","Aerials Won"]},s.competitionDict={"Premier League":"ENG","La Liga":"ESP","Serie A":"ITA",Bundesliga:"GER","Ligue 1":"FRA","Champions League":"UCL","Europa League":"UEL"},s.subtitles={FW:"Percentile Ranks vs Top-5 League <b>Forwards</b>",AM:"Percentile Ranks vs Top-5 League <b>Attacking Midfielders / Wingers</b>",CM:"Percentile Ranks vs Top-5 League <b>Central / Defensive Midfielders</b>",FB:"Percentile Ranks vs Top-5 League <b>Full-backs</b>",CB:"Percentile Ranks vs Top-5 League <b>Center-backs</b>",GK:"Percentile Ranks vs Top-5 League <b>Goalkeepers</b>"},s.isForExport||(n={load:function(){this.credits.element.onclick=function(){window.open("https://fbref.com","_blank")}}}),r=s.isForExport?70:s.isMobile?60:40;var l=void 0;s.isForComparison&&(l=s.isMobile?function(e,t,a){return{x:6,y:document.body.scrollHeight-t-23}}:function(e,t,a){return{x:a.plotX,y:a.plotY-35}});var i=s.isForExport?"":"Data Sources: FBref.com | StatsBomb<br/>";return i+="Last Updated: ".concat(s.props.lastUpdated," UTC"),s.chartOptions={title:{useHTML:!0,text:void 0,style:{fontSize:s.fontSizes.title,fontWeight:"bold"},margin:35},subtitle:{text:void 0,style:{color:"black",fontSize:s.fontSizes.subtitle}},pane:{startAngle:void 0},chart:{backgroundColor:"rgba(0, 0, 0, 0)",style:{fontFamily:"sans-serif"},animation:void 0,polar:!0,type:"column",marginLeft:90,marginRight:90,marginTop:void 0,marginBottom:void 0,events:n,zoomType:"x",panning:!0,panKey:"shift"},xAxis:{categories:void 0,labels:{zIndex:0,distance:r,style:{color:"black",fontSize:s.fontSizes.xAxisLabels},padding:31},gridLineWidth:2,gridLineColor:"#777777",gridZIndex:2},yAxis:{visible:void 0,labels:{enabled:!1},gridZIndex:4,lineWidth:0,endOnTick:!0,showFirstLabel:!1,showLastLabel:!0,min:-15,max:100,tickPositions:[-15,0,25,50,75,100,102]},series:void 0,colors:void 0,plotOptions:{series:{animation:{duration:s.props.isAnimatedInitial?750:0},states:{hover:{enabled:s.props.isAnimatedInitial}},dataLabels:{enabled:void 0,style:{fontWeight:"bold",fontSize:s.fontSizes.dataLabels,textOutline:s.fontSizes.dataLabelsOutline+" #fafbfc"},format:void 0,padding:0,allowOverlap:!0,z:7},point:{events:{mouseOut:function(){s.isForComparison&&s.slice.tooltip.hide()}}}},column:{grouping:!1,shadow:!1}},tooltip:{enabled:s.props.hasTooltip,shared:s.isForComparison,useHTML:!0,outside:s.isMobile,positioner:l,followPointer:!s.isMobile,headerFormat:'<span style="font-size: '.concat(s.fontSizes.tooltipHeader,'; font-weight: bold">{point.key}</span><br/>\u2500\u2500\u2500\u2500\u2500'),pointFormat:"<br>".concat(s.isForComparison?'<span style="color: {point.tooltipColor}; font-weight: bold">{point.playerName}</span><br>':"",'\n                              Raw Value: <span style="color: {point.tooltipColor}; font-weight: bold">{point.p90_label}</span>\n                              <br>Percentile Rank: <span style="color: {point.tooltipColor}; font-weight: bold">{point.percentile_label}</span>'),style:{fontSize:s.fontSizes.tooltip,zIndex:100},borderColor:s.isForComparison?"#b9b9b9":void 0,backgroundColor:"#fafbfc",borderWidth:2},legend:{enabled:s.isForComparison&&!s.isForExport,title:{style:{fontSize:s.fontSizes.legendTitle}},symbolPadding:s.isForExport?15:s.isMobile?20:7,align:"left",verticalAlign:"bottom",layout:"vertical",itemStyle:{color:"black",fontSize:s.fontSizes.legend},itemHoverStyle:{color:"#666666"},y:s.isForExport?5:10,margin:0,padding:0,itemMarginTop:3},credits:{text:i,position:{align:void 0,x:void 0,y:s.isForExport?-10:s.isMobile?-30:-20},style:{lineHeight:s.isMobile||s.isForExport?s.isForExport?"20px":"25px":null,fontSize:s.fontSizes.credits}},lang:{noData:"Select a template and competitions to proceed"},noData:{attr:{zIndex:7},style:{fontWeight:"bold",fontSize:s.fontSizes.noData,color:"#303030"}}},de.a.wrap(de.a.Axis.prototype,"render",(function(e){e.call(this);var t=this.chart;return t.seriesGroup||(t.seriesGroup=t.renderer.g("series-group").attr({zIndex:3}).add()),"xAxis"!==this.coll&&"yAxis"!==this.coll||this.gridGroup.attr({zIndex:this.options.gridZIndex}).add(t.seriesGroup),this})),s.afterChartCreated=s.afterChartCreated.bind(Object(j.a)(s)),s}return Object(i.a)(a,[{key:"afterChartCreated",value:function(e){this.slice=e}},{key:"drawLegendBorders",value:function(){for(var e=this.slice,t=0;t<e.legend.allItems.length;t++)e.legend.allItems[t].legendSymbol.element.setAttribute("stroke-width","3"),e.legend.allItems[t].legendSymbol.element.setAttribute("stroke",0===t?"rgba(231,84,83,0.55)":"#000000")}},{key:"componentDidMount",value:function(){this.drawLegendBorders()}},{key:"componentDidUpdate",value:function(e,t,a){this.drawLegendBorders()}},{key:"selectedCompetitionsString",value:function(e,t,a){var s=[];if(null===a||"N/A"===a)return this.isForComparison?[""]:["-"];for(var n in t)if(0!==t[n].length){for(var r="".concat(n.replace("-","/")," ("),l=[],o=Object.values(e[n]),i={},c={},p=0;p<o.length;p++){var d=o[p],u=!1;t[n].includes(d)&&(u=!0);var m=d.split(" | "),h=m[0],f=m[1];void 0===i[h]?i[h]=[f]:i[h].push(f),u&&(void 0===c[h]?c[h]=[f]:c[h].push(f))}for(var b in c)i[b].length>1?l.push("".concat(this.competitionDict[b]," (").concat(c[b].join(", "),")")):l.push(this.competitionDict[b]);r+="".concat(l.join(", "),") "),s.push(r)}return s}},{key:"render",value:function(){var e,t,a=this.chartOptions,s=this.props.template;if(this.isForComparison)if(e='<span class="chart-title player-1"><a href='.concat(this.props.url[0],' target="_blank" rel="noopener noreferrer">').concat(this.props.names[0],"</a></span>"),e+='<span class="player-2"> vs <span class="chart-title"><a href='.concat(this.props.url[1],' target="_blank" rel="noopener noreferrer">').concat(this.props.names[1],"</a></span></span>"),this.isMobile&&!this.isForExport){var r={player1:this.selectedCompetitionsString(this.props.competitions[0],this.props.selectedCompetitions[0],s),player2:this.selectedCompetitionsString(this.props.competitions[1],this.props.selectedCompetitions[1],s)};e+="<div id='competitions-container' class='centered-around-separator'>";for(var l=0;l<Math.max(r.player1.length,r.player2.length);l++)e+='<div><span class="player-1 competitions">'.concat(void 0===r.player1[l]?"":r.player1[l],'</span> \u2502 <span class="player-2 competitions">').concat(void 0===r.player2[l]?"":r.player2[l],"</span></div>");e+="</div>"}else e+="<br>",e+="<div id='competitions-container'><span class=\"player-1 competitions\">".concat(this.selectedCompetitionsString(this.props.competitions[0],this.props.selectedCompetitions[0],s).join("&nbsp|&nbsp&nbsp"),"</span>"),e+='<span class="player-2 competitions"> - '.concat(this.selectedCompetitionsString(this.props.competitions[1],this.props.selectedCompetitions[1],s).join("&nbsp|&nbsp&nbsp"),"</span></div>");else{e='<span class="chart-title player-1"><a href='.concat(this.props.url,' target="_blank" rel="noopener noreferrer">').concat(this.props.name,"</a>"),this.isForExport||(e+="<a href=".concat(this.props.url,' target="_blank" rel="noopener noreferrer"><i id="link-icon" class="fa fa-external-link"></i></a></span>'));var o=this.selectedCompetitionsString(this.props.competitions,this.props.selectedCompetitions,s);if(this.isMobile&&!this.isForExport){e+="<div id='competitions-container'>";for(var i=0;i<o.length;i++)e+='<span class="player-1 competitions">'.concat(o[i],"</span><br>");e+="</div>"}else e+="<br><div id='competitions-container'><span class=\"player-1 competitions\">".concat(o.join("&nbsp|&nbsp&nbsp"),"</span></div>")}a.title.text=e,null===this.props.template||"N/A"===this.props.template||0===this.props.series.length?(a.xAxis.visible=!1,a.yAxis.visible=!1,t="-<br>-<br>"):(a.xAxis.visible=!0,a.yAxis.visible=!0,this.isForComparison?(t='<span class="player-1">Age: <span class="player-1 age-minutes">'.concat(this.props.ages[0],"</span> \xa0 </span>"),t+='<span class="player-1">Minutes: <span class="player-1 age-minutes">'.concat(this.props.minutes[0].toLocaleString(),"</span></span>"),t+="<b> - </b>",t+='<span class="player-2">Age: <span class="age-minutes">'.concat(this.props.ages[1],"</span> \xa0 </span>"),t+='<span class="player-2">Minutes: <span class="age-minutes">'.concat(this.props.minutes[1].toLocaleString(),"</span></span>"),t+="<br>"):(t='Age: <span class="player-1 age-minutes">'.concat(this.props.age,"</span> \xa0"),t+='Minutes: <span class="player-1 age-minutes">'.concat(this.props.minutes.toLocaleString(),"</span><br>")),t+="".concat(this.subtitles[this.props.template])),a.subtitle.text=t,a.pane.startAngle=-360/this.categories[this.props.template].length/2;var c=a.chart;c.animation=this.props.isAnimated,this.isForExport?(c.marginTop=230,c.marginBottom=130):c.marginBottom="right"!==this.props.creditsPosition||this.props.isMobile?60:30;for(var p=this.props.padjTypes.offensive?" per 100 touches":" per 90",d=this.props.padjTypes.defensive?" per 90 (pAdj)":" per 90",u=JSON.parse(JSON.stringify(this.categories[this.props.template])),m=0;m<u.length;m++){var h=u[m];this.statTypes.offensiveVariable.includes(h)?u[m]+='<span style="font-size: 0.8em">'.concat(p,"</span>"):this.statTypes.defensiveVariable.includes(h)?u[m]+='<span style="font-size: 0.8em">'.concat(d,"</span>"):this.statTypes.constant.includes(h)&&(u[m]+='<span style="font-size: 0.8em"> per 90</span>')}a.xAxis.categories=u,a.series=this.props.series.map((function(e,t){return{name:e[0].playerName,data:e,zIndex:0===t?0:3,pointPadding:0,groupPadding:0,stickyTracking:!1}})),a.colors=["rgba(231,84,83,0.55)","#fafbfc"];var f=a.plotOptions.series.dataLabels;f.enabled="N/A"!==this.props.template&&!this.isForComparison,f.format="raw"===this.props.labelType?"{point.p90_label}":"{point.percentile_label}";var b=a.credits,g=this.props.creditsPosition;b.position.align=this.isForExport?"center":g,b.position.x=this.isForExport||"center"===g?0:-10;var y=this.isForExport?void 0:"result",v=this.isForExport?"export":"chart",E=null;return this.isForExport||(E=n.a.createElement("button",{className:"fas fa-question-circle",id:"glossary-button",onClick:this.props.toggleGlossaryOverlay})),n.a.createElement("div",{className:y,id:v},E,n.a.createElement(me.a,{constructorType:"chart",highcharts:de.a,containerProps:{style:{width:"100%",height:"100%"}},options:a,callback:this.afterChartCreated}))}}]),a}(s.Component),ve=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).toggleGlossaryOverlay=s.props.toggleGlossaryOverlay,s}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"overlay ".concat(this.props.display?"open":"closed"),id:"glossary-overlay"},n.a.createElement("div",{className:"overlay-inner-container",id:"glossary-container"},n.a.createElement("button",{className:"close-overlay far fa-times-circle",onClick:this.toggleGlossaryOverlay}),n.a.createElement("div",{className:"help-section-container"},n.a.createElement("h2",null,"Interpreting the Slices"),n.a.createElement("p",null,"A Football Slice is made up of a number of wedges (12 for outfield players, 3 for goalkeepers), each representing a relevant stat. The length of each wedge corresponds to the selected player's percentile rank for the stat when they are compared to top-5 league players who play in a similar position."),n.a.createElement("p",null,"The percentile rank of a score is the percentage of scores within a dataset that are equal to or lower than the score. This is reversed for stats where a lower value is better, such as 'turnovers'. ",n.a.createElement("b",null,"In short, a bigger bar is always better.")),n.a.createElement("p",null,"The colours help to group similar-ish stats together (as well as improve the charts' visual impact)."),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Red")," is for goal-scoring & shooting stats,"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Yellow")," is for passing, chance creation & ball progression"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Green")," is for dribbling & ball retention"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Blue")," is for defending"),n.a.createElement("li",null,"and ",n.a.createElement("span",{style:{color:"#787ccd",fontWeight:"bold"}},"Purple")," is for goalkeeping stats"))),n.a.createElement("div",{className:"help-section-container",id:"glossary-section-container"},n.a.createElement("h2",null,"Glossary"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Non-Penalty Goal"),"\xa0 A goal that did not stem directly from a penalty kick."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Non-Penalty xG (Expected Goals)"),"\xa0 Expected goals that did not stem directly from penalty kicks.*"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Non-Penalty xG/Shot"),"\xa0 The average expected goal value of shots taken, excluding penalty kicks."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Aerial Win"),"\xa0 Winning the ball in a duel that was challenged in the air."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#f15c80",fontWeight:"bold"}},"Aerial Win %"),"\xa0 The percentage of aerials duels contested that were won."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Touch in Box"),"\xa0 Having possession of the ball in the opposition's penalty area. (Note: Receiving a pass, then dribbling, then sending a pass counts as one touch)"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"xA (Expected Assists)"),"\xa0 Expected goals that resulted from a player's shot assists, including set pieces.*"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"OP (Open Play) Shot-Creating Action"),"\xa0 Excluding set pieces, one of the last two offensive actions that directly led to a shot; such as a pass, dribble or a drawn foul. (Note: A single player can receive credit for multiple actions and the shot-taker can also receive credit)"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Pass into Box"),"\xa0 A completed pass that entered the opposition's penalty area, excluding set pieces."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Pass into Final 1/3"),"\xa0 A completed pass that entered the third of the pitch that is closest to the opposition's goal, excluding set pieces."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Yards Progressed"),"\xa0 Distance, in yards, that the ball was moved towards the oppositions's goal with passes and carries. (Note: Passes and carries away from the oppositions's goal are counted as zero progressive yards)"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Pass Completion %"),"\xa0 The percentage of attempted passes that successfully found a teammate."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Long Pass Completion %"),"\xa0 The percentage of attempted passes of 25 yards or more that successfully found a teammate."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#e4c000",fontWeight:"bold"}},"Launched Pass Completion %"),"\xa0 The percentage of attempted passes of 40 yards or more that successfully found a teammate, including goal kicks."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Successful Dribble"),"\xa0 A successful attempt at taking on a player and making it past them whilst retaining possession."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Dribble Success %"),"\xa0 The percentage of attempted dribbles that were successful."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#87e179",fontWeight:"bold"}},"Turnover"),"\xa0 A miscontrol, or being tackled by an opponent and losing possession of the ball without attempting a dribble."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"pAdj"),"\xa0 Possession Adjusted (using the StatsBomb sigmoid function).**"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Successful Pressure"),"\xa0 A pressing action that led to the team regaining possession within the next 5 seconds."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Interception"),"\xa0 A prevention of an opponent's pass from reaching another opponent by moving into the line of the pass."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Successful Tackle"),"\xa0 A successful dispossession of an opponent (whether the tackler's team won possession of the ball or not)."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Tackle/Dribbled Past %"),"\xa0 The percentage of dribblers faced that were tackled."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Aerial Win"),"\xa0 Winning the ball in a duel that was challenged in the air."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Aerial Win %"),"\xa0 The percentage of aerials duels contested that were won."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#7db9f0",fontWeight:"bold"}},"Clearance"),"\xa0 An action where a player kicked/headed the ball away from their own goal."),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#787ccd",fontWeight:"bold"}},"GSAA (Goals Saved Above Average) %"),"\xa0 (Post-Shot xG \u2212 Goals Conceded (excluding own goals)) \xf7 Shots on Target Faced.***"),n.a.createElement("li",null,n.a.createElement("span",{style:{color:"#787ccd",fontWeight:"bold"}},"Cross Stopping %"),"\xa0 The percentage of attempted crosses into the penalty area that were stopped by the goalkeeper.")),n.a.createElement("div",{id:"glossary-links"},n.a.createElement("span",null,"* ",n.a.createElement("a",{href:"https://fbref.com/en/expected-goals-model-explained/",target:"_blank",rel:"noopener noreferrer"},"Expected goals/assists model explanation")),n.a.createElement("span",null,"** ",n.a.createElement("a",{href:"https://statsbomb.com/2014/06/introducing-possession-adjusted-player-stats/",target:"_blank",rel:"noopener noreferrer"},"Possession adjustment explanation")),n.a.createElement("span",null,"*** ",n.a.createElement("a",{href:"https://statsbomb.com/2018/12/introducing-goalkeeper-radars/",target:"_blank",rel:"noopener noreferrer"},"GSAA % explanation"))))))}}]),a}(s.Component),Ee=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).isMobile=s.props.isMobile,s.toggleCompareSearchOverlay=s.props.toggleCompareSearchOverlay,s.currentPlayerName=s.props.currentPlayerName,s.currentPlayerCode=s.props.currentPlayerCode,s}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"overlay ".concat(this.props.display?"open":"closed"),id:"compare-search-overlay"},n.a.createElement("button",{className:"close-overlay far fa-times-circle",onClick:this.toggleCompareSearchOverlay}),n.a.createElement("span",null,n.a.createElement("h3",null,"Compare ",this.currentPlayerName," to...")),n.a.createElement(w,{isMobile:this.isMobile,page:"compare",currentPlayerCode:this.currentPlayerCode}))}}]),a}(s.Component),Se=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"overlay ".concat(this.props.display?"open":"closed"),id:"export-loader-overlay"},n.a.createElement("div",{className:"loader"},"Loading..."))}}]),a}(s.Component),Ce=new N.a,ke=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.getStats=function(){var e=s.state.code;fetch("/api/stats",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,percentilesTimestamp:s.state.percentileArrays.lastUpdated})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch. This is likely due to a malformed URL. Please try searching for the player again.")})).then((function(e){return s.processStats(e)})).catch((function(t){s._isMounted&&(e.match("^Players_[0-9]+_Show_")?s.setState({redirect:!0,isLoading:!1,code:e.split("_")[1]}):s.setState({error:t,isLoading:!1}))}))},s.processStats=function(e){void 0!==e.newPercentileArrays&&s.props.updatePercentileArrays(e.newPercentileArrays);var t=e.data,a="N/A";for(var n in t.positions){var r=t.positions[n][0];"N/A"!==r&&(a=r)}var l=Object.keys(t.stats),o={},i={};for(var c in t.stats)for(var p in o[c]=[],i[c]=[],t.stats[c])o[c].push(p),c!==l[l.length-1]&&c!==l[l.length-2]||i[c].push(p);s._isMounted&&(s.setState({isLoading:!1,statsByPosition:e.statsByPosition,name:t.name,url:"https://www.fbref.com"+t.fbrefURL,age:t.age,clubs:t.clubs,percentileEntries:t.percentileEntries,stats:t.stats,isGK:"GK"===a,isOutfieldGK:null!=t.outfieldGKStats,outfieldGKStats:t.outfieldGKStats,standardStats:t.stats,lastUpdated:L()(t.lastUpdated,"dd/mm/yyyy, h:MM TT",!0),template:a,competitions:JSON.parse(JSON.stringify(o)),selectedCompetitions:JSON.parse(JSON.stringify(i))}),document.title="".concat(t.name," | Football Slices"),s.props.recordPageViewGA(window.location.pathname))},s.filterStats=U.bind(Object(j.a)(s)),s.calculateStats=H.bind(Object(j.a)(s)),s.constructChartInput=Y.bind(Object(j.a)(s)),s.ageRangesString=X.bind(Object(j.a)(s)),s.changeTemplate=Z.bind(Object(j.a)(s)),s.changePAdjTypes=ee.bind(Object(j.a)(s)),s.changeSelectedCompetitions=$.bind(Object(j.a)(s)),s.changeLabelType=te.bind(Object(j.a)(s)),s.toggleCreditsPosition=ae.bind(Object(j.a)(s)),s.exportChart=se.bind(Object(j.a)(s)),s.toggleGlossaryOverlay=re.bind(Object(j.a)(s)),s.toggleCompareSearchOverlay=le.bind(Object(j.a)(s)),s.isMobile=s.props.isMobile,s.isSafari=s.props.isSafari;var n=Ce.get("pAdjTypes"),r=Ce.get("labelType"),l=Ce.get("creditsPosition");return s.state={isLoading:!0,error:null,redirect:!1,showGlossaryOverlay:!1,showCompareSearchOverlay:!1,showExportLoaderOverlay:!1,renderForExport:!1,percentileArrays:s.props.percentileArrays,statsByPosition:{},code:s.props.match.params.code,name:"",url:"",age:0,clubs:{},percentileEntries:{},stats:{},isGK:!1,isOutfieldGK:!1,outfieldGKStats:null,standardStats:null,lastUpdated:null,template:null,competitions:{},selectedCompetitions:{},pAdjTypes:void 0===n?{offensive:!1,defensive:!1}:n,labelType:void 0===r?"raw":r,creditsPosition:void 0===l?"right":l,isAnimated:!0},s.getStats(),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var a=this,s=e.match.params.code;this.setState({redirect:!1,isLoading:!0,code:s},(function(){a.getStats()}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error,s=e.redirect,r=e.showGlossaryOverlay,l=e.showCompareSearchOverlay,o=e.showExportLoaderOverlay,i=e.renderForExport,c=e.statsByPosition,p=e.code,u=e.url,m=e.name,h=e.age,f=e.clubs,b=e.stats,g=e.isGK,y=e.isOutfieldGK,v=e.lastUpdated,E=e.competitions,S=e.selectedCompetitions,C=e.template,k=e.pAdjTypes,P=e.labelType,x=e.creditsPosition,A=e.isAnimated;if(t)return n.a.createElement(O,null);if(s)return n.a.createElement(d.a,{to:"/stats/".concat(p)});if(null!==a)return n.a.createElement("div",{id:"main2"},n.a.createElement(w,{isMobile:this.isMobile,page:"stats",query:this.state.query}),n.a.createElement("div",{className:"screen",id:"error-screen"},n.a.createElement("p",null,a.message)));var T={},j=[];if(null!==C&&"N/A"!==C&&(T=this.filterStats(b),0!==Object.keys(T).length)){var N=this.calculateStats(T),M=this.constructChartInput(c,N.statsPer90,N.percentiles);j.push(M)}var L=null;return i&&(L=n.a.createElement(ye,{isMobile:this.isMobile,isForComparison:!1,isForExport:!0,isAnimated:!1,isAnimatedInitial:!1,hasTooltip:!1,creditsPosition:x,url:null,lastUpdated:v,template:C,labelType:P,name:m,competitions:E,selectedCompetitions:S,age:h,minutes:T.minutes,padjTypes:k,series:j})),n.a.createElement("div",{id:"main2"},n.a.createElement(ve,{display:r,toggleGlossaryOverlay:this.toggleGlossaryOverlay}),n.a.createElement(Ee,{isMobile:this.isMobile,display:l,currentPlayerCode:p,currentPlayerName:m,toggleCompareSearchOverlay:this.toggleCompareSearchOverlay}),n.a.createElement(Se,{display:o}),n.a.createElement(w,{isMobile:this.isMobile,page:"stats"}),n.a.createElement("div",{className:"screen2",id:"stats-screen"},n.a.createElement(ce,{isMobile:this.isMobile,isForComparison:!1,isGK:g,isOutfieldGK:y,template:C,competitions:E,clubs:f,selectedCompetitions:S,pAdjTypes:k,labelType:P,changeTemplate:this.changeTemplate,changeSelectedCompetitions:this.changeSelectedCompetitions,changePAdjTypes:this.changePAdjTypes,changeLabelType:this.changeLabelType,toggleCreditsPosition:this.toggleCreditsPosition,exportChart:this.exportChart,toggleCompareSearchOverlay:this.toggleCompareSearchOverlay}),n.a.createElement(ye,{isMobile:this.isMobile,isForExport:!1,isAnimated:A,isAnimatedInitial:!0,hasTooltip:!0,creditsPosition:x,url:u,lastUpdated:v,template:C,labelType:P,name:m,competitions:E,selectedCompetitions:S,age:h,minutes:T.minutes,padjTypes:k,series:j,toggleGlossaryOverlay:this.toggleGlossaryOverlay})),L)}}]),a}(s.Component),we=a(81),Oe=new N.a,Pe=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.getStats=function(){var e=s.state.codes;fetch("/api/comparisonStats",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({codes:e,percentilesTimestamp:s.state.percentileArrays.lastUpdated})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch. This is likely due to a malformed URL. Please try searching for the player again.")})).then((function(e){return s.processStats(e)})).catch((function(e){console.log(e),s._isMounted&&s.setState({error:e,isLoading:!1})}))},s.processStats=function(e){var t=s.state.codes;void 0!==e.newPercentileArrays&&s.props.updatePercentileArrays(e.newPercentileArrays);var a=e.data,n="N/A";for(var r in a[t[0]].positions){var l=a[t[0]].positions[r][0];"N/A"!==l&&(n=l)}var o={},i={},c={},p={},d={},u={},m={},h={},f={},b={},g={};for(var y in a){o[y]=a[y].name,i[y]="https://www.fbref.com"+a[y].fbrefURL,c[y]=a[y].age,p[y]=a[y].clubs,d[y]=a[y].percentileEntries;var v=null!==a[y].outfieldGKStats;u[y]="GK"===n&&v?a[y].outfieldGKStats:a[y].stats,m[y]=v,h[y]=a[y].outfieldGKStats,f[y]=a[y].stats;var E=Object.keys(u[y]);for(var S in b[y]={},g[y]={},u[y])for(var C in b[y][S]=[],g[y][S]=[],u[y][S])b[y][S].push(C),S!==E[E.length-1]&&S!==E[E.length-2]||g[y][S].push(C)}s._isMounted&&(s.setState({isLoading:!1,names:JSON.parse(JSON.stringify(o)),urls:JSON.parse(JSON.stringify(i)),ages:JSON.parse(JSON.stringify(c)),clubs:JSON.parse(JSON.stringify(p)),percentileEntries:JSON.parse(JSON.stringify(d)),statsByPosition:JSON.parse(JSON.stringify(e.statsByPosition)),stats:JSON.parse(JSON.stringify(u)),isGK:"GK"===n,isOutfieldGK:JSON.parse(JSON.stringify(m)),outfieldGKStats:JSON.parse(JSON.stringify(h)),standardStats:JSON.parse(JSON.stringify(f)),lastUpdated:we(a[t[0]].lastUpdated,"dd/mm/yyyy, h:MM TT",!0),template:n,competitions:JSON.parse(JSON.stringify(b)),selectedCompetitions:JSON.parse(JSON.stringify(g))}),document.title="".concat(o[t[0]]," vs ").concat(o[t[1]]," | Football Slices"),s.props.recordPageViewGA(window.location.pathname))},s.filterStats=U.bind(Object(j.a)(s)),s.calculateStats=H.bind(Object(j.a)(s)),s.constructChartInput=Y.bind(Object(j.a)(s)),s.ageRangesString=X.bind(Object(j.a)(s)),s.changeTemplate=Z.bind(Object(j.a)(s)),s.changeSelectedCompetitions=$.bind(Object(j.a)(s)),s.changePAdjTypes=ee.bind(Object(j.a)(s)),s.changeLabelType=te.bind(Object(j.a)(s)),s.toggleCreditsPosition=ae.bind(Object(j.a)(s)),s.exportChart=se.bind(Object(j.a)(s)),s.toggleGlossaryOverlay=re.bind(Object(j.a)(s)),s.toggleCompareSearchOverlay=le.bind(Object(j.a)(s)),s.isMobile=s.props.isMobile,s.isSafari=s.props.isSafari;var n=Oe.get("pAdjTypes"),r=Oe.get("labelType"),l=Oe.get("creditsPosition"),i=s.props.match.params.codes.split("_");return i[0]===i[1]&&(i[0]=i[0]+"|1",i[1]=i[1]+"|2"),s.state={isLoading:!0,error:null,showGlossaryOverlay:!1,showCompareSearchOverlay:!1,showExportLoaderOverlay:!1,renderForExport:!1,percentileArrays:s.props.percentileArrays,statsByPosition:{},codes:i,names:{},urls:{},ages:{},clubs:{},percentileEntries:{},stats:{},isGK:null,isOutfieldGK:{},outfieldGKStats:{},standardStats:{},lastUpdated:null,template:null,competitions:{},selectedCompetitions:{},pAdjTypes:void 0===n?{offensive:!1,defensive:!1}:n,labelType:void 0===r?"raw":r,creditsPosition:void 0===l?"right":l,isAnimated:!0},s.getStats(),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var a=this,s=e.match.params.codes.split("_");s[0]===s[1]&&(s[0]=s[0]+"|1",s[1]=s[1]+"|2"),this.setState({isLoading:!0,showCompareSearchOverlay:!1,codes:s},(function(){a.getStats()}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error,s=e.showGlossaryOverlay,r=e.showCompareSearchOverlay,l=e.showExportLoaderOverlay,o=e.renderForExport,i=e.statsByPosition,c=e.codes,p=e.urls,d=e.names,u=e.ages,m=e.clubs,h=e.stats,f=e.isGK,b=e.isOutfieldGK,g=e.lastUpdated,y=e.competitions,v=e.selectedCompetitions,E=e.template,S=e.pAdjTypes,C=e.labelType,k=e.creditsPosition,P=e.isAnimated;if(t)return n.a.createElement(O,null);if(null!==a)return n.a.createElement("div",{id:"main2"},n.a.createElement(w,{isMobile:this.isMobile,page:"stats",query:this.state.query}),n.a.createElement("div",{className:"screen",id:"error-screen"},n.a.createElement("p",null,a.message)));for(var x={},A=[],T=0;T<c.length;T++){var j=c[T];if(x[j]=this.filterStats(h[j],j),null!==E&&"N/A"!==E){var N=this.calculateStats(x[j],j),M=this.constructChartInput(i,N.statsPer90,N.percentiles,j,d[c[T]],x[j].minutes,!0,T);A.push(M)}}var L=c[0],R=c[1],D=null;return o&&(D=n.a.createElement(ye,{isMobile:this.isMobile,isForExport:!0,isForComparison:!0,isAnimated:!1,isAnimatedInitial:!1,hasTooltip:!1,creditsPosition:k,url:[null,null],lastUpdated:g,template:E,labelType:C,names:[d[L],d[R]],competitions:[y[L],y[R]],selectedCompetitions:[v[L],v[R]],ages:[u[L],u[R]],minutes:[x[L].minutes,x[R].minutes],padjTypes:S,series:A})),n.a.createElement("div",{id:"main2"},n.a.createElement(ve,{display:s,toggleGlossaryOverlay:this.toggleGlossaryOverlay}),n.a.createElement(Ee,{isMobile:this.isMobile,display:r,currentPlayerCode:c[0],currentPlayerName:d[c[0]],toggleCompareSearchOverlay:this.toggleCompareSearchOverlay}),n.a.createElement(Se,{display:l}),n.a.createElement(w,{isMobile:this.isMobile,page:"stats"}),n.a.createElement("div",{className:"screen2",id:"compare-screen"},n.a.createElement(ce,{isMobile:this.isMobile,isForComparison:!0,isGK:f,isOutfieldGK:b[c[0]],codes:c,names:d,template:E,competitions:y,clubs:m,selectedCompetitions:v,pAdjTypes:S,labelType:C,changeTemplate:this.changeTemplate,changeSelectedCompetitions:this.changeSelectedCompetitions,changePAdjTypes:this.changePAdjTypes,changeLabelType:this.changeLabelType,toggleCreditsPosition:this.toggleCreditsPosition,exportChart:this.exportChart,toggleCompareSearchOverlay:this.toggleCompareSearchOverlay}),n.a.createElement(ye,{isMobile:this.isMobile,isForExport:!1,isForComparison:!0,isAnimated:P,isAnimatedInitial:!0,hasTooltip:!0,creditsPosition:k,url:[p[L],p[R]],lastUpdated:g,template:E,labelType:C,names:[d[L],d[R]],competitions:[y[L],y[R]],selectedCompetitions:[v[L],v[R]],ages:[u[L],u[R]],minutes:[x[L].minutes,x[R].minutes],padjTypes:S,series:A,toggleGlossaryOverlay:this.toggleGlossaryOverlay})),D)}}]),a}(s.Component),xe=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("h1",null,"404 - Page not found")}}]),a}(s.Component),Ae=a(133),Te=a(60),je=a(86),Ne=a.n(je),Me=a(110),Le=a.n(Me),Re=a(217),De=a(215),Fe=a(87),Ge=a.n(Fe),We=Re.a.Option,_e=new N.a,Be=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e))._isMounted=!1,s._firstSearchMade=!1,s._referenceData={},s._parametersOriginalState={},s._baseColumns=[{name:"Name",selector:"name",style:{fontSize:"1.15em",fontWeight:"bold",color:"#e75453"},sortable:!0},{name:"Current Age",selector:"age",sortable:!0},{name:"Nationality",selector:"nationality",sortable:!0},{name:"Club(s)",selector:"clubs",sortable:!0},{name:"Position(s)",selector:"positions",sortable:!0}],s._customStyles={headCells:{style:{fontSize:"1.1em",fontWeight:"bold",color:"#000000"}},cells:{style:{}}},s.getReferenceData=function(){fetch("/api/referenceData",{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch reference data. Please refresh the page and try again.")})).then((function(e){return s.processReferenceData(e)})).catch((function(e){s._isMounted&&s.setState({error:e,isLoading:!1})}))},s.processReferenceData=function(e){console.log(e),s._referenceData=e;var t=s.state.filterOptions,a=s.state.parameters,r=s.props.query.parameters,l=e.statsReferenceData.age;t.ages={min:l.ranges.min,max:l.ranges.max},a.ages=JSON.parse(JSON.stringify(t.ages)),s._parametersOriginalState=JSON.parse(JSON.stringify(s.state.parameters)),void 0!==r&&(a=JSON.parse(JSON.stringify(r)));for(var o=[],i=0;i<e.countries.length;i++){var c=e.countries[i];o.push(n.a.createElement(We,{key:c.code.toLowerCase(),value:c.code.toLowerCase()},c.name))}t.nationalities=o;for(var p=[],d=0;d<e.clubs.length;d++){var u=e.clubs[d];p.push(n.a.createElement(We,{key:u.name,value:u.name},u.name))}t.clubs=p;var m=[];for(var h in e.statsReferenceData){var f=e.statsReferenceData[h];f.stat=h,m.push(f)}m.sort((function(e,t){return e.displayOrder-t.displayOrder}));for(var b=[],g=0;g<m.length;g++){var y=m[g],v=y.stat;"age"!==v&&b.push(n.a.createElement(We,{key:v,value:v},"".concat(y.label," ").concat(y.suffix)))}if(t.rawStats=b,s._isMounted){s.setState({parameters:a,filterOptions:t}),1===a.positions.length&&s.buildPercentileRankSelectList();var E=void 0!==r&&!Le()(r,s._parametersOriginalState);s.setState({error:null,isLoading:E}),document.title="Advanced Search | Football Slices",s.props.recordPageViewGA(window.location.pathname),E&&s.getSearchResults(!0)}},s.getSearchResults=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.setState({showSearchLoaderOverlay:!0!==e});var t=JSON.parse(JSON.stringify(s.state.parameters));if(1!==t.positions.length)for(var a in t.percentileRanks)delete t.percentileRanks[a];var n=t.season;for(var r in t.rawStats){var l=s._referenceData.statsReferenceData[r].ranges[n];t.rawStats[r].min===l.min&&(t.rawStats[r].min=null),t.rawStats[r].max===l.max&&(t.rawStats[r].max=null)}console.log(t),fetch("/api/advancedSearch",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:t})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch search results. Please refresh the page and try again.")})).then((function(t){s._firstSearchMade=!0,s.processSearchResults(t,e)})).catch((function(e){s._isMounted&&s.setState({error:e})}))},s.processSearchResults=function(e){var t,a=s.state.parameters,n=s.state.displayType;if("table"===n){t=JSON.parse(JSON.stringify(s._baseColumns));var r=function(e){var a=s._referenceData.statsReferenceData[e];t.push({name:"".concat(a.label," ").concat(a.suffix),selector:"raw_".concat(e),sortable:!0,format:function(t){return parseFloat(t["raw_".concat(e)])}})};for(var l in a.rawStats)r(l);var o=function(e){var a=s._referenceData.statsReferenceData[e];t.push({name:"".concat(a.label," ").concat(a.suffix," (Percentile Rank)"),selector:"percentile_".concat(e),sortable:!0,sortFunction:function(t,a){return parseFloat(t["percentile_".concat(e)])-parseFloat(a["percentile_".concat(e)])},format:function(t){return s.ordinalSuffix(t["percentile_".concat(e)])+" percentile"}})};for(var i in a.percentileRanks)o(i)}s._isMounted&&s.setState({searchResults:[],searchResultsDisplay:null},(function(){s.setState({error:null,isLoading:!1,showSearchLoaderOverlay:!1,tableColumns:t,searchResults:e},(function(){s.buildSearchResultsDisplay()}))}))},s.handleTableButtonClick=function(){s.setState({displayType:"table"},(function(){s.processSearchResults(s.state.searchResults)})),_e.set("displayType","table",{path:"/"})},s.handleCardsButtonClick=function(){s.setState({displayType:"cards"},(function(){s.processSearchResults(s.state.searchResults)})),_e.set("displayType","cards",{path:"/"})},s.buildSearchResultsDisplay=function(){var e,t=s.state.parameters.season,a=s.state.searchResults,r=s.state.displayType,l=s.state.tableColumns;if("cards"===r){for(var o=[],i=0;i<a.length;i++){var c=a[i];o.push(n.a.createElement(S,{isMobile:s.isMobile,page:"search",code:c.code,name:c.name,age:c.age,clubs:c.clubs,nationality:c.nationality,countryCode:c.countryCode,positions:c.positions,key:i}))}e=n.a.createElement("div",{id:"player-search-results"},o)}else if("table"===r){var p=[];t=null===t?"20-21":t;for(var d=0;d<a.length;d++){var u=a[d],m={};for(var h in u){var f;if("object"===typeof u[h])m[h]=null===(f=u[h][t])||void 0===f?void 0:f.join(", ");else m[h]=u[h]}p.push(m)}p.length>0&&(e=n.a.createElement("div",{id:"player-search-results-table"},n.a.createElement(Ge.a,{title:"",columns:l,data:p,theme:"basic",customStyles:s._customStyles,striped:!1,highlightOnHover:!0,pointerOnHover:!0,onRowClicked:function(e){return s.props.history.push("/stats/".concat(e.code))},pagination:!0})))}s.setState({searchResultsDisplay:e})},s.handleSingleSelectChange=function(e,t){var a=s.state.parameters;if(a[e]=t,"season"===e){var n=a.season;for(var r in a.rawStats){var l=s._referenceData.statsReferenceData[r];a.rawStats[r].max>l.ranges[n].max&&(a.rawStats[r].max=l.ranges[n].max),a.rawStats[r].min<l.ranges[n].min&&(a.rawStats[r].min=l.ranges[n].min)}}s.setState({parameters:a}),s.props.setQuery({parameters:a},"replaceIn"),console.log(a)},s.handleRangeSliderChange=function(e,t){var a=s.state.parameters;Ne()(a,"".concat(e,".min"),t[0]),Ne()(a,"".concat(e,".max"),t[1]),s.setState({parameters:a}),s.props.setQuery({parameters:a},"replaceIn"),console.log(a)},s.handleSelectListAdd=function(e,t){var a=s.state.parameters;a["".concat(e)].push(t),s.setState({parameters:a}),s.props.setQuery({parameters:a},"replaceIn"),console.log(a),"positions"===e&&s.buildPercentileRankSelectList()},s.handleSelectListRemove=function(e,t){var a=s.state.parameters,n=a["".concat(e)].indexOf(t);n>-1&&a["".concat(e)].splice(n,1),s.setState({parameters:a}),s.props.setQuery({parameters:a},"replaceIn"),console.log(s.state.parameters),"positions"===e&&s.buildPercentileRankSelectList()},s.buildPercentileRankSelectList=function(){var e=s.state.filterOptions,t=s.state.parameters,a=[];if(1!==t.positions.length)e.percentileRanks=a,s.setState({filterOptions:e});else{var r=t.positions[0];for(var l in s._referenceData.statsReferenceData){var o=s._referenceData.statsReferenceData[l];s._referenceData.statsByPosition[r].includes(l)?a.push(n.a.createElement(We,{key:l,value:l},"".concat(o.label," ").concat(o.suffix))):t.percentileRanks.hasOwnProperty(l)&&delete t.percentileRanks[l]}e.percentileRanks=a,s.setState({filterOptions:e,parameters:t}),s.props.setQuery({parameters:t},"replaceIn")}console.log(t)},s.handleSelectListClear=function(e){var t=s.state.parameters;t[e]=[],s.setState({parameters:t}),s.props.setQuery({parameters:t},"replaceIn"),console.log(t)},s.handleLookupStatSelectListAdd=function(e,t){var a=s.state.parameters,n=a.season,r=s._referenceData.statsReferenceData[t],l="percentileRanks"===e?0:r.ranges[n].min,o="percentileRanks"===e?100:r.ranges[n].max;a["".concat(e)][t]={min:l,max:o},s.setState({parameters:a}),s.props.setQuery({parameters:a},"replaceIn"),console.log(a)},s.handleLookupStatSelectListRemove=function(e,t){var a=s.state.parameters;delete a[e][t],s.setState({parameters:a}),s.props.setQuery({parameters:a},"replaceIn"),console.log(a)},s.handleLookupStatsSelectListClear=function(e){var t=s.state.parameters;t[e]={},s.setState({parameters:t}),s.props.setQuery({parameters:t},"replaceIn"),console.log(t)},s.resetParameters=function(){var e=JSON.parse(JSON.stringify(s._parametersOriginalState));s.setState({parameters:e}),s.props.setQuery({parameters:e},"replaceIn"),console.log(e)},s.ordinalSuffix=Q.bind(Object(j.a)(s)),s.isMobile=s.props.isMobile;var r={"18-19":"18/19","19-20":"19/20","20-21":"20/21"},l=[];for(var i in r)l.push(n.a.createElement(We,{key:i,value:i},r[i]));var c={FW:"Forward",AM:"Attacking Midfielder / Winger",CM:"Central / Defensive Midfielder",FB:"Full-back",CB:"Center-back",GK:"Goalkeeper"},p=[];for(var d in c)p.push(n.a.createElement(We,{key:d,value:d},c[d]));var u=_e.get("displayType");return s.state={isLoading:!0,showSearchLoaderOverlay:!1,error:null,filterOptions:{seasons:l,ages:{},nationalities:[],clubs:[],positions:p,rawStats:[],percentileRanks:[]},parameters:{season:null,ages:{},nationalities:[],clubs:[],positions:[],rawStats:{},percentileRanks:{}},displayType:u||"cards",tableColumns:JSON.parse(JSON.stringify(s._baseColumns)),searchResults:[],searchResultsDisplay:null},Object(Fe.createTheme)("basic",{background:{default:"#fafbfc"},striped:{default:"#f3f4f5"}}),s.getReferenceData(),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,s=t.showSearchLoaderOverlay,r=t.error,l=t.filterOptions,o=t.parameters,i=t.searchResults,c=t.displayType,p=t.searchResultsDisplay;if(a)return n.a.createElement(O,null);if(null!==r)return n.a.createElement("div",{id:"main"},n.a.createElement(w,{isMobile:this.isMobile,page:"search",query:this.state.query}),n.a.createElement("div",{className:"screen",id:"error-screen"},n.a.createElement("p",null,r.message)));var d=o.season,u=[],m=function(t){var a=e._referenceData.statsReferenceData[t];u.push(n.a.createElement("h4",{key:a.key},"".concat(a.label," ").concat(a.suffix))),u.push(n.a.createElement(De.a,{key:"rawStatSlider-".concat(t),range:!0,value:[o.rawStats[t].min,o.rawStats[t].max],min:a.ranges[d].min,max:a.ranges[d].max+1e-6,step:a.step,onChange:function(a){return e.handleRangeSliderChange("rawStats.".concat(t),a)}}))};for(var h in o.rawStats)m(h);var f=[],b=function(t){var a=e._referenceData.statsReferenceData[t];f.push(n.a.createElement("h4",{key:a.key},"".concat(a.label," ").concat(a.suffix))),f.push(n.a.createElement(De.a,{key:"percentileRanksSlider-".concat(t),disabled:1!==o.positions.length,range:!0,value:[o.percentileRanks[t].min,o.percentileRanks[t].max],min:0,max:null===d?0:100,step:5,onChange:function(a){return e.handleRangeSliderChange("percentileRanks.".concat(t),a)}}))};for(var g in o.percentileRanks)b(g);return console.log(i),n.a.createElement("div",{id:"main"},n.a.createElement(Se,{display:s}),n.a.createElement(w,{isMobile:this.isMobile,page:"search",query:this.state.query}),n.a.createElement("div",{className:"screen",id:"search-screen"},n.a.createElement("div",{className:"filter",id:"advanced-search-filters"},n.a.createElement("div",{className:"filter-inputs search-filter-inputs",id:"advanced-search-filter-inputs"},n.a.createElement("h4",null,"Results Display"),n.a.createElement("div",{id:"display-type-buttons-container"},n.a.createElement("button",{className:"fas fa-table display-type-button ".concat("table"===c?"selected":null),onClick:this.handleTableButtonClick}),"\u2502",n.a.createElement("button",{className:"fas fa-th display-type-button ".concat("cards"===c?"selected":null),onClick:this.handleCardsButtonClick})),n.a.createElement("h4",null,"Season"),n.a.createElement(Re.a,{value:o.season,placeholder:"Select a season",style:{width:"100%"},onChange:function(t){return e.handleSingleSelectChange("season",t)}},l.seasons),n.a.createElement(ie.a,{open:!0,trigger:"Metadata",className:"filter-headers",transitionTime:200,transitionCloseTime:200},n.a.createElement("h4",null,"Current Age"),n.a.createElement(De.a,{value:[o.ages.min,o.ages.max],range:!0,defaultValue:[l.ages.min,l.ages.max],min:l.ages.min,max:l.ages.max,onChange:function(t){return e.handleRangeSliderChange("ages",t)}}),n.a.createElement("h4",null,"Nationalities"),n.a.createElement(Re.a,{value:o.nationalities.map((function(e){return e})),placeholder:"Select nationalities",style:{width:"100%"},mode:"multiple",allowClear:!0,onSelect:function(t){return e.handleSelectListAdd("nationalities",t)},onDeselect:function(t){return e.handleSelectListRemove("nationalities",t)},onClear:function(){return e.handleSelectListClear("nationalities")},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.nationalities),n.a.createElement("h4",null,"Clubs"),n.a.createElement(Re.a,{value:o.clubs.map((function(e){return e})),placeholder:"Select clubs",style:{width:"100%"},disabled:null===o.season,mode:"multiple",allowClear:!0,onSelect:function(t){return e.handleSelectListAdd("clubs",t)},onDeselect:function(t){return e.handleSelectListRemove("clubs",t)},onClear:function(){return e.handleSelectListClear("clubs")},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.clubs),n.a.createElement("h4",null,"Positions"),n.a.createElement(Re.a,{value:o.positions.map((function(e){return e})),placeholder:"Select positions",style:{width:"100%"},disabled:null===o.season,mode:"multiple",allowClear:!0,onSelect:function(t){return e.handleSelectListAdd("positions",t)},onDeselect:function(t){return e.handleSelectListRemove("positions",t)},onClear:function(){return e.handleSelectListClear("positions")},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.positions)),n.a.createElement(ie.a,{open:!0,trigger:"Raw Stat Filters",className:"filter-headers",transitionTime:200,transitionCloseTime:200},n.a.createElement(Re.a,{value:Object.keys(o.rawStats),placeholder:"Select stats to add range filters",style:{width:"100%"},disabled:null===o.season,mode:"multiple",allowClear:!0,onSelect:function(t){return e.handleLookupStatSelectListAdd("rawStats",t)},onDeselect:function(t){return e.handleLookupStatSelectListRemove("rawStats",t)},onClear:function(){return e.handleLookupStatsSelectListClear("rawStats")},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.rawStats),u),n.a.createElement(ie.a,{open:!0,trigger:"Percentile Rank Filters",className:"filter-headers",transitionTime:200,transitionCloseTime:200},n.a.createElement(Re.a,{value:Object.keys(o.percentileRanks),placeholder:"Select stats to add range filters",style:{width:"100%"},disabled:null===o.season||1!==o.positions.length,mode:"multiple",allowClear:!0,onSelect:function(t){return e.handleLookupStatSelectListAdd("percentileRanks",t)},onDeselect:function(t){return e.handleLookupStatSelectListRemove("percentileRanks",t)},onClear:function(){return e.handleLookupStatsSelectListClear("percentileRanks")},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.percentileRanks),f)),n.a.createElement("div",{className:"filter-buttons",id:"advanced-search-filter-buttons"},n.a.createElement("div",{className:"filter-button"},n.a.createElement("button",{id:"reset-filters-button",type:"button",onClick:this.resetParameters},"Reset All Filters")),n.a.createElement("div",{className:"filter-button"},n.a.createElement("button",{id:"search-button",type:"button",onClick:this.getSearchResults},"Search")))),n.a.createElement("div",{className:"result",id:"search-results"},0===i.length&&this._firstSearchMade?n.a.createElement("p",null,"No results found"):null,p)))}}]),a}(s.Component),Ie=Object(Te.c)({parameters:Te.a},Object(Ae.a)(Be));a(212),h.isMobileOnly&&a.e(3).then(a.t.bind(null,218,7)).then((function(){})),m.a.initialize("UA-179497563-1"),Object(u.a)().listen((function(e,t){console.log(e),console.log(e.location),"POP"===e.action&&"/advancedSearch"===e.location.pathname&&window.location.reload(!1)}));var Je=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e)).getPercentileArrays=function(){fetch("/api/percentiles",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({percentilesTimestamp:s.state.percentileArrays.lastUpdated})}).then((function(e){return e.json()})).then((function(e){null===e?s.setState({isLoading:!1}):(localStorage.setItem("percentileArrays",JSON.stringify(e)),s.setState({percentileArrays:e,isLoading:!1}))})).catch()},s.recordPageViewGA=function(e){m.a.pageview(e)},s.updatePercentileArrays=function(e){localStorage.setItem("percentileArrays",JSON.stringify(e)),s.setState({percentileArrays:e})};var n=JSON.parse(localStorage.getItem("percentileArrays"));return null===n&&(n={lastUpdated:null}),s.state={isLoading:!0,percentileArrays:n},s.getPercentileArrays(),s}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.state.isLoading?n.a.createElement("div",{id:"main"},n.a.createElement("div",{className:"screen",id:"loading-screen"},n.a.createElement("p",null,"Connecting..."))):n.a.createElement(d.d,null,n.a.createElement(d.b,{exact:!0,path:"/",render:function(t){return n.a.createElement(A,Object.assign({},t,{isMobile:h.isMobileOnly,recordPageViewGA:e.recordPageViewGA}))}}),n.a.createElement(d.b,{exact:!0,path:"/search/:query/:searchByClub?",render:function(t){return n.a.createElement(T,Object.assign({},t,{isMobile:h.isMobileOnly,recordPageViewGA:e.recordPageViewGA}))}}),n.a.createElement(d.b,{exact:!0,path:"/advancedSearch",render:function(t){return n.a.createElement(Ie,Object.assign({},t,{isMobile:h.isMobileOnly,recordPageViewGA:e.recordPageViewGA}))}}),n.a.createElement(d.b,{exact:!0,path:"/stats/:code",render:function(t){return n.a.createElement(ke,Object.assign({},t,{isMobile:h.isMobileOnly,isSafari:h.isSafari,recordPageViewGA:e.recordPageViewGA,percentileArrays:e.state.percentileArrays,updatePercentileArrays:e.updatePercentileArrays}))}}),n.a.createElement(d.b,{exact:!0,path:"/compare/:codes",render:function(t){return n.a.createElement(Pe,Object.assign({},t,{isMobile:h.isMobileOnly,isSafari:h.isSafari,recordPageViewGA:e.recordPageViewGA,percentileArrays:e.state.percentileArrays,updatePercentileArrays:e.updatePercentileArrays}))}}),n.a.createElement(d.b,{component:xe}))}}]),a}(s.Component),Ke=Object(d.g)(Je);Object(r.render)(n.a.createElement(l.a,null,n.a.createElement(Te.b,null,n.a.createElement(Ke,null))),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.86ecf0cf.chunk.js.map