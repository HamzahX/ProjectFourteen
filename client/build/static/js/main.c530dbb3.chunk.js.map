{"version":3,"sources":["App/assets/mockups.png","App/components/PlayerSearchResult.js","App/components/ClubSearchResult.js","App/components/SearchBar.js","App/components/LoadingSpinner.js","App/pages/Home.js","App/pages/Search.js","App/components/SliceOptions.js","App/components/Slice.js","App/pages/Stats.js","App/App.js","index.js"],"names":["module","exports","PlayerSearchResult","props","clubs","seasons","season","push","length","state","page","code","name","nationality","this","className","clubLabel","to","tabIndex","join","Component","ClubSearchResult","controller","AbortController","signal","SearchBar","_isMounted","_firstRequest","getSearchResults","query","Promise","resolve","reject","fetch","method","headers","body","JSON","stringify","then","res","ok","json","Error","searchResults","catch","error","handleChange","event","target","value","abort","setState","handleSubmit","preventDefault","history","containerID","displayHomeButton","isLoading","playerSearchResults","clubSearchResults","playerCards","i","current","key","clubCards","id","onSubmit","style","display","color","type","placeholder","autoComplete","onChange","withRouter","LoadingSpinner","Home","getSamplePlayers","isMobile","samplePlayers","height","Math","max","document","documentElement","clientHeight","window","innerHeight","navbarHeight","$","css","addClass","toggleNavbar","responsiveNavbar","attr","removeClass","hideNavbar","samplePlayerButtons","href","onClick","rel","fontWeight","src","mockUps","alt","backgroundColor","Search","undefined","searchByClub","processSearchResults","filteredPlayerSearchResults","filterByName","input","parse","normalize","replace","toUpperCase","includes","filterValue","match","params","nextProps","nextContext","message","searchText","marginTop","SliceOptions","positions","competitions","labelTypes","template","selectedCompetitions","labelType","templateLabels","mobileTemplateLabels","position","mobileClassName","disabled","checked","changeTemplate","templatesForm","mobileTemplatesForm","competitionsForms","counter","competitionLabels","multipleClubs","marginBottom","currentCompetition","isIncluded","label","substring","indexOf","changeSelectedCompetitions","labelTypeLabels","changeLabelType","labelTypeForm","toggleCreditsPosition","exportChart","HighchartsMore","Highcharts","Slice","isForExport","fontSizes","title","subtitle","noData","xAxisLabels","dataLabels","dataLabelsOutline","tooltipHeader","tooltip","credits","yAxisLabels","categories","subtitles","chartOptions","text","fontSize","margin","pane","startAngle","chart","fontFamily","animation","polar","marginLeft","marginRight","events","xAxis","labels","zIndex","distance","padding","gridLineWidth","gridLineColor","gridZIndex","yAxis","enabled","lineWidth","endOnTick","showFirstLabel","showLastLabel","min","tickPositions","series","plotOptions","states","hover","textOutline","format","allowOverlap","z","headerFormat","pointFormat","legend","align","y","lang","age","minutes","toLocaleString","isAnimated","creditsPosition","url","load","element","onclick","open","map","data","pointPadding","groupPadding","stickyTracking","isAnimatedInitial","hasTooltip","lastUpdated","constructorType","highcharts","containerProps","width","options","dateFormat","require","cookies","Cookies","Stats","getStats","percentileArrays","response","processStats","playerStats","newPercentileArrays","updatePercentileArrays","stats","competition","fbrefCode","percentileEntries","filterStats","filteredStats","stat","calculateStats","percentileSeason","includedSeasons","percentileArrayOccurrences","statsPer90","percentiles","isFinite","percentileRank","array","occurrences","constructChartInput","colors","p90_labels","truncate","percentile_labels","roundNumbers","chartInput","p90_label","percentile_label","ordinalSuffix","Color","setOpacity","get","someStats","threeDigitStats","precision","parseFloat","round","toFixed","roundedStats","aNumber","j","k","clickedValues","split","clickedSeason","clickedCompetition","splice","set","path","newPosition","a","async","isSafari","alert","node","getElementById","backgroundWidth","backgroundSize","offsetWidth","backgroundHeightRatio","offsetHeight","nodeAspectRatio","domtoimage","toPng","bgcolor","opacity","transform","blob","saveAs","console","log","null","labelTypeCookie","creditsPositionCookie","Object","keys","calculatedStats","isMobileOnly","test","App","getPercentileArrays","exact","render","component"],"mappings":"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","file":"static/js/main.c530dbb3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mockups.7dea4274.png\";","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n/**\r\n * Component to render a player search result\r\n */\r\nclass PlayerSearchResult extends Component {\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        //set the player clubs entry to their most recent season's clubs\r\n        let clubs = this.props.clubs;\r\n        let seasons = [];\r\n        for (let season in clubs){\r\n            seasons.push(season);\r\n        }\r\n        clubs = clubs[seasons[seasons.length-1]];\r\n\r\n        this.state = {\r\n            page: this.props.page,\r\n            code: this.props.code,\r\n            name: this.props.name,\r\n            clubs: clubs,\r\n            nationality: this.props.nationality,\r\n        };\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * render function\r\n     * @return {*} - JSX code for a player search result\r\n     */\r\n    render() {\r\n\r\n        let {\r\n            page,\r\n            code,\r\n            name,\r\n            clubs,\r\n            nationality\r\n        } = this.state;\r\n\r\n        //change the div class name based on the page so that the CSS rules modify it accordingly\r\n        let className = page === 'home' ? 'sample-player' : 'search-result';\r\n\r\n        //remove the \"Club: \" label for home page, and modify it to \"Clubs\" if there are more than 1\r\n        let clubLabel = page === 'home' ? '' : clubs.length === 1 ? 'Club:' : 'Clubs:';\r\n\r\n        return (\r\n            <Link to={\"/stats/\" + code}>\r\n                <div tabIndex=\"0\" className={className}>\r\n                    <div className=\"name\">{name}</div>\r\n                    <div className=\"club\">{clubLabel} {clubs.join(\", \")}</div>\r\n                    <div className=\"nationality\">Nationality: {nationality}</div>\r\n                </div>\r\n            </Link>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default (PlayerSearchResult);\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n/**\r\n * Component to render a club search result\r\n */\r\nclass ClubSearchResult extends Component {\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: this.props.name,\r\n        };\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * render function\r\n     * @return {*} - JSX code for a club search result\r\n     */\r\n    render() {\r\n\r\n        let { name } = this.state;\r\n\r\n        return (\r\n            <Link to={\"/search/\" + name + \"/all\"}>\r\n                <div tabIndex=\"0\" className=\"search-result\">\r\n                    <div className=\"name\">{name}</div>\r\n                </div>\r\n            </Link>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default (ClubSearchResult);\r\n","import React, { Component, Fragment } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport PlayerSearchResult from \"./PlayerSearchResult\";\r\nimport ClubSearchResult from \"./ClubSearchResult\";\r\n\r\nvar controller = new AbortController();\r\nvar { signal } = controller;\r\n\r\n/**\r\n * Component to render a div containing a searchbar\r\n * Also handles the live search\r\n */\r\nclass SearchBar extends Component {\r\n\r\n    //class variable to track if the component is mounted\r\n    _isMounted = false;\r\n    _firstRequest = true;\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        let page = this.props.page;\r\n\r\n        //change the searchbar container id based on the page so that the CSS rules modify it accordingly\r\n        this.containerID = \"\";\r\n        switch (page) {\r\n            case \"home\":\r\n                this.containerID = \"searchbar-container1\";\r\n                break;\r\n            case \"search\":\r\n                this.containerID = \"searchbar-container2\";\r\n                break;\r\n            case \"stats\":\r\n                this.containerID = \"searchbar-container3\";\r\n                break;\r\n            default:\r\n                this.containerID = \"searchbar-container1\";\r\n        }\r\n\r\n        //attach a home button to the searchbar if it is not being displayed on the homepage\r\n        this.displayHomeButton = 'default';\r\n        if (page === \"home\"){\r\n            this.displayHomeButton = 'none';\r\n        }\r\n\r\n        this.state = {\r\n            page: this.props.page,\r\n            query: this.props.query || \"\",\r\n            isLoading: false,\r\n            error: null,\r\n            playerSearchResults: [],\r\n            clubSearchResults: [],\r\n        };\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Called after component has mounted\r\n     */\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to send a post request to the server to retrieve the search results matching the query\r\n     */\r\n    getSearchResults = (query) => {\r\n\r\n        controller = new AbortController();\r\n        signal = controller.signal;\r\n\r\n        return new Promise((resolve, reject) => {\r\n            //fetch search results\r\n            //pass signal to the fetch request so it can be cancelled\r\n            //this is done with live searches to cancel the previous request every time a new letter is typed\r\n            fetch('/api/search', {\r\n                signal,\r\n                method: 'post',\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    \"query\": query,\r\n                    \"type\": \"playersAndClubs\",\r\n                    \"isLive\": true\r\n                })\r\n            })\r\n                .then(res => {\r\n                    if (res.ok) {\r\n                        return res.json()\r\n                    }\r\n                    else {\r\n                        throw new Error(\"Failed to fetch search results. Please refresh the page and try again.\")\r\n                    }\r\n                })\r\n                .then(searchResults => {\r\n                    resolve(searchResults);\r\n                })\r\n                .catch(error => {\r\n                    reject(error);\r\n                });\r\n        })\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Called just before the component un-mounts\r\n     */\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to handle an input to the searchbar\r\n     * Updates searchbar input value, fetches search results and sets state\r\n     * @param {Object} event - the input event from the searchbar input\r\n     */\r\n    handleChange = (event) => {\r\n\r\n        let query = event.target.value;\r\n\r\n        //cancel previous request if it's not the first request\r\n        if (this._firstRequest){\r\n            this._firstRequest = false;\r\n        }\r\n        else {\r\n            controller.abort();\r\n        }\r\n\r\n        //set searchbar input value\r\n        this.setState({\r\n            query: query\r\n        });\r\n\r\n        // //update search results\r\n        // if (query !== \"\"){\r\n        //     this.getSearchResults(query)\r\n        //     .then((searchResults) => {\r\n        //         let playerSearchResults = searchResults['playerSearchResults'];\r\n        //         let clubSearchResults = searchResults['clubSearchResults'];\r\n        //         if (this._isMounted){\r\n        //             this.setState({\r\n        //                 error: null,\r\n        //                 isLoading: false,\r\n        //                 playerSearchResults: [],\r\n        //                 clubSearchResults: []\r\n        //             }, () => {\r\n        //                 this.setState({\r\n        //                     playerSearchResults: playerSearchResults,\r\n        //                     clubSearchResults: clubSearchResults\r\n        //                 })\r\n        //             })\r\n        //         }\r\n        //     }, (error) => {\r\n        //         if (this._isMounted){\r\n        //             this.setState({\r\n        //                 error, isLoading: false\r\n        //             })\r\n        //         }\r\n        //     })\r\n        // }\r\n        // else {\r\n        //     if (this._isMounted){\r\n        //         this.setState({\r\n        //             error: null,\r\n        //             isLoading: false,\r\n        //             playerSearchResults: [],\r\n        //             clubSearchResults: []\r\n        //         })\r\n        //     }\r\n        // }\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to handle submit events from the searchbar input\r\n     * Redirects to the search URL with the correct URL params\r\n     * @param {Object} event - the submit event from the searchbar input\r\n     */\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        this.props.history.push('/search/' + this.state.query);\r\n    };\r\n\r\n\r\n    /**\r\n     * render function\r\n     * modifies searchbar based on the page it is to be displayed on\r\n     * @return {*} - JSX code for the searchbar and its container\r\n     */\r\n    render() {\r\n\r\n        const {\r\n            query,\r\n            isLoading,\r\n            error,\r\n            playerSearchResults,\r\n            clubSearchResults\r\n        } = this.state;\r\n\r\n        //construct the player cards\r\n        let playerCards = [];\r\n        for (let i=0; i<playerSearchResults.length; i++){\r\n            let current = playerSearchResults[i];\r\n            playerCards.push(\r\n                <PlayerSearchResult\r\n                    page=\"search\"\r\n                    code={current.code}\r\n                    name={current.name}\r\n                    clubs={current.clubs}\r\n                    nationality={current.nationality}\r\n                    key={i}\r\n                />\r\n            );\r\n        }\r\n\r\n        //construct the club cards\r\n        let clubCards = [];\r\n        for (let i=0; i<clubSearchResults.length; i++){\r\n            let current = clubSearchResults[i];\r\n            clubCards.push(\r\n                <ClubSearchResult\r\n                    name={current}\r\n                    key={i}\r\n                />\r\n            )\r\n        }\r\n\r\n        //return JSX code for the searchbar\r\n        return (\r\n\r\n            <Fragment>\r\n                <div className=\"searchbar-container\" id={this.containerID}>\r\n                    <form id=\"searchbar-form\" onSubmit={this.handleSubmit}>\r\n                        <Link to={'/'}>\r\n                            <div id=\"home-button\" style={{display: this.displayHomeButton}}>\r\n                                <div>\r\n                                    Football\r\n                                    <span style={{color: '#e4c000', display: 'block'}}>Slices\r\n                            <span style={{color: 'black'}}>.com</span></span>\r\n                                </div>\r\n                            </div>\r\n                        </Link>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"searchbar-input\"\r\n                            value={query}\r\n                            placeholder=\"Search for players, clubs...\"\r\n                            autoComplete=\"off\"\r\n                            onChange={this.handleChange}\r\n                        />\r\n                    </form>\r\n                </div>\r\n                {/*<div id=\"live-search-results\">*/}\r\n                {/*    {playerCards}*/}\r\n                {/*    {clubCards}*/}\r\n                {/*</div>*/}\r\n            </Fragment>\r\n\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter (SearchBar);\r\n","import React, { Component } from 'react';\r\n\r\n\r\n/**\r\n * Renders a pure CSS loading spinner\r\n * taken from: https://projects.lukehaas.me/css-loaders/\r\n */\r\nclass LoadingSpinner extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"main\">\r\n                <div className=\"screen\" id=\"loading-screen\">\r\n                    <div className=\"loader\">Loading...</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\nexport default (LoadingSpinner);\r\n","import React, { Component } from 'react';\r\nimport $ from \"jquery\";\r\n\r\n//import components\r\nimport SearchBar from \"../components/SearchBar\"\r\nimport PlayerSearchResult from \"../components/PlayerSearchResult\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\n\r\n//import assets\r\nimport mockUps from \"../assets/mockups.png\"\r\n\r\n\r\n/**\r\n * Homepage component\r\n */\r\nclass Home extends Component {\r\n\r\n    //class variable to track if the component is mounted\r\n    _isMounted = false;\r\n\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n\r\n        super(props);\r\n        this.state = {\r\n            isMobile: this.props.isMobile,\r\n            isLoading: true,\r\n            samplePlayers: [],\r\n        };\r\n        this.getSamplePlayers();\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Called after component has mounted\r\n     */\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to send a post request to the server to retrieve 3 sample players to be displayed on the homepage\r\n     */\r\n    getSamplePlayers = () => {\r\n\r\n        let isMobile = this.state.isMobile;\r\n\r\n        //fetch sample players\r\n        fetch('/api/samplePlayers', {\r\n            method: 'post',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({})\r\n        })\r\n        .then(res => res.json())\r\n        .then(samplePlayers => {\r\n            //only set state if the component is mounter\r\n            if (this._isMounted){\r\n                this.setState({samplePlayers: samplePlayers, isLoading: false});\r\n                //hard code the height of home and the navbar container if it is a mobile device\r\n                //this is done because the soft keyboards on mobile devices affect the view-height\r\n                if (isMobile){\r\n                    var height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n                    var navbarHeight = 0.06 * height;\r\n                    $(\"#home\").css({\"height\": height});\r\n                    $(\"#navbar-container\").css({\"height\": navbarHeight});\r\n                }\r\n                //add preload class to the hidden menu to disable the first animation\r\n                $(\"#navbar-hidden\").addClass('preload');\r\n            }\r\n        })\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Called just before the component un-mounts\r\n     */\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to display/hide the responsive navbar\r\n     */\r\n    toggleNavbar = () => {\r\n\r\n        //select the responsive navbar element\r\n        let responsiveNavbar = $(\".responsive-navbar\");\r\n\r\n        //expand or hide based on current state\r\n        if (responsiveNavbar.attr(\"id\") === \"navbar-hidden\"){\r\n            responsiveNavbar.attr(\"id\", \"navbar-expanded\");\r\n        }\r\n        else {\r\n            //remove preload class when expanding to re-enable animations\r\n            $(\"#navbar-expanded\").removeClass('preload');\r\n            responsiveNavbar.attr(\"id\", \"navbar-hidden\");\r\n        }\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to hide the navbar (called after one of the menu options is clicked)\r\n     */\r\n    hideNavbar = () => {\r\n\r\n        $(\"#navbar-expanded\").removeClass('preload');\r\n        $(\".responsive-navbar\").attr(\"id\", \"navbar-hidden\");\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * render function\r\n     * @return {*} - JSX code for the homepage\r\n     */\r\n    render() {\r\n\r\n        let { isLoading, samplePlayers } = this.state;\r\n\r\n        //display loading spinner while the server responds to POST request for the sample players\r\n        if (isLoading) {\r\n            return (\r\n                <LoadingSpinner/>\r\n            )\r\n        }\r\n\r\n        //return homepage code otherwise\r\n        else {\r\n\r\n            //construct the sample player buttons\r\n            let samplePlayerButtons = [];\r\n            for (let i=0; i<samplePlayers.length; i++){\r\n                let current = samplePlayers[i];\r\n                samplePlayerButtons.push(\r\n                    <PlayerSearchResult\r\n                        page = \"home\"\r\n                        code = {current.code}\r\n                        name = {current.name}\r\n                        clubs = {current.clubs}\r\n                        nationality = {current.nationality}\r\n                        key = {i}\r\n                    />\r\n                );\r\n            }\r\n\r\n            //static JSX code for the homepage\r\n            return (\r\n                <div id=\"homepage\">\r\n                    <div id=\"navbar-container\">\r\n                        <div className=\"navbar\" id=\"navbar-normal\">\r\n                            <a href=\"#home\">\r\n                                <div>Home</div>\r\n                            </a>\r\n                            <a href=\"#preview\">\r\n                                <div>Preview</div>\r\n                            </a>\r\n                            <a href=\"#glossary\">\r\n                                <div>Glossary</div>\r\n                            </a>\r\n                            <a href=\"#faq\">\r\n                                <div>F.A.Q.</div>\r\n                            </a>\r\n                            <a href=\"#contact\">\r\n                                <div>Contact</div>\r\n                            </a>\r\n                            <button onClick={this.toggleNavbar} id=\"burger-icon-container\">\r\n                                <div id=\"burgerIcon\"><i className=\"fa fa-bars\"/></div>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"navbar responsive-navbar\" id=\"navbar-hidden\">\r\n                            <a onClick={this.hideNavbar} href=\"#preview\">\r\n                                <div>Preview</div>\r\n                            </a>\r\n                            <a onClick={this.hideNavbar} href=\"#glossary\">\r\n                                <div>Glossary</div>\r\n                            </a>\r\n                            <a onClick={this.hideNavbar} href=\"#faq\">\r\n                                <div>F.A.Q.</div>\r\n                            </a>\r\n                            <a onClick={this.hideNavbar} href=\"#contact\">\r\n                                <div>Contact</div>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"home\">\r\n                        <h1>Football<span style={{color: '#e4c000'}}>Slices</span></h1>\r\n                        <SearchBar page=\"home\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        <p>...or try using a sample player</p>\r\n                        <br/>\r\n                        <div id=\"sample-results\">\r\n                            {samplePlayerButtons}\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"preview\" className=\"homepage-section-container\">\r\n                        <div id=\"preview-section-container\">\r\n                            <div id=\"preview-text\">\r\n                                <h2>Preview</h2>\r\n                                <p>\r\n                                    FootballSlices are stats visualizations that are supported by an\r\n                                    entirely automated data retrieval process. The tool sifts through mountains of\r\n                                    numbers so you don't have to!\r\n                                </p>\r\n                                <p>\r\n                                    Explore a database of more than <b>2,700 players</b> from <b>Europe's top 5 leagues</b>,\r\n                                    with stats from the <b>2018/19</b> and <b>2019/20</b> seasons.\r\n                                </p>\r\n                                <p>\r\n                                    Simply choose a positional template, toggle the competitions you'd like to include,\r\n                                    and visualize statistics in seconds with interactive percentile rank bar\r\n                                    charts, powered by <a href=\"https://www.highcharts.com\" target=\"_blank\" rel=\"noopener noreferrer\">Highcharts.js</a>.\r\n                                </p>\r\n                                <p><span className=\"accented-p\">Interpreting FootballSlices</span></p>\r\n                                <p>\r\n                                    Each slice is made up of wedges. The size of each wedge corresponds to the\r\n                                    percentile rank of the selected player with regards to the stat represented by the\r\n                                    wedge. The data labels show the raw values.\r\n                                </p>\r\n                                <p>\r\n                                    The colours help to group similar-ish stats together (as well as improve the charts'\r\n                                    visual impact).\r\n                                </p>\r\n                                <ul>\r\n                                    <li><span style={{color: '#f15c80', fontWeight: 'bold'}}>Red</span> is for goal-scoring & shooting stats,</li>\r\n                                    <li><span style={{color: '#e4c000', fontWeight: 'bold'}}>Yellow</span> is for passing, chance creation & ball progression</li>\r\n                                    <li><span style={{color: '#87e179', fontWeight: 'bold'}}>Green</span> is for dribbling & ball retention</li>\r\n                                    <li><span style={{color: '#7db9f0', fontWeight: 'bold'}}>Blue</span> is for defending</li>\r\n                                    <li>and <span style={{color: '#787ccd', fontWeight: 'bold'}}>Purple</span> is for goalkeeping stats</li>\r\n                                </ul>\r\n                            </div>\r\n                            <div id=\"preview-image\">\r\n                                <img src={mockUps} alt=\"Mock-ups\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"glossary\" style={{backgroundColor: '#f5f6f7'}} className=\"homepage-section-container\">\r\n                        <div id=\"glossary-section-container\">\r\n                            <h2>Glossary</h2>\r\n                            <ul>\r\n                                <li>\r\n                                    <span style={{color: '#f15c80', fontWeight: 'bold'}}>Non-Penalty Goal</span>&nbsp;\r\n                                    A goal that did not stem directly from a penalty kick.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#f15c80', fontWeight: 'bold'}}>Non-Penalty xG (Expected Goals)</span>&nbsp;\r\n                                    Expected goals that did not stem directly from penalty kicks.*\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#f15c80', fontWeight: 'bold'}}>Non-Penalty xG/Shot</span>&nbsp;\r\n                                    The average expected goal value of shots taken, excluding penalty kicks.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#f15c80', fontWeight: 'bold'}}>Conversion Rate</span>&nbsp;\r\n                                    The percentage of shots that resulted in goals, excluding penalty kicks.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#f15c80', fontWeight: 'bold'}}>Aerial Win %</span>&nbsp;\r\n                                    The percentage of aerials duels contested that were won.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>Touch in Box</span>&nbsp;\r\n                                    Having possession of the ball in the opposition's penalty area.\r\n                                    (Note: Receiving a pass, then dribbling, then sending a pass counts as one touch)\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>xA (Expected Assists)</span>&nbsp;\r\n                                    Expected goals that resulted from shot assists, including set pieces.*\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>OP (Open Play) Shot-Creating Action</span>&nbsp;\r\n                                    Excluding set pieces, one of the last two offensive actions that directly\r\n                                    led to a shot; such as a pass, dribble or a drawn foul.\r\n                                    (Note: A single player can receive credit for multiple actions and the shot-taker can also receive credit)\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>Pass into Box</span>&nbsp;\r\n                                    A completed pass that entered the opposition's penalty area, excluding set pieces.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>Pass into Final 1/3</span>&nbsp;\r\n                                    A completed pass that entered the third of the pitch that is closest to the opposition's goal, excluding set pieces.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>Progressive Distance</span>&nbsp;\r\n                                    Distance, in yards, that the ball was moved towards the oppositions's goal\r\n                                    with passes and carries.\r\n                                    (Note: Passes and carries away from the oppositions's goal are counted as zero progressive yards)\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>Pass Completion %</span>&nbsp;\r\n                                    The percentage of attempted passes that successfully found a teammate.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>Long Pass Completion %</span>&nbsp;\r\n                                    The percentage of attempted passes of 25 yards or more that successfully found a teammate.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#e4c000', fontWeight: 'bold'}}>Launched Pass Completion %</span>&nbsp;\r\n                                    The percentage of attempted passes of 40 yards or more that successfully found a teammate, including goal kicks.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#87e179', fontWeight: 'bold'}}>Successful Dribble</span>&nbsp;\r\n                                    A successful attempt at taking on a player and making it past them whilst retaining possession.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#87e179', fontWeight: 'bold'}}>Dribble Success %</span>&nbsp;\r\n                                    The percentage of attempted dribbles that were successful.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#87e179', fontWeight: 'bold'}}>Dispossessed</span>&nbsp;\r\n                                    Being tackled by an opponent and losing control of the ball without attempting a dribble.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>pAdj</span>&nbsp;\r\n                                    Possession Adjusted (using the StatsBomb sigmoid function).**\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>Successful Pressure</span>&nbsp;\r\n                                    A pressing action that led to the team regaining possession within the next 5 seconds.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>Interception</span>&nbsp;\r\n                                    A prevention of an opponent's pass from reaching another opponent by moving into the line of the pass.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>Tackle Won</span>&nbsp;\r\n                                    A dispossession of an opponent such that the tackling player's team won possession of the ball.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>Tackle/Dribbled Past %</span>&nbsp;\r\n                                    The percentage of dribblers faced that were tackled.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>Aerial Win</span>&nbsp;\r\n                                    Winning the ball in a duel that was challenged in the air.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>Aerial Win %</span>&nbsp;\r\n                                    The percentage of aerials duels contested that were won.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#7db9f0', fontWeight: 'bold'}}>Clearance</span>&nbsp;\r\n                                    An action where a player kicked/headed the ball away from their own goal.\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#787ccd', fontWeight: 'bold'}}>GSAA (Goals Saved Above Average) %</span>&nbsp;\r\n                                    (Post-Shot xG − Goals Conceded) ÷ Shots on Target Faced.***\r\n                                </li>\r\n                                <li>\r\n                                    <span style={{color: '#787ccd', fontWeight: 'bold'}}>Cross Stopping %</span>&nbsp;\r\n                                    The percentage of attempted crosses into the penalty area that were stopped by the goalkeeper.\r\n                                </li>\r\n                            </ul>\r\n                            <div id=\"glossary-links\">\r\n                                <span>\r\n                                    * <a href=\"https://fbref.com/en/expected-goals-model-explained/\" target=\"_blank\" rel=\"noopener noreferrer\">Expected goals/assists model explanation</a>\r\n                                </span>\r\n                                <span>\r\n                                    ** <a href=\"https://statsbomb.com/2014/06/introducing-possession-adjusted-player-stats/\" target=\"_blank\" rel=\"noopener noreferrer\">Possession adjustment explanation</a>\r\n                                </span>\r\n                                <span>\r\n                                    *** <a href=\"https://statsbomb.com/2018/12/introducing-goalkeeper-radars/\" target=\"_blank\" rel=\"noopener noreferrer\">GSAA % explanation</a>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"faq\" className=\"homepage-section-container\">\r\n                        <div id=\"faq-section-container\">\r\n                            <h2>F.A.Q.</h2>\r\n                            <div id=\"faq-container\">\r\n                                <div className=\"faq-item\">\r\n                                    <p><span className=\"accented-p\">Where does the data come from?</span></p>\r\n                                    <p>The metadata is from <a href=\"https://www.whoscored.com\" target=\"_blank\" rel=\"noopener noreferrer\">WhoScored.com</a>, and\r\n                                        the stats are from <a href=\"https://www.fbref.com\" target=\"_blank\" rel=\"noopener noreferrer\">FBref.com</a>.</p>\r\n                                </div>\r\n                                <div className=\"faq-item\">\r\n                                    <p><span className=\"accented-p\">Who's included in the database? How often is it updated?</span></p>\r\n                                    <p>\r\n                                        The database includes all top 5 league players who've made 4 or more league appearances\r\n                                        in the 2018/19 or 2019/20 seasons. It's updated after every top 5 league, Champions League\r\n                                        or Europa League matchday.\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"faq-item\">\r\n                                    <p><span className=\"accented-p\">\r\n                                        Will the database be expanded to include seasons before 2018/19 and players outside the top 5 leagues?\r\n                                    </span></p>\r\n                                    <p>\r\n                                        Probably not. At present, <a href=\"https://www.fbref.com\" target=\"_blank\" rel=\"noopener noreferrer\">FBref.com</a>'s advanced statistics\r\n                                        are only available for a few seasons and leagues.\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"faq-item\">\r\n                                    <p><span className=\"accented-p\">Will a feature be added to compare players on the same chart?</span></p>\r\n                                    <p>\r\n                                        Still working on that.\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"faq-item\">\r\n                                    <p><span className=\"accented-p\">What is a percentile rank? How are they calculated for FootballSlices?</span></p>\r\n                                    <p>\r\n                                        The percentile rank of a score is the percentage of scores within a dataset\r\n                                        that are equal to or lower than the score. This is of course reversed for stats where\r\n                                        a lower value is better, such as the 'fouls committed per 90' stat.\r\n                                    </p>\r\n                                    <p>\r\n                                        The percentile ranks for FootballSlices are position-specific. For example,\r\n                                        selecting the 'forward' template compares the selected player only to other forwards in the\r\n                                        database. The percentile ranks are also season-specific. For example, selecting competitions\r\n                                        from the 2018/19 season will only compare the selected player to the 2018/19 dataset. Selecting\r\n                                        competitions from multiple seasons will compare the selected player to the combined dataset.\r\n                                    </p>\r\n                                    <p>\r\n                                        Please note however that the percentile ranks are not competition-specific. In other words,\r\n                                        the selected player's stats are always compared to other players' stats from all competitions, regardless\r\n                                        of which competitions are toggled for the selected player.\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"faq-item\">\r\n                                    <p><span className=\"accented-p\">How are the player positions decided?</span></p>\r\n                                    <p>\r\n                                        Position data is obtained using the 'detailed' tab of the <a href=\"https://whoscored.com/Statistics\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                        WhoScored.com player statistics table</a> to find all players who've made 10 or more\r\n                                        league starts in each of the template positions during a particular season.\r\n                                    </p>\r\n                                    <p>\r\n                                        Disclaimer: This method has some small quirks. For example, it classifies Martin Ødegaard as a\r\n                                        central midfielder, whereas I feel he's more of an attacking midfielder. It's\r\n                                        not perfect but it's the best way I've found to automate the process.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"contact\" style={{backgroundColor: '#f5f6f7'}} className=\"homepage-section-container\">\r\n                        <div id=\"contact-section-container\">\r\n                            <h2>Contact</h2>\r\n                            <p>\r\n                                For any bug reports, suggestions or questions, please feel free to reach out to me\r\n                                at either of the following:\r\n                            </p>\r\n                            <ul>\r\n                                <li>Twitter: <a href=\"https://twitter.com/FootballSlices\" target=\"_blank\" rel=\"noopener noreferrer\">@FootballSlices</a></li>\r\n                                <li>Email: <a href=\"mailto:footballslices@gmail.com\" target=\"_blank\" rel=\"noopener noreferrer\">FootballSlices@gmail.com</a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\n\r\n//import components\r\nimport SearchBar from \"../components/SearchBar\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\nimport PlayerSearchResult from \"../components/PlayerSearchResult\";\r\nimport ClubSearchResult from \"../components/ClubSearchResult\";\r\n\r\n\r\n/**\r\n * Search page component\r\n */\r\nclass Search extends Component {\r\n\r\n    //class variable to track if the component is mounted\r\n    _isMounted = false;\r\n\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     */\r\n    constructor(props){\r\n\r\n        super(props);\r\n\r\n        let query = props.match.params.query;\r\n        let searchByClub = props.match.params.searchByClub;\r\n        this.state = {\r\n            isLoading: true,\r\n            error: null,\r\n            query: query,\r\n            searchByClub: searchByClub,\r\n            playerSearchResults: [],\r\n            filteredPlayerSearchResults: [],\r\n            clubSearchResults: [],\r\n            filterValue: \"\"\r\n        };\r\n\r\n        this.getSearchResults();\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Called after component has mounted\r\n     */\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n    }\r\n\r\n\r\n    /**\r\n     * Called just before the component receives new props. This is done to ensure that new props trigger a setState()\r\n     * @param nextProps\r\n     * @param nextContext\r\n     */\r\n    //TODO: re-factor because componentWillReceiveProps has been deprecated\r\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\r\n        let { query, searchByClub } = nextProps.match.params;\r\n        this.setState({\r\n            isLoading: true,\r\n            query: query,\r\n            searchByClub: searchByClub\r\n        }, () => {\r\n            this.getSearchResults();\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to send a post request to the server to retrieve the search results matching the query\r\n     */\r\n    getSearchResults = () => {\r\n\r\n        let searchByClub = this.state.searchByClub;\r\n        let type = searchByClub === undefined ? \"playersAndClubs\" : \"playersByClub\";\r\n\r\n        //retrieve search results\r\n        fetch('/api/search', {\r\n            method: 'post',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                \"query\": this.state.query,\r\n                \"type\": type\r\n            })\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            else {\r\n               throw new Error(\"Failed to fetch search results. Please refresh the page and try again.\")\r\n            }\r\n        })\r\n        .then(searchResults => this.processSearchResults(searchResults))\r\n        .catch(error => {\r\n            if (this._isMounted){\r\n                this.setState({error, isLoading: false})\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to process the search results and save to state\r\n     * @param {Object} searchResults - object containing search results\r\n     */\r\n    processSearchResults = (searchResults) => {\r\n\r\n        let playerSearchResults = searchResults['playerSearchResults'];\r\n        let clubSearchResults = searchResults['clubSearchResults'];\r\n\r\n        if (this._isMounted){\r\n            this.setState({\r\n                error: null,\r\n                isLoading: false,\r\n                playerSearchResults: playerSearchResults,\r\n                filteredPlayerSearchResults: playerSearchResults,\r\n                clubSearchResults: clubSearchResults,\r\n            })\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Called just before the component un-mounts\r\n     */\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to filter player search results\r\n     * @param {Object} event - the input event from the search result filter\r\n     */\r\n    filterByName = (event) => {\r\n\r\n        //create a deep-copy of playerSearchResults to avoid modifying the original\r\n        let playerSearchResults = JSON.parse(JSON.stringify(this.state.playerSearchResults));\r\n        let filteredPlayerSearchResults = [];\r\n\r\n        let input;\r\n        if (event === null) {\r\n            input = \"\";\r\n            filteredPlayerSearchResults = playerSearchResults;\r\n        }\r\n        else {\r\n            //retrieve the input text and remove diacritics\r\n            let input = event.target.value\r\n                .normalize(\"NFD\")\r\n                .replace(/[\\u0300-\\u036f]/g, \"\")\r\n                .replace(\"Ø\", \"O\")\r\n                .replace(\"ø\", \"o\");\r\n            for (let i=0; i<playerSearchResults.length; i++){\r\n                //remove diacritics from each search result\r\n                let name = playerSearchResults[i].name.normalize(\"NFD\")\r\n                    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n                    .replace(\"Ø\", \"O\")\r\n                    .replace(\"ø\", \"o\");\r\n                //push matches to filteredSearchResults\r\n                if (name.toUpperCase().includes(input.toUpperCase())){\r\n                    filteredPlayerSearchResults.push(playerSearchResults[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        //set state by clearing filteredSearchResults first, and the re-populating it on callback\r\n        this.setState({\r\n            filteredPlayerSearchResults: [],\r\n            filterValue: input\r\n        }, () => {\r\n            this.setState({\r\n                filteredPlayerSearchResults: filteredPlayerSearchResults,\r\n            })\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * render function\r\n     * @return {*} - JSX code for the search page\r\n     */\r\n    render() {\r\n\r\n        let {\r\n            isLoading,\r\n            error,\r\n            filteredPlayerSearchResults,\r\n            clubSearchResults,\r\n            searchByClub,\r\n            filterValue\r\n        } = this.state;\r\n\r\n        //display loading spinner while the server responds to POST request for the search results\r\n        if (isLoading) {\r\n            return (\r\n                <LoadingSpinner/>\r\n            )\r\n        }\r\n\r\n        //display the error message screen if an error is caught\r\n        else if (error !== null) {\r\n            return (\r\n                <div id=\"main\">\r\n                    <SearchBar page=\"search\" query={this.state.query}/>\r\n                    <div className=\"screen\" id=\"error-screen\">\r\n                        <p>{error.message}</p>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        //build search page otherwise\r\n        else {\r\n\r\n            //construct the player cards\r\n            let playerCards = [];\r\n            for (let i=0; i<filteredPlayerSearchResults.length; i++){\r\n                let current = filteredPlayerSearchResults[i];\r\n                playerCards.push(\r\n                    <PlayerSearchResult\r\n                        page=\"search\"\r\n                        code={current.code}\r\n                        name={current.name}\r\n                        clubs={current.clubs}\r\n                        nationality={current.nationality}\r\n                        key={i}\r\n                    />\r\n                );\r\n            }\r\n\r\n            //construct the club cards\r\n            let clubCards = [];\r\n            for (let i=0; i<clubSearchResults.length; i++){\r\n                let current = clubSearchResults[i];\r\n                clubCards.push(\r\n                    <ClubSearchResult\r\n                        name={current}\r\n                        key={i}\r\n                    />\r\n                )\r\n            }\r\n\r\n            //build header for search results\r\n            let searchText;\r\n            if (searchByClub === undefined){\r\n                searchText = <h3>Search results for <br/>\"{this.state.query}\"</h3>;\r\n            }\r\n            else {\r\n                searchText = <h3>Search results for <br/>\"player.club[19-20] = {this.state.query}\"</h3>;\r\n            }\r\n\r\n            //return JSX code for the search page\r\n            return (\r\n                <div id=\"main\">\r\n                    <SearchBar page=\"search\" query={this.state.query}/>\r\n                    <div className=\"screen\" id=\"search-screen\">\r\n                        <div className=\"filter\" id=\"search-filters\">\r\n                            {searchText}\r\n                            <br />\r\n                            <div id=\"search-filter-inputs\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={filterValue}\r\n                                    placeholder={\"Filter players by name\"}\r\n                                    onChange={this.filterByName}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"result\" id=\"search-results\">\r\n                            {searchByClub === undefined ? <h3>Players</h3> : null}\r\n                            {playerCards.length === 0 && searchByClub === undefined ? <p>No results found</p> : null}\r\n                            <div id=\"player-search-results\">\r\n                                {playerCards}\r\n                            </div>\r\n                            {searchByClub === undefined ? <h3 style={{marginTop: '20px'}}>Clubs</h3> : null}\r\n                            {clubCards.length === 0 && searchByClub === undefined ? <p>No results found</p> : null}\r\n                            <div id=\"club-search-results\">\r\n                                {clubCards}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Search;\r\n","import React, { Component } from 'react';\r\nimport Collapsible from 'react-collapsible';\r\n\r\n/**\r\n * Component to render the options for the displayed slice\r\n */\r\nclass SliceOptions extends Component {\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this.positions = {\r\n            \"FW\": \"Forward\",\r\n            \"AM\": \"Attacking Midfielder / Winger\",\r\n            \"CM\": \"Central / Defensive Midfielder\",\r\n            \"FB\": \"Full-back\",\r\n            \"CB\": \"Center-back\",\r\n            \"GK\": \"Goalkeeper\"\r\n        };\r\n\r\n        this.competitions = this.props.competitions;\r\n        this.clubs = this.props.clubs;\r\n\r\n        this.labelTypes = {\r\n            \"raw\": \"Raw Value\",\r\n            \"percentiles\": \"Percentile Ranks\"\r\n        };\r\n\r\n        this.state = {\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * render function\r\n     * @return {*} - JSX code for the slice options\r\n     */\r\n    render() {\r\n\r\n        let isMobile = this.props.isMobile;\r\n\r\n        let template = this.props.template;\r\n        let selectedCompetitions = this.props.selectedCompetitions;\r\n        let labelType = this.props.labelType;\r\n\r\n        //construct templates form\r\n        let templateLabels = [];\r\n        let mobileTemplateLabels = [];\r\n        for (let position in this.positions){\r\n            let className;\r\n            let mobileClassName;\r\n            let disabled;\r\n            if (position !== \"GK\"){\r\n                className = template !== \"GK\" ? \"selectable-label\" : \"blocked-label\";\r\n                mobileClassName = `${template === position ? \"selected-label\" : null} ${template !== \"GK\" ? \"selectable-label\" : null}`;\r\n                disabled = template === \"GK\";\r\n            }\r\n            else {\r\n                className = template === \"GK\" ? \"selectable-label\" : \"blocked-label\";\r\n                mobileClassName = `${template === position ? \"selected-label\" : null} ${template === \"GK\" ? \"selectable-label\" : null}`;\r\n                disabled = template !== \"GK\";\r\n            }\r\n            templateLabels.push(\r\n                <label\r\n                    className={className}\r\n                    key={`${position}_label`}\r\n                >\r\n                    <input type=\"radio\"\r\n                           name=\"template\"\r\n                           value={position}\r\n                           checked={template === position}\r\n                           disabled={disabled}\r\n                           onChange={this.props.changeTemplate}\r\n                    /> {this.positions[position]}\r\n                </label>\r\n            );\r\n            mobileTemplateLabels.push(\r\n                <label\r\n                    className={mobileClassName}\r\n                    key={`${position}_label_mobile`}\r\n                >\r\n                    <input type=\"radio\"\r\n                           name=\"template\"\r\n                           value={position}\r\n                           checked={template === position}\r\n                           disabled={disabled}\r\n                           onChange={this.props.changeTemplate}\r\n                    /> {this.positions[position]}\r\n                </label>\r\n            );\r\n        }\r\n        let templatesForm = <form id=\"templates\">{templateLabels}</form>;\r\n        let mobileTemplatesForm = <form id=\"templates\">{mobileTemplateLabels}</form>;\r\n\r\n        //construct competitions forms\r\n        let competitionsForms = [];\r\n        let counter = 0;\r\n        for (let season in this.competitions){\r\n            let competitionLabels = [];\r\n            let multipleClubs = this.clubs[season].length !== 1;\r\n            competitionsForms.push(\r\n                <h4\r\n                    key={`${season}_header`}\r\n                    style={{\r\n                        marginBottom: isMobile ? '20px' : '10px',\r\n                        marginTop: (counter !== 0 && !isMobile) ? '15px' : '20px'\r\n                    }}\r\n                >\r\n                    {season.replace(\"-\", \"/\")} {multipleClubs === false ? ' | ' + this.clubs[season][0] : null}\r\n                </h4>\r\n            );\r\n            for (let i=0; i<this.competitions[season].length; i++){\r\n                let currentCompetition = this.competitions[season][i];\r\n                let isIncluded = selectedCompetitions[season].includes(currentCompetition);\r\n                let label = currentCompetition;\r\n                if (this.clubs[season].length === 1){\r\n                    label = label.substring(0, label.indexOf(\"|\")-1)\r\n                }\r\n                competitionLabels.push(\r\n                    <label\r\n                        className={`${isIncluded ? \"selected-label\" : null} selectable-label`}\r\n                        key={`${season}_${currentCompetition}`}\r\n                    >\r\n                        <input className=\"competition\"\r\n                               type=\"checkbox\"\r\n                               value={`${season}_${currentCompetition}`}\r\n                               onChange={this.props.changeSelectedCompetitions}\r\n                               checked={isIncluded}\r\n                        /> {label}\r\n                    </label>\r\n                )\r\n            }\r\n            competitionsForms.push(<form key={`${season}_form`} className=\"competitions\">{competitionLabels}</form>);\r\n            counter++;\r\n        }\r\n\r\n        //construct label type form\r\n        let labelTypeLabels = [];\r\n        for (let type in this.labelTypes){\r\n            labelTypeLabels.push(\r\n                <label\r\n                    className=\"selectable-label\"\r\n                    key={type}\r\n                >\r\n                    <input\r\n                        type=\"radio\"\r\n                        name=\"labelType\"\r\n                        value={type}\r\n                        checked={labelType === type}\r\n                        onChange={this.props.changeLabelType}\r\n                    /> {this.labelTypes[type]}\r\n                </label>\r\n            )\r\n        }\r\n        let labelTypeForm = <form id=\"data-labels\">{labelTypeLabels}</form>;\r\n\r\n        return (\r\n            <div className=\"filter\" id=\"chart-filters\">\r\n                {/*<div className=\"chart-filter-inputs\" id=\"chart-filter-inputs-laptop\">*/}\r\n                {/*    <Collapsible*/}\r\n                {/*        open={true}*/}\r\n                {/*        trigger=\"Template\"*/}\r\n                {/*        className=\"chart-filter-headers\"*/}\r\n                {/*        transitionTime={200}*/}\r\n                {/*        transitionCloseTime={200}*/}\r\n                {/*    >*/}\r\n                {/*        {templatesForm}*/}\r\n                {/*    </Collapsible>*/}\r\n                {/*    <Collapsible*/}\r\n                {/*        open={true}*/}\r\n                {/*        trigger=\"Competitions\"*/}\r\n                {/*        className=\"chart-filter-headers\"*/}\r\n                {/*        transitionTime={200}*/}\r\n                {/*        transitionCloseTime={200}*/}\r\n                {/*    >*/}\r\n                {/*        {competitionsForms}*/}\r\n                {/*    </Collapsible>*/}\r\n                {/*    <Collapsible*/}\r\n                {/*        open={true}*/}\r\n                {/*        trigger=\"Data Labels\"*/}\r\n                {/*        className=\"chart-filter-headers\"*/}\r\n                {/*        transitionTime={200}*/}\r\n                {/*        transitionCloseTime={200}*/}\r\n                {/*    >*/}\r\n                {/*        {labelTypeForm}*/}\r\n                {/*    </Collapsible>*/}\r\n\r\n                {/*</div>*/}\r\n                {/*<div className=\"chart-filter-inputs\" id=\"chart-filter-inputs-mobile\">*/}\r\n                {/*    <Collapsible*/}\r\n                {/*        open={true}*/}\r\n                {/*        trigger=\"Template\"*/}\r\n                {/*        className=\"chart-filter-headers\"*/}\r\n                {/*        transitionTime={200}*/}\r\n                {/*        transitionCloseTime={200}*/}\r\n                {/*    >*/}\r\n                {/*        {mobileTemplatesForm}*/}\r\n                {/*    </Collapsible>*/}\r\n                {/*    <Collapsible*/}\r\n                {/*        open={true}*/}\r\n                {/*        trigger=\"Competitions\"*/}\r\n                {/*        className=\"chart-filter-headers\"*/}\r\n                {/*        transitionTime={200}*/}\r\n                {/*        transitionCloseTime={200}*/}\r\n                {/*    >*/}\r\n                {/*        {competitionsForms}*/}\r\n                {/*    </Collapsible>*/}\r\n                {/*    <Collapsible*/}\r\n                {/*        open={true}*/}\r\n                {/*        trigger=\"Data Labels\"*/}\r\n                {/*        className=\"chart-filter-headers\"*/}\r\n                {/*        transitionTime={200}*/}\r\n                {/*        transitionCloseTime={200}*/}\r\n                {/*    >*/}\r\n                {/*        {labelTypeForm}*/}\r\n                {/*    </Collapsible>*/}\r\n                {/*</div>*/}\r\n                <div className=\"chart-filter-inputs\" id=\"chart-filter-inputs-laptop\">\r\n                    <h3>Template</h3>\r\n                    {templatesForm}\r\n                    <h3>Competitions</h3>\r\n                    {competitionsForms}\r\n                    <h3>Data Labels</h3>\r\n                    {labelTypeForm}\r\n                </div>\r\n                <div className=\"chart-filter-inputs\" id=\"chart-filter-inputs-mobile\">\r\n                    <h3>Template</h3>\r\n                    {mobileTemplatesForm}\r\n                    <h3>Competitions</h3>\r\n                    {competitionsForms}\r\n                    <h3>Data Labels</h3>\r\n                    {labelTypeForm}\r\n                </div>\r\n                <div id=\"filter-buttons\">\r\n                    <div className=\"filter-button\">\r\n                        <button id=\"toggleCreditsButton\" type=\"button\" onClick={this.props.toggleCreditsPosition}>Toggle Credits Position</button>\r\n                    </div>\r\n                    <div className=\"filter-button\">\r\n                        <button id=\"exportButton\" type=\"button\" onClick={this.props.exportChart}>Export Chart</button>\r\n                    </div>\r\n                    <div className=\"filter-button\">\r\n                        <button id=\"compareButton\" type=\"button\" disabled={true}>Compare To...</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default (SliceOptions);\r\n","import React, {Component} from 'react';\r\n\r\n//import dependencies\r\nimport Highcharts from 'highcharts/highstock'\r\nimport HighchartsReact from 'highcharts-react-official'\r\nimport HighchartsMore from 'highcharts/highcharts-more'\r\nHighchartsMore(Highcharts);\r\n\r\n\r\n/**\r\n * Component to render Slices (charts)\r\n */\r\nclass Slice extends Component {\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this.isMobile = this.props.isMobile;\r\n        this.isForExport = this.props.isForExport;\r\n\r\n        //set font size constants\r\n        this.fontSizes = null;\r\n        if (this.isForExport){\r\n            this.fontSizes =  {\r\n                title: '3.3em',\r\n                subtitle: '2em',\r\n                noData: '1.76em',\r\n                xAxisLabels: '1.95em',\r\n                dataLabels: '1.95em',\r\n                dataLabelsOutline: '0.13em',\r\n                tooltipHeader: '1.3em',\r\n                tooltip: '0em',\r\n                credits: '1.65em',\r\n                yAxisLabels: '0.65em'\r\n            };\r\n        }\r\n        else {\r\n            this.fontSizes =  {\r\n                title: this.props.isMobile ? '4.6vw' : '2.3em',\r\n                subtitle: this.props.isMobile ? '2.7vw' : '1.4em',\r\n                noData: this.props.isMobile ? '2.7vw' : '1.35em',\r\n                xAxisLabels: this.props.isMobile ? '2.3vw' : '1.15em',\r\n                dataLabels: this.props.isMobile ? '2.3vw' : '1.15em',\r\n                dataLabelsOutline: this.props.isMobile ? '0.3vw' : '0.18em',\r\n                tooltipHeader: this.props.isMobile ? '2.3vw' : '1em',\r\n                tooltip: this.props.isMobile ? '2.3vw' : '1.25em',\r\n                credits: this.props.isMobile ? '2.3vw' : '1.2em',\r\n                yAxisLabels: this.props.isMobile ? '1vw' : '0.5em'\r\n            };\r\n        }\r\n\r\n        //set categories (x-axis labels) constants\r\n        this.categories = {\r\n            \"FW\": [\r\n                'Non-Penalty Goals',\r\n                'Non-Penalty xG',\r\n                'Non-Penalty xG/Shot',\r\n                `${this.isMobile && !this.isForExport ? \"Conver-<br>sion Rate\" : \"Conversion Rate\"}`,\r\n                'Aerial Win %',\r\n                'Touches in Box',\r\n                'xA',\r\n                'Passes into Box',\r\n                'Successful Dribbles',\r\n                'Dribble Success %',\r\n                'Times Dispossessed',\r\n                '(pAdj) Successful Pressures',\r\n            ],\r\n            \"AM\": [\r\n                'Non-Penalty Goals',\r\n                'Non-Penalty xG',\r\n                'Non-Penalty xG/Shot',\r\n                'xA',\r\n                'OP Shot-Creating Actions',\r\n                'Passes into Box',\r\n                'Progressive Distance',\r\n                `${this.isMobile && !this.isForExport ? \"Pass Comp. %\" : \"Pass Completion %\"}`,\r\n                'Successful Dribbles',\r\n                'Dribble Success %',\r\n                'Times Dispossessed',\r\n                '(pAdj) Successful Pressures',\r\n            ],\r\n            \"CM\": [\r\n                'xA',\r\n                'OP Shot-Creating Actions',\r\n                'Passes into Final 1/3',\r\n                `${this.isMobile && !this.isForExport ? \"Prog-<br>ressive Distance\" : \"Progressive Distance\"}`,\r\n                `${this.isMobile && !this.isForExport ? \"Pass Comp. %\" : \"Pass Completion %\"}`,\r\n                'Successful Dribbles',\r\n                'Dribble Success %',\r\n                'Times Dispossessed',\r\n                '(pAdj) Successful Pressures',\r\n                `${this.isMobile && !this.isForExport ? \"(pAdj) Inter-<br>ceptions\" : \"(pAdj) Interceptions\"}`,\r\n                '(pAdj) Tackles Won',\r\n                `${this.isForExport ? \"Tackle/Dribbled Past %\" : \"Tackle/ Dribbled Past %\"}`\r\n            ],\r\n            \"FB\": [\r\n                'xA',\r\n                'Passes into Final 1/3',\r\n                'Progressive Distance',\r\n                `${this.isMobile && !this.isForExport ? \"Pass Comp. %\" : \"Pass Completion %\"}`,\r\n                'Successful Dribbles',\r\n                'Dribble Success %',\r\n                'Times Dispossessed',\r\n                '(pAdj) Successful Pressures',\r\n                '(pAdj) Interceptions',\r\n                \"(pAdj) Tackles Won\",\r\n                `${this.isForExport ? \"Tackle/Dribbled Past %\" : \"Tackle/ Dribbled Past %\"}`,\r\n                'Aerial Win %'\r\n            ],\r\n            \"CB\": [\r\n                'Passes into Final 1/3',\r\n                'Progressive Distance',\r\n                `${this.isMobile && !this.isForExport ? \"Pass Comp. %\" : \"Pass Completion %\"}`,\r\n                `${this.isMobile && !this.isForExport ? \"Long Pass Comp. %\" : \"Long Pass Completion %\"}`,\r\n                '(pAdj) Successful Pressures',\r\n                '(pAdj) Interceptions',\r\n                '(pAdj) Tackles Won',\r\n                `${this.isForExport ? \"Tackle/Dribbled Past %\" : \"Tackle/ Dribbled Past %\"}`,\r\n                '(pAdj) Fouls Committed',\r\n                'Aerials Won',\r\n                'Aerial Win %',\r\n                '(pAdj) Clearances'\r\n            ],\r\n            \"GK\": [\r\n                \"GSAA %\",\r\n                \"Cross Stopping %\",\r\n                \"Launched Pass Completion %\"\r\n            ],\r\n            \"N/A\": [\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\",\r\n                \"-\"\r\n            ]\r\n        };\r\n\r\n        //set subtitle constants\r\n        this.subtitles = {\r\n            \"FW\": \"vs Top-5 League Players with 10+ Starts as Forwards<br/>\",\r\n            \"AM\": \"vs Top-5 League Players with 10+ Starts as Attacking Midfielders / Wingers<br/>\",\r\n            \"CM\": \"vs Top-5 League Players with 10+ Starts as Central / Defensive Midfielders<br/>\",\r\n            \"FB\": \"vs Top-5 League Players with 10+ Starts as Full-backs<br/>\",\r\n            \"CB\": \"vs Top-5 League Players with 10+ Starts as Center-backs<br/>\",\r\n            \"GK\": \"vs Top-5 League Players with 10+ Starts as Goalkeepers<br/>\",\r\n            \"N/A\": \"No Template Selected\"\r\n        };\r\n\r\n        //Highcharts chart options\r\n        //variable options are initialized to null, and then modified on render using props\r\n        //consult the Highcharts API reference for detailed explanations of each option\r\n        //https://api.highcharts.com/highcharts/\r\n        this.chartOptions = {\r\n            title: {\r\n                text: null,\r\n                style: {\r\n                    color: '#e75453',\r\n                    fontSize: this.fontSizes['title'],\r\n                    fontWeight: 'bold',\r\n                },\r\n                margin: 35\r\n            },\r\n            subtitle: {\r\n                text: null,\r\n                style: {\r\n                    fontSize: this.fontSizes['subtitle']\r\n                }\r\n            },\r\n            pane: {\r\n                startAngle: null\r\n            },\r\n            chart: {\r\n                backgroundColor: 'rgba(0, 0, 0, 0)',\r\n                style: {\r\n                    fontFamily: 'sans-serif'\r\n                },\r\n                animation: null,\r\n                polar: true,\r\n                type: 'column',\r\n                marginLeft: 90,\r\n                marginRight: 90,\r\n                marginTop: null,\r\n                marginBottom: null,\r\n                events: null\r\n            },\r\n            xAxis: {\r\n                categories: null,\r\n                labels: {\r\n                    zIndex: 1,\r\n                    distance: null,\r\n                    style: {\r\n                        color: 'black',\r\n                        fontSize: this.fontSizes['xAxisLabels'],\r\n                    },\r\n                    padding: 31\r\n                },\r\n                gridLineWidth: 2,\r\n                gridLineColor: '#555555',\r\n                gridZIndex: 4\r\n            },\r\n            yAxis: {\r\n                labels: {\r\n                    enabled: false,\r\n                    // style: {\r\n                    //     color: '#444444',\r\n                    //     fontSize: this.fontSizes['yAxisLabels'],\r\n                    // }\r\n                },\r\n                gridZIndex: 5,\r\n                lineWidth: 0,\r\n                endOnTick: true,\r\n                showFirstLabel: false,\r\n                showLastLabel: true,\r\n                min: -15,\r\n                max: 100,\r\n                tickPositions: [-15, 0, 25, 50, 75, 100]\r\n            },\r\n            series: null,\r\n            plotOptions: {\r\n                series: {\r\n                    states: {\r\n                        hover: {\r\n                            enabled: null\r\n                        }\r\n                    },\r\n                    dataLabels: {\r\n                        enabled: null,\r\n                        style: {\r\n                            fontWeight: 'bold',\r\n                            fontSize: this.fontSizes['dataLabels'],\r\n                            textOutline: this.fontSizes['dataLabelsOutline'] + \" #fafbfc\",\r\n                        },\r\n                        format: null,\r\n                        padding: 0,\r\n                        allowOverlap: true,\r\n                        z: 7\r\n                    },\r\n                },\r\n            },\r\n            tooltip: {\r\n                headerFormat: '<span style=\"font-size: ' + this.fontSizes['tooltipHeader'] + '\"><b>{point.key}</b></span><br/>',\r\n                pointFormat: null,\r\n                style: {\r\n                    fontSize: this.fontSizes['tooltip']\r\n                }\r\n            },\r\n            legend: {\r\n                enabled: false,\r\n                // borderWidth: 1,\r\n                // align: 'center',\r\n                // verticalAlign: 'bottom',\r\n                // layout: 'horizontal'\r\n            },\r\n            credits: {\r\n                text: null,\r\n                position: {\r\n                    align: null,\r\n                    y: null\r\n                },\r\n                style: {\r\n                    fontSize: this.fontSizes['credits']\r\n                },\r\n            },\r\n            lang: {\r\n                noData: \"Select a competition\"\r\n            },\r\n            noData: {\r\n                attr: {\r\n                    zIndex: 6\r\n                },\r\n                style: {\r\n                    fontWeight: 'bold',\r\n                    fontSize: this.fontSizes['noData'],\r\n                    color: '#303030'\r\n                }\r\n            },\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * render function\r\n     * configures chart options based on props and draws the slice charts\r\n     * @return {*} - JSX code for the slice charts\r\n     */\r\n    render() {\r\n\r\n        let chartOptions = this.chartOptions;\r\n\r\n        //set the title\r\n        let title = chartOptions.title;\r\n        title.text = this.props.name;\r\n        // title.text += !this.isForExport ? \" <span style='font-size: 0.4em; transform: translateY(-50%)'>🔗</span>\" : \"\";\r\n\r\n        //build the subtitle\r\n        let subtitle = \"\";\r\n        if (this.props.series.length !== 0){\r\n            subtitle = `Age: ${this.props.age} ║ Minutes Played: ${this.props.minutes.toLocaleString()}<br/>`;\r\n            subtitle += this.subtitles[this.props.template];\r\n            if (this.props.template !== \"N/A\"){\r\n                subtitle += \"Percentile Rank Bars w/ Per 90 Stats<br/>\";\r\n            }\r\n            else {\r\n                subtitle += \"<br/>-\"\r\n            }\r\n        }\r\n        else {\r\n            subtitle = \"-<br>-<br>-\";\r\n        }\r\n        //set the subtitle\r\n        chartOptions.subtitle.text = subtitle;\r\n\r\n        //calculate the start angle based on the number of wedges\r\n        chartOptions.pane.startAngle = -((360/this.categories[this.props.template].length)/2);\r\n\r\n        let chart = chartOptions.chart;\r\n        //set animation (on update) to true or false\r\n        chart.animation = this.props.isAnimated;\r\n        //set chart margins\r\n        if (this.isForExport){\r\n            chart.marginTop = 230;\r\n            chart.marginBottom = (this.props.creditsPosition === \"right\") ? 100 : 120;\r\n        }\r\n        else {\r\n            chart.marginBottom = (this.props.creditsPosition === \"right\" && !this.props.isMobile) ? 30 : 60;\r\n            let url = this.props.url;\r\n            //add links to title and credits if the chart is not for export\r\n            chart.events = {\r\n                load: function() {\r\n                    this.title.element.onclick = function() {\r\n                        window.open(url, '_blank');\r\n                    };\r\n                    this.credits.element.onclick = function() {\r\n                        window.open('https://fbref.com', '_blank');\r\n                    }\r\n                },\r\n            };\r\n        }\r\n\r\n        let xAxis = chartOptions.xAxis;\r\n        //set x-axis labels\r\n        xAxis.categories = this.categories[this.props.template];\r\n        if (this.isForExport){\r\n            xAxis.labels.distance = 75;\r\n        }\r\n        else {\r\n            xAxis.labels.distance = this.isMobile ? 60 : 40;\r\n        }\r\n\r\n        //set data points\r\n        chartOptions.series = this.props.series.map(function (data) {\r\n            return {\r\n                pointPadding: 0,\r\n                groupPadding: 0,\r\n                // name: name,\r\n                data: data,\r\n                stickyTracking: false,\r\n                zIndex: 0\r\n            };\r\n        });\r\n\r\n        //disable initial animation and hover effects for charts that are for export\r\n        let series = chartOptions.plotOptions.series;\r\n        if (!this.props.isAnimatedInitial){\r\n            series.animation = this.props.isAnimatedInitial;\r\n        }\r\n        series.states.hover.enabled = this.props.isAnimatedInitial;\r\n\r\n        //set data labels\r\n        let dataLabels = series.dataLabels;\r\n        dataLabels.enabled = this.props.template !== \"N/A\";\r\n        dataLabels.format = this.props.labelType === \"raw\" ? '{point.p90_label}' : '{point.percentile_label}';\r\n\r\n        //disable tooltip for charts that for export\r\n        chartOptions.tooltip.enabled = this.props.hasTooltip;\r\n        chartOptions.tooltip.pointFormat = '<br>Raw Value: <b>{point.p90_label}</b><br/>Percentile Rank: <b>{point.percentile_label}</b>';\r\n\r\n        //set credits text and position\r\n        let credits = chartOptions.credits;\r\n        credits.text = `Data Source: FBref.com ${this.isMobile || this.isForExport ? '<br/>.<br/>' : '<br/>'} Last Updated: ${this.props.lastUpdated} UTC`;\r\n        credits.position = {\r\n            align: this.props.creditsPosition,\r\n            y: this.isMobile || this.isForExport ? -40 : -20\r\n        };\r\n\r\n        let className = this.isForExport ? null : \"result\";\r\n        let id = this.isForExport ? \"export\" : \"chart\";\r\n\r\n        //pass chart options to the Highcharts component and render\r\n        return (\r\n            <div className={className} id={id}>\r\n                <HighchartsReact\r\n                    constructorType={\"chart\"}\r\n                    highcharts={Highcharts}\r\n                    containerProps={{style: {width: '100%', height: '100%'}}}\r\n                    options={chartOptions}\r\n                />\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default (Slice);\r\n","import React, { Component } from 'react';\r\n\r\n//import dependencies\r\nimport Cookies from 'universal-cookie';\r\nimport Highcharts from 'highcharts'\r\nimport domtoimage from 'dom-to-image';\r\nimport saveAs from 'file-saver';\r\n\r\n//import components\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\nimport SearchBar from \"../components/SearchBar\";\r\nimport SliceOptions from \"../components/SliceOptions\";\r\nimport Slice from \"../components/Slice\";\r\n\r\n//initialize helpers\r\nconst dateFormat = require('dateformat');\r\nconst cookies = new Cookies();\r\n\r\n\r\n/**\r\n * Stats page component\r\n */\r\nclass Stats extends Component {\r\n\r\n    //class variable to track if the component is mounted\r\n    _isMounted = false;\r\n\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     */\r\n    constructor(props){\r\n\r\n        super(props);\r\n\r\n        //colors used in the Slices\r\n        this.colors = {\r\n            \"FW\": ['#f15c80', '#f15c80', '#f15c80', '#f15c80', '#f15c80', '#e4d354',\r\n                '#e4d354', '#e4d354', '#90ed7d', '#90ed7d', '#90ed7d', '#7cb5ec'],\r\n            \"AM\": ['#f15c80', '#f15c80', '#f15c80', '#e4d354', '#e4d354', '#e4d354',\r\n                '#e4d354', '#e4d354', '#90ed7d', '#90ed7d', '#90ed7d', '#7cb5ec'],\r\n            \"CM\": ['#e4d354', '#e4d354', '#e4d354', '#e4d354', '#e4d354', '#90ed7d',\r\n                '#90ed7d', '#90ed7d', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec'],\r\n            \"FB\": ['#e4d354', '#e4d354', '#e4d354', '#e4d354', '#90ed7d', '#90ed7d',\r\n                '#90ed7d', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec'],\r\n            \"CB\": ['#e4d354', '#e4d354', '#e4d354', '#e4d354', '#7cb5ec', '#7cb5ec',\r\n                '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec'],\r\n            \"GK\": ['#9499ff', '#9499ff', '#e4d354'],\r\n            \"N/A\": ['#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec',\r\n                '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec'],\r\n            null: ['#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec',\r\n                '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec', '#7cb5ec']\r\n        };\r\n\r\n        //cookies\r\n        let labelTypeCookie = cookies.get('labelType');\r\n        let creditsPositionCookie = cookies.get('creditsPosition');\r\n\r\n        this.state = {\r\n            isLoading: true,\r\n            error: null,\r\n            isMobile: this.props.isMobile,\r\n            isSafari: this.props.isSafari,\r\n            percentileArrays: this.props.percentileArrays,\r\n            name: '',\r\n            url: '',\r\n            age: 0,\r\n            clubs: {},\r\n            positions: {},\r\n            percentileEntries: {},\r\n            stats: {},\r\n            lastUpdated: null,\r\n            template: \"N/A\",\r\n            competitions: {},\r\n            selectedCompetitions: {},\r\n            labelType: labelTypeCookie === undefined ? \"raw\" : labelTypeCookie,\r\n            creditsPosition: creditsPositionCookie === undefined ? \"right\" : creditsPositionCookie,\r\n            isAnimated: true\r\n        };\r\n\r\n        this.getStats();\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Called after component has mounted\r\n     */\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to send a post request to the server to retrieve the stats of the player\r\n     */\r\n    getStats = () => {\r\n\r\n        const { code } = this.props.match.params;\r\n\r\n        //fetch stats\r\n        fetch('/api/stats', {\r\n            method: 'post',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                \"code\": code,\r\n                \"percentilesTimestamp\": this.state.percentileArrays['lastUpdated']\r\n            })\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            else {\r\n                throw new Error(\"Failed to fetch. This is likely due to a malformed URL. Please try searching for the player again.\")\r\n            }\r\n        })\r\n        .then(response => this.processStats(response))\r\n        .catch(error => {\r\n            if (this._isMounted){\r\n                this.setState({error, isLoading: false})\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param {Object} playerStats - object containing the player metadata and stats, as well as new percentile arrays\r\n     * in the event that the server needs to update a client's percentile arrays.\r\n     */\r\n    processStats = (playerStats) => {\r\n\r\n        //check if the stats object contains new percentile arrays\r\n        if (playerStats.newPercentileArrays !== undefined){\r\n            //update percentile arrays in parent component as required\r\n            this.props.updatePercentileArrays(playerStats.newPercentileArrays);\r\n            playerStats = playerStats.stats;\r\n        }\r\n\r\n        //process player position entry and set template. template is set to the most recent non-\"N/A\" position\r\n        //in the player's position entries\r\n        let template = \"N/A\";\r\n        for (let season in playerStats.positions){\r\n            let position = playerStats.positions[season];\r\n            if (position !== \"N/A\"){\r\n                template = position;\r\n            }\r\n        }\r\n\r\n        //retrieve player competitions. stored in an object where the keys are seasons and the values are arrays\r\n        //of the competitions for the season\r\n        let competitions = {};\r\n        for (let season in playerStats.stats){\r\n            competitions[season] = [];\r\n            for (let competition in playerStats.stats[season]){\r\n                competitions[season].push(competition);\r\n            }\r\n        }\r\n\r\n        if (this._isMounted){\r\n            this.setState({\r\n                isLoading: false,\r\n                name: playerStats.name,\r\n                url: \"https://fbref.com/en/players/\" + playerStats.fbrefCode,\r\n                age: playerStats.age,\r\n                clubs: playerStats.clubs,\r\n                percentileEntries: playerStats.percentileEntries,\r\n                stats: playerStats.stats,\r\n                lastUpdated: dateFormat(playerStats.lastUpdated, \"dd/mm/yyyy, h:MM TT\", true),\r\n                template: template,\r\n                competitions: JSON.parse(JSON.stringify(competitions)),\r\n                selectedCompetitions: JSON.parse(JSON.stringify(competitions)),\r\n            })\r\n        }\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Called just before the component un-mounts\r\n     */\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to filter the complete stats based on the selected competitions\r\n     * @param {Object} stats - object containing the complete stats of the player\r\n     * @return {Object} filteredStats - object containing aggregated totals of the filtered stats\r\n     */\r\n    filterStats = (stats) => {\r\n\r\n        let filteredStats = {};\r\n        let selectedCompetitions = this.state.selectedCompetitions;\r\n\r\n        //iterate through complete stats, check if a competition is selected, and add the stats for said competition\r\n        //to the aggregated stats if so\r\n        for (let season in stats){\r\n            for (let competition in stats[season]){\r\n                if (selectedCompetitions[season].includes(competition)) {\r\n                    for (let stat in stats[season][competition]) {\r\n                        if (!(stat in filteredStats)) {\r\n                            filteredStats[stat] = stats[season][competition][stat];\r\n                        }\r\n                        else {\r\n                            filteredStats[stat] += stats[season][competition][stat];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return filteredStats;\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to calculate the 'per90' stats and percentile ranks of the filtered stats\r\n     * @param {Object} filteredStats - object containing the aggregated totals from the selected competitions\r\n     * @return {{statsPer90, percentiles}} - object containing the per90 stats and percentile ranks\r\n     */\r\n    calculateStats = (filteredStats) => {\r\n\r\n        let percentileArrays = this.state.percentileArrays;\r\n        let percentileEntries = this.state.percentileEntries;\r\n        let selectedCompetitions = this.state.selectedCompetitions;\r\n        let template = this.state.template;\r\n\r\n        let includedSeasons = [];\r\n        let percentileSeason;\r\n        let percentileArrayOccurrences = 0;\r\n\r\n        //iterate through selected competitions and list the seasons they span\r\n        for (let season in selectedCompetitions) {\r\n            if (selectedCompetitions[season].length !== 0) {\r\n                includedSeasons.push(season);\r\n            }\r\n        }\r\n        //if only one season is selected, set the percentile season to that season\r\n        if (includedSeasons.length === 1) {\r\n            percentileSeason = includedSeasons[0];\r\n        }\r\n        //set the percentile season to the combined dataset otherwise\r\n        else {\r\n            percentileSeason = \"combined\";\r\n        }\r\n\r\n        //count how many of the entries in the percentile array belong to the player\r\n        //this is done so that the percentile rank can be adjusted in order not to double count a player's entries\r\n        for (let season in percentileEntries) {\r\n            if (percentileSeason === season || percentileSeason === \"combined\") {\r\n                if (percentileEntries[season].includes(template)) {\r\n                    percentileArrayOccurrences = 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        let statsPer90 = {};\r\n        let percentiles = {};\r\n\r\n        //calculate per90 stats\r\n        let minutes = filteredStats['minutes'];\r\n        switch (template) {\r\n            case \"FW\":\r\n                statsPer90[\"npg\"] = filteredStats[\"npg\"] / (minutes / 90);\r\n                statsPer90[\"npxg\"] = filteredStats[\"npxg\"] / (minutes / 90);\r\n                statsPer90[\"npxgPerShot\"] = filteredStats[\"npxg\"] / filteredStats[\"shots\"];\r\n                statsPer90[\"conversionRate\"] = (filteredStats[\"npg\"] / filteredStats[\"shots\"]) * 100;\r\n                statsPer90[\"aerialSuccRate\"] = (filteredStats[\"succAerials\"] / filteredStats[\"attAerials\"]) * 100;\r\n                statsPer90[\"boxTouches\"] = filteredStats[\"boxTouches\"] / (minutes / 90);\r\n                statsPer90[\"xa\"] = filteredStats[\"xa\"] / (minutes / 90);\r\n                statsPer90[\"ppa\"] = filteredStats[\"ppa\"] / (minutes / 90);\r\n                statsPer90[\"succDribbles\"] = filteredStats[\"succDribbles\"] / (minutes / 90);\r\n                statsPer90[\"dribbleSuccRate\"] = (filteredStats[\"succDribbles\"] / filteredStats[\"attDribbles\"]) * 100;\r\n                statsPer90[\"timesDispossessed\"] = filteredStats[\"timesDispossessed\"] / (minutes / 90);\r\n                // statsPer90[\"succPressures\"] = filteredStats[\"succPressures\"] / (minutes/90);\r\n                statsPer90[\"padjSuccPressures\"] = filteredStats[\"padjSuccPressures\"] / (minutes / 90);\r\n                break;\r\n            case \"AM\":\r\n                statsPer90[\"npg\"] = filteredStats[\"npg\"] / (minutes / 90);\r\n                statsPer90[\"npxg\"] = filteredStats[\"npxg\"] / (minutes / 90);\r\n                statsPer90[\"npxgPerShot\"] = filteredStats[\"npxg\"] / filteredStats[\"shots\"];\r\n                statsPer90[\"xa\"] = filteredStats[\"xa\"] / (minutes / 90);\r\n                statsPer90[\"sca\"] = filteredStats[\"sca\"] / (minutes / 90);\r\n                statsPer90[\"ppa\"] = filteredStats[\"ppa\"] / (minutes / 90);\r\n                statsPer90[\"progDistance\"] = filteredStats[\"progDistance\"] / (minutes / 90);\r\n                statsPer90[\"passSuccRate\"] = (filteredStats[\"succPasses\"] / filteredStats[\"attPasses\"]) * 100;\r\n                statsPer90[\"succDribbles\"] = filteredStats[\"succDribbles\"] / (minutes / 90);\r\n                statsPer90[\"dribbleSuccRate\"] = (filteredStats[\"succDribbles\"] / filteredStats[\"attDribbles\"]) * 100;\r\n                statsPer90[\"timesDispossessed\"] = filteredStats[\"timesDispossessed\"] / (minutes / 90);\r\n                // statsPer90[\"succPressures\"] = filteredStats[\"succPressures\"] / (minutes/90);\r\n                statsPer90[\"padjSuccPressures\"] = filteredStats[\"padjSuccPressures\"] / (minutes / 90);\r\n                break;\r\n            case \"CM\":\r\n                statsPer90[\"xa\"] = filteredStats[\"xa\"] / (minutes / 90);\r\n                statsPer90[\"sca\"] = filteredStats[\"sca\"] / (minutes / 90);\r\n                statsPer90[\"pft\"] = filteredStats[\"pft\"] / (minutes / 90);\r\n                statsPer90[\"progDistance\"] = filteredStats[\"progDistance\"] / (minutes / 90);\r\n                statsPer90[\"passSuccRate\"] = (filteredStats[\"succPasses\"] / filteredStats[\"attPasses\"]) * 100;\r\n                statsPer90[\"succDribbles\"] = filteredStats[\"succDribbles\"] / (minutes / 90);\r\n                statsPer90[\"dribbleSuccRate\"] = (filteredStats[\"succDribbles\"] / filteredStats[\"attDribbles\"]) * 100;\r\n                statsPer90[\"timesDispossessed\"] = filteredStats[\"timesDispossessed\"] / (minutes / 90);\r\n                // statsPer90[\"succPressures\"] = filteredStats[\"succPressures\"] / (minutes/90);\r\n                statsPer90[\"padjSuccPressures\"] = filteredStats[\"padjSuccPressures\"] / (minutes / 90);\r\n                // statsPer90[\"interceptions\"] = filteredStats[\"interceptions\"] / (minutes/90);\r\n                statsPer90[\"padjInterceptions\"] = filteredStats[\"padjInterceptions\"] / (minutes / 90);\r\n                // statsPer90[\"tacklesWon\"] = filteredStats[\"tacklesWon\"] / (minutes/90);\r\n                statsPer90[\"padjTacklesWon\"] = filteredStats[\"padjTacklesWon\"] / (minutes / 90);\r\n                statsPer90[\"dribbleTackleRate\"] = (filteredStats[\"succDribbleTackles\"] / filteredStats[\"attDribbleTackles\"]) * 100;\r\n                break;\r\n            case \"FB\":\r\n                statsPer90[\"xa\"] = filteredStats[\"xa\"] / (minutes / 90);\r\n                statsPer90[\"pft\"] = filteredStats[\"pft\"] / (minutes / 90);\r\n                statsPer90[\"progDistance\"] = filteredStats[\"progDistance\"] / (minutes / 90);\r\n                statsPer90[\"passSuccRate\"] = (filteredStats[\"succPasses\"] / filteredStats[\"attPasses\"]) * 100;\r\n                statsPer90[\"succDribbles\"] = filteredStats[\"succDribbles\"] / (minutes / 90);\r\n                statsPer90[\"dribbleSuccRate\"] = (filteredStats[\"succDribbles\"] / filteredStats[\"attDribbles\"]) * 100;\r\n                statsPer90[\"timesDispossessed\"] = filteredStats[\"timesDispossessed\"] / (minutes / 90);\r\n                // statsPer90[\"succPressures\"] = filteredStats[\"succPressures\"] / (minutes/90);\r\n                statsPer90[\"padjSuccPressures\"] = filteredStats[\"padjSuccPressures\"] / (minutes / 90);\r\n                // statsPer90[\"interceptions\"] = filteredStats[\"interceptions\"] / (minutes/90);\r\n                statsPer90[\"padjInterceptions\"] = filteredStats[\"padjInterceptions\"] / (minutes / 90);\r\n                // statsPer90[\"tacklesWon\"] = filteredStats[\"tacklesWon\"] / (minutes/90);\r\n                statsPer90[\"padjTacklesWon\"] = filteredStats[\"padjTacklesWon\"] / (minutes / 90);\r\n                statsPer90[\"dribbleTackleRate\"] = (filteredStats[\"succDribbleTackles\"] / filteredStats[\"attDribbleTackles\"]) * 100;\r\n                statsPer90[\"aerialSuccRate\"] = (filteredStats[\"succAerials\"] / filteredStats[\"attAerials\"]) * 100;\r\n                break;\r\n            case \"CB\":\r\n                statsPer90[\"pft\"] = filteredStats[\"pft\"] / (minutes / 90);\r\n                statsPer90[\"progDistance\"] = filteredStats[\"progDistance\"] / (minutes / 90);\r\n                statsPer90[\"passSuccRate\"] = (filteredStats[\"succPasses\"] / filteredStats[\"attPasses\"]) * 100;\r\n                statsPer90[\"longPassSuccRate\"] = (filteredStats[\"succLongPasses\"] / filteredStats[\"attLongPasses\"]) * 100;\r\n                // statsPer90[\"succPressures\"] = filteredStats[\"succPressures\"] / (minutes/90);\r\n                statsPer90[\"padjSuccPressures\"] = filteredStats[\"padjSuccPressures\"] / (minutes / 90);\r\n                // statsPer90[\"interceptions\"] = filteredStats[\"interceptions\"] / (minutes/90);\r\n                statsPer90[\"padjInterceptions\"] = filteredStats[\"padjInterceptions\"] / (minutes / 90);\r\n                // statsPer90[\"tacklesWon\"] = filteredStats[\"tacklesWon\"] / (minutes/90);\r\n                statsPer90[\"padjTacklesWon\"] = filteredStats[\"padjTacklesWon\"] / (minutes / 90);\r\n                statsPer90[\"dribbleTackleRate\"] = (filteredStats[\"succDribbleTackles\"] / filteredStats[\"attDribbleTackles\"]) * 100;\r\n                // statsPer90[\"fouls\"] = filteredStats[\"fouls\"] / (minutes/90);\r\n                statsPer90[\"padjFouls\"] = filteredStats[\"padjFouls\"] / (minutes / 90);\r\n                statsPer90[\"succAerials\"] = filteredStats[\"succAerials\"] / (minutes / 90);\r\n                statsPer90[\"aerialSuccRate\"] = (filteredStats[\"succAerials\"] / filteredStats[\"attAerials\"]) * 100;\r\n                // statsPer90[\"clearances\"] = filteredStats[\"clearances\"] / (minutes/90);\r\n                statsPer90[\"padjClearances\"] = filteredStats[\"padjClearances\"] / (minutes / 90);\r\n                break;\r\n            case \"GK\":\r\n                statsPer90[\"gsaa\"] = ((filteredStats[\"psxg\"] - filteredStats[\"goalsAgainst\"]) / filteredStats[\"sota\"]) * 100;\r\n                statsPer90[\"crossStopRate\"] = (filteredStats[\"stoppedCrosses\"] / filteredStats[\"attCrosses\"]) * 100;\r\n                statsPer90[\"launchedPassSuccRate\"] = (filteredStats[\"succLaunchedPasses\"] / filteredStats[\"attLaunchedPasses\"]) * 100;\r\n                break;\r\n            default:\r\n                statsPer90[\"npg\"] = 0;\r\n                statsPer90[\"npxg\"] = 0;\r\n                statsPer90[\"npxgPerShot\"] = 0;\r\n                statsPer90[\"conversionRate\"] = 0;\r\n                statsPer90[\"succAerials\"] = 0;\r\n                statsPer90[\"boxTouches\"] = 0;\r\n                statsPer90[\"xa\"] = 0;\r\n                statsPer90[\"ppa\"] = 0;\r\n                statsPer90[\"succDribbles\"] = 0;\r\n                statsPer90[\"dribbleSuccRate\"] = 0;\r\n                statsPer90[\"timesDispossessed\"] = 0;\r\n                // statsPer90[\"succPressures\"] = 0;\r\n                statsPer90[\"padjSuccPressures\"] = 0;\r\n        }\r\n\r\n        // for (let stat in statsPer90){\r\n        //     percentiles[stat] = 100;\r\n        // }\r\n\r\n        //calculate percentile ranks\r\n        if (template !== \"N/A\") {\r\n            for (let stat in statsPer90) {\r\n                if (isFinite(statsPer90[stat])) {\r\n                    percentiles[stat] = this.percentileRank(percentileArrays[percentileSeason][template][stat], statsPer90[stat], percentileArrayOccurrences) * 100;\r\n                }\r\n                //handle cases where the per 90 value is NaN (e.g.: as a result of divide by 0 error)\r\n                else {\r\n                    statsPer90[stat] = 0;\r\n                    percentiles[stat] = 0;\r\n                }\r\n                //reverse percentile ranks for \"less is better\" stats\r\n                if (stat === \"padjFouls\" || stat === \"timesDispossessed\") {\r\n                    percentiles[stat] = 100 - percentiles[stat];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let stat in statsPer90) {\r\n                percentiles[stat] = 0;\r\n            }\r\n        }\r\n\r\n        return {\r\n            statsPer90: statsPer90,\r\n            percentiles: percentiles\r\n        };\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to calculate the percentile rank of a given value within a given array\r\n     * @param {Array} array - the array of values\r\n     * @param {number} value - the value for which the percentile rank is being calculated\r\n     * @param {Integer} occurrences - the number of occurrences of the player's numbers within the percentile array\r\n     * @return {number} the percentile rank of the value in the array (adjusted for the double-counting problem)\r\n     */\r\n    percentileRank = (array, value, occurrences) => {\r\n\r\n        //taken from: https://gist.github.com/IceCreamYou/6ffa1b18c4c8f6aeaad2\r\n        if (!isFinite(value)){\r\n            value = 0;\r\n        }\r\n        for (let i = 0, length = array.length; i < length; i++) {\r\n            if (value < array[i]) {\r\n                while (i < length && value === array[i]) i++;\r\n                if (i === 0) return 0;\r\n                if (value !== array[i-1]) {\r\n                    i += (value - array[i-1]) / (array[i] - array[i-1]);\r\n                }\r\n                //adjust the returned percentile by disregarding the entries that belong to the player\r\n                return (i / length) - (occurrences/array.length);\r\n            }\r\n        }\r\n        return 1;\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to construct the input given to the Highcharts component\r\n     * @param {Object} statsPer90 - object containing the per90 stats\r\n     * @param {Object} percentiles - object containing the percentile ranks\r\n     * @return {Array} chartInput - array containing information for each data point in the Highcharts plot\r\n     */\r\n    constructChartInput = (statsPer90, percentiles) => {\r\n\r\n        let template = this.state.template;\r\n        let colors = this.colors[template];\r\n\r\n        //remove unnecessary precision from the per90 labels and the percentile ranks\r\n        let p90_labels = this.truncate(statsPer90);\r\n        let percentile_labels = this.roundNumbers(percentiles, 0);\r\n\r\n        //iterate through per90 stats and percentile ranks and construct objects for each point on the Highcharts plot\r\n        let chartInput = [];\r\n        let i = 0;\r\n        for (let key in percentiles){\r\n            chartInput[i] = {\r\n                y: percentiles[key],\r\n                p90_label: p90_labels[key],\r\n                percentile_label: this.ordinalSuffix(percentile_labels[key]),\r\n                color: Highcharts.Color(colors[i]).setOpacity(0.85).get()\r\n            };\r\n            i++;\r\n        }\r\n        return chartInput;\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to truncate all values in an object to 3 digits\r\n     * @param {Object} someStats - object containing the values that need to be reduced to 3 digits\r\n     * @return {Object} threeDigitStats - object containing value of someStats reduced to 3 digits\r\n     */\r\n    truncate = (someStats) => {\r\n\r\n        let threeDigitStats = {};\r\n\r\n        for (let stat in someStats){\r\n            let precision;\r\n            if (\r\n                stat === \"progDistance\" ||\r\n                someStats[stat] === 0\r\n            ) {\r\n                precision = 0;\r\n            }\r\n            else if (\r\n                stat === \"conversionRate\" ||\r\n                stat === \"aerialSuccRate\" ||\r\n                stat === \"dribbleSuccRate\" ||\r\n                stat === \"passSuccRate\" ||\r\n                stat === \"dribbleTackleRate\" ||\r\n                stat === \"longPassSuccRate\" ||\r\n                stat === \"launchedPassSuccRate\"\r\n            ) {\r\n                precision = 1;\r\n            }\r\n            else if (\r\n                stat === \"npxgPerShot\"\r\n            ){\r\n                precision = 3;\r\n            }\r\n            else {\r\n                precision = 2;\r\n            }\r\n            threeDigitStats[stat] = parseFloat(Math.round(someStats[stat] * (10**precision)) / (10**precision)).toFixed(precision);\r\n        }\r\n        return threeDigitStats;\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to round all values in an object to a specified precision\r\n     * @param {Object} someStats - object containing the values that need to be rounded\r\n     * @param {number} precision - the number of decimal places each number should be rounded to\r\n     * @return {Object}\r\n     */\r\n    roundNumbers = (someStats, precision) => {\r\n\r\n        let roundedStats = {};\r\n\r\n        for (let stat in someStats){\r\n            roundedStats[stat] = Math.round(someStats[stat] * (10**precision)) / (10**precision);\r\n        }\r\n\r\n        return roundedStats;\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to append an ordinal suffix (-st, -nd, -rd, -th) to numbers\r\n     * @param {number} aNumber - the number to which the ordinal suffix is being appended\r\n     * @return {string} - the number with the ordinal suffix appended to it\r\n     */\r\n    ordinalSuffix = (aNumber) => {\r\n\r\n        //taken from: https://stackoverflow.com/questions/13627308/add-st-nd-rd-and-th-ordinal-suffix-to-a-number\r\n        let j = aNumber % 10,\r\n            k = aNumber % 100;\r\n        if (j === 1 && k !== 11) {\r\n            return aNumber + \"st\";\r\n        }\r\n        if (j === 2 && k !== 12) {\r\n            return aNumber + \"nd\";\r\n        }\r\n        if (j === 3 && k !== 13) {\r\n            return aNumber + \"rd\";\r\n        }\r\n        return aNumber + \"th\";\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to change the selected template\r\n     * @param {Object} event - the input event from the template form\r\n     */\r\n    changeTemplate = (event) => {\r\n\r\n        let template = event.target.value;\r\n\r\n        this.setState({\r\n            template: template,\r\n            isAnimated: true\r\n        }, () => {\r\n\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to change the list of selected competitions\r\n     * @param {Object} event - the input event from the competitions form\r\n     */\r\n    changeSelectedCompetitions = (event) => {\r\n\r\n        let selectedCompetitions = this.state.selectedCompetitions;\r\n        let clickedValues = event.target.value.split(\"_\");\r\n\r\n        let clickedSeason = clickedValues[0];\r\n        let clickedCompetition = clickedValues[1];\r\n\r\n        if (selectedCompetitions[clickedSeason].includes(clickedCompetition)){\r\n            selectedCompetitions[clickedSeason].splice(selectedCompetitions[clickedSeason].indexOf(clickedCompetition), 1);\r\n        }\r\n        else {\r\n            selectedCompetitions[clickedSeason].push(clickedCompetition);\r\n        }\r\n\r\n        this.setState({\r\n            selectedCompetitions: selectedCompetitions,\r\n            isAnimated: true\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to change the type of data labels\r\n     * @param {Object} event - the input event from the data labels form\r\n     */\r\n    changeLabelType = (event) => {\r\n\r\n        let labelType = event.target.value;\r\n\r\n        cookies.set('labelType', labelType, {path: '/'});\r\n\r\n        this.setState({\r\n            labelType: labelType,\r\n            isAnimated: false\r\n        })\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to change the position of the credits at the bottom of the Slice container\r\n     */\r\n    toggleCreditsPosition = () => {\r\n\r\n        let oldPosition = this.state.creditsPosition;\r\n        let newPosition = oldPosition === \"right\" ? \"center\" : \"right\";\r\n\r\n        cookies.set('creditsPosition', newPosition, {path: '/'});\r\n        this.setState({\r\n            isAnimated: false,\r\n            creditsPosition: newPosition\r\n        })\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to export the chart in a standardized 2400 * 2000 PNG format\r\n     * Exports the second slice that is rendered to the \"#export\" div, which has fixed height and width\r\n     * Adds the FootballSlices watermark to the exported image\r\n     * @return {Promise<void>}\r\n     */\r\n    //TODO: re-factor this functionality so that the second slice is only rendered when an export is required\r\n    exportChart = async () => {\r\n\r\n        const isSafari = this.state.isSafari;\r\n        if (isSafari){\r\n            alert(\"Sorry, this feature is not supported in Safari.\");\r\n            return;\r\n        }\r\n\r\n        const name = this.state.name;\r\n        const node = document.getElementById('export');\r\n        const scale = 2;\r\n\r\n        //scale the background (the watermark)\r\n        let backgroundSize = 18/scale;\r\n\r\n        //get the width and height of the background in pixels\r\n        let backgroundWidth = (backgroundSize/100) * node.offsetWidth;\r\n        let backgroundHeight = (791/2070) * backgroundWidth; //height = inverted aspect ratio * width\r\n\r\n        //get the height of the background as a percentage of the total height of the chart\r\n        let backgroundHeightRatio = (backgroundHeight / node.offsetHeight) * 100;\r\n\r\n        //get the aspect ratio of the export div\r\n        let nodeAspectRatio = node.offsetWidth / node.offsetHeight;\r\n\r\n        domtoimage.toPng(node, {\r\n            bgcolor: '#fafbfc',\r\n            width: 1200 * scale,\r\n            height: 1100 * scale,\r\n            style: {\r\n                //make the export div visible\r\n                opacity: '1',\r\n                //scale up 4x to improve the resolution of the exported chart\r\n                transform: `scale(${scale}) translate(${node.offsetWidth / 2 / scale}px, ${node.offsetHeight / 2 / scale}px)`,\r\n                //set the background position after the 4x scaling\r\n                //for the Y position, we start with 50% (bottom left),\r\n                //and then adjust based on the height of the watermark to achieve 0.3% bottom pading\r\n                'background-position': `0.3% ${(100/scale)-(0.3*nodeAspectRatio)-((backgroundHeightRatio+(0.3*nodeAspectRatio))/scale)}%`,\r\n                'background-size': `${backgroundSize}%`\r\n            }\r\n        })\r\n        .then(function (blob) {\r\n            saveAs(blob, `${name.replace(\" \", \"-\")}.png`);\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n            alert(\"An error occurred while exporting. Please refresh the page and try again.\")\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * render function\r\n     * @return {*} - JSX code for the stats page\r\n     */\r\n    render() {\r\n\r\n        let {\r\n            isLoading,\r\n            error,\r\n            url,\r\n            name,\r\n            age,\r\n            clubs,\r\n            stats,\r\n            lastUpdated,\r\n            competitions,\r\n            selectedCompetitions,\r\n            template,\r\n            labelType,\r\n            creditsPosition,\r\n            isAnimated,\r\n            isMobile\r\n        } = this.state;\r\n\r\n        //display loading spinner while the server responds to POST request for the stats\r\n        if (isLoading) {\r\n            return (\r\n                <LoadingSpinner/>\r\n            )\r\n        }\r\n\r\n        //display the error message screen if an error is caught\r\n        else if (error !== null) {\r\n            return (\r\n                <div id=\"main2\">\r\n                    <SearchBar page=\"stats\" query={this.state.query}/>\r\n                    <div className=\"screen\" id=\"error-screen\">\r\n                        <p>{error.message}</p>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        //build stats page otherwise\r\n        else {\r\n\r\n            //calculate stats and construct chart input\r\n            let filteredStats = {};\r\n            let series = [];\r\n            if (template !== null) {\r\n                filteredStats = this.filterStats(stats);\r\n                if (Object.keys(filteredStats).length !== 0){\r\n                    let calculatedStats = this.calculateStats(filteredStats);\r\n                    let chartInput = this.constructChartInput(calculatedStats.statsPer90, calculatedStats.percentiles);\r\n                    series = [chartInput];\r\n\r\n                }\r\n            }\r\n\r\n            //return JSX code for the stats page\r\n            return (\r\n                <div id=\"main2\">\r\n                    <SearchBar page=\"stats\"/>\r\n                    <div className=\"screen2\" id=\"stats-screen\">\r\n                        <SliceOptions\r\n                            isMobile={isMobile}\r\n                            template={template}\r\n                            competitions={competitions}\r\n                            clubs={clubs}\r\n                            selectedCompetitions={selectedCompetitions}\r\n                            labelType={labelType}\r\n                            changeTemplate={this.changeTemplate}\r\n                            changeSelectedCompetitions={this.changeSelectedCompetitions}\r\n                            changeLabelType={this.changeLabelType}\r\n                            toggleCreditsPosition={this.toggleCreditsPosition}\r\n                            exportChart={this.exportChart}\r\n                        />\r\n                        <Slice\r\n                            isMobile={isMobile}\r\n                            isForExport={false}\r\n                            isAnimated={isAnimated}\r\n                            isAnimatedInitial={true}\r\n                            hasTooltip={true}\r\n                            creditsPosition={creditsPosition}\r\n                            url={url}\r\n                            lastUpdated={lastUpdated}\r\n                            template={template}\r\n                            labelType={labelType}\r\n                            name={name}\r\n                            age={age}\r\n                            minutes={filteredStats['minutes']}\r\n                            series={series}\r\n                        />\r\n                    </div>\r\n                    {/*extra div which contains the Slice used in exports. Not displayed*/}\r\n                    <Slice\r\n                        isMobile={isMobile}\r\n                        isForExport={true}\r\n                        isAnimated={false}\r\n                        isAnimatedInitial={false}\r\n                        hasTooltip={false}\r\n                        creditsPosition={creditsPosition}\r\n                        url={null}\r\n                        lastUpdated={lastUpdated}\r\n                        template={template}\r\n                        labelType={labelType}\r\n                        name={name}\r\n                        age={age}\r\n                        minutes={filteredStats['minutes']}\r\n                        series={series}\r\n                    />\r\n                </div>\r\n            );\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Stats;\r\n","import React, { Component } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport {isMobileOnly, isSafari} from 'react-device-detect';\r\nimport $ from 'jquery';\r\n\r\n//import pages\r\nimport Home from './pages/Home';\r\nimport Search from './pages/Search';\r\nimport Stats from './pages/Stats';\r\n\r\n//import stylesheets, including mobile stylesheet if it is a mobile device\r\nrequire('./stylesheets/App.css');\r\nif (isMobileOnly){\r\n    import('./stylesheets/Mobile.css')\r\n    .then(test => {\r\n        console.log(\"Mobile device detected\")\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * Main app component. Handles routing, and the retrieval of percentile arrays.\r\n */\r\nclass App extends Component {\r\n\r\n\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n\r\n        super(props);\r\n        this.state = {\r\n            isLoading: true,\r\n            percentileArrays: {},\r\n        };\r\n        this.getPercentileArrays();\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Called after component has mounted\r\n     */\r\n    componentDidMount() {\r\n\r\n        //hard code the height of html, body, root and root-container if it is a mobile device\r\n        //this is done because the soft keyboards on mobile devices affect the vh\r\n        if (isMobileOnly){\r\n            var height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n            $(\"html, body, #root, #root-container\").css({\"height\": height});\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Function to send a POST request to the server to retrieve the percentile arrays\r\n     */\r\n    getPercentileArrays = () => {\r\n\r\n        //retrieve percentile arrays and set isLoading to false\r\n        fetch('/api/percentiles', {\r\n            method: 'post',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({})\r\n        })\r\n        .then(res => {\r\n            return res.json()\r\n        })\r\n        .then(percentileArrays => this.setState({percentileArrays: percentileArrays, isLoading: false}))\r\n        .catch();\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Function to update percentile arrays (called from Stats page)\r\n     * @param {Object} newPercentileArrays - the object representing the new percentile arrays\r\n     */\r\n    updatePercentileArrays = (newPercentileArrays) => {\r\n\r\n        this.setState({\r\n            percentileArrays: newPercentileArrays\r\n        })\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * render function\r\n     * @return {*} - JSX code for the website routing\r\n     */\r\n    render() {\r\n\r\n        let { isLoading } = this.state;\r\n\r\n        //display loading message while server responds to POST request for the percentile arrays\r\n        if (isLoading) {\r\n            return (\r\n                <div id=\"main\">\r\n                    <div className=\"screen\" id=\"loading-screen\">\r\n                        Connecting to server...\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        //return routing code otherwise\r\n        else {\r\n\r\n            const App = () => (\r\n                <div id=\"root-container\">\r\n                    <Switch>\r\n                        <Route exact path='/' render={(props) =>\r\n                            <Home {...props}\r\n                                  isMobile={isMobileOnly}\r\n                            />}\r\n                        />\r\n                        <Route path='/search/:query/:searchByClub?' component={Search}/>\r\n                        <Route path='/stats/:code' render={(props) =>\r\n                            <Stats {...props}\r\n                                 percentileArrays={this.state.percentileArrays}\r\n                                 isMobile={isMobileOnly}\r\n                                 isSafari={isSafari}\r\n                                 updatePercentileArrays={this.updatePercentileArrays}\r\n                            />}\r\n                        />\r\n                        <Route path='*' component={Home}/>\r\n                    </Switch>\r\n                </div>\r\n            );\r\n\r\n            return (\r\n                <Switch>\r\n                    <App/>\r\n                </Switch>\r\n            );\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport './index.css';\r\nimport App from './App/App';\r\n\r\nrender((\r\n    <BrowserRouter>\r\n        <App/>\r\n    </BrowserRouter>\r\n), document.getElementById('root'));"],"sourceRoot":""}